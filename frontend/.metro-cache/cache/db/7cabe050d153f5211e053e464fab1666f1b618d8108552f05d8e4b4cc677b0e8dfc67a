{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-speech","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":50,"column":21,"index":1132},"end":{"line":50,"column":43,"index":1154}},{"start":{"line":105,"column":19,"index":2352},"end":{"line":105,"column":41,"index":2374}}],"key":"LDPUbC/85yT4sQ+Lbzn6/fUlPKc=","exportNames":["*"],"imports":2,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.speak = speak;\n  exports.stop = stop;\n  exports.isSpeaking = isSpeaking;\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * TTS Player â€” text-to-speech playback with interruption.\n   *\n   * Uses expo-speech on native, Web Speech API on web.\n   * Supports interruption: calling stop() cancels current speech.\n   */\n\n  let _isSpeaking = false;\n  let _onComplete = null;\n  let _onStart = null;\n\n  /**\n   * Speak text using TTS. Calls onComplete when finished.\n   */\n  async function speak(text, options) {\n    // Interrupt any current speech\n    await stop();\n    _onComplete = options?.onComplete || null;\n    _onStart = options?.onStart || null;\n    if (Platform.default.OS === 'web') {\n      _speakWeb(text, options);\n    } else {\n      _speakNative(text, options);\n    }\n  }\n\n  /**\n   * Stop current speech immediately.\n   */\n  async function stop() {\n    _isSpeaking = false;\n    if (Platform.default.OS === 'web') {\n      if (typeof window !== 'undefined' && window.speechSynthesis) {\n        window.speechSynthesis.cancel();\n      }\n    } else {\n      try {\n        const Speech = require(_dependencyMap[1], \"expo-speech\");\n        await Speech.stop();\n      } catch (e) {\n        // ignore\n      }\n    }\n  }\n\n  /**\n   * Check if currently speaking.\n   */\n  function isSpeaking() {\n    return _isSpeaking;\n  }\n\n  // ---- Web Speech API ----\n  function _speakWeb(text, options) {\n    if (typeof window === 'undefined' || !window.speechSynthesis) {\n      console.warn('[TTS] Web Speech API not available');\n      options?.onComplete?.();\n      return;\n    }\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = options?.rate || 1.0;\n    utterance.pitch = options?.pitch || 1.0;\n    utterance.lang = 'en-US';\n    utterance.onstart = () => {\n      _isSpeaking = true;\n      options?.onStart?.();\n    };\n    utterance.onend = () => {\n      _isSpeaking = false;\n      options?.onComplete?.();\n    };\n    utterance.onerror = () => {\n      _isSpeaking = false;\n      options?.onComplete?.();\n    };\n    window.speechSynthesis.speak(utterance);\n  }\n\n  // ---- Native (expo-speech) ----\n  function _speakNative(text, options) {\n    try {\n      const Speech = require(_dependencyMap[1], \"expo-speech\");\n      _isSpeaking = true;\n      options?.onStart?.();\n      Speech.speak(text, {\n        rate: options?.rate || 1.0,\n        pitch: options?.pitch || 1.0,\n        language: 'en-US',\n        onDone: () => {\n          _isSpeaking = false;\n          options?.onComplete?.();\n        },\n        onError: () => {\n          _isSpeaking = false;\n          options?.onComplete?.();\n        }\n      });\n    } catch (e) {\n      console.error('[TTS] Native speech failed:', e);\n      _isSpeaking = false;\n      options?.onComplete?.();\n    }\n  }\n});","lineCount":120,"map":[[12,2,16,0,"exports"],[12,9,16,0],[12,10,16,0,"speak"],[12,15,16,0],[12,18,16,0,"speak"],[12,23,16,0],[13,2,41,0,"exports"],[13,9,41,0],[13,10,41,0,"stop"],[13,14,41,0],[13,17,41,0,"stop"],[13,21,41,0],[14,2,61,0,"exports"],[14,9,61,0],[14,10,61,0,"isSpeaking"],[14,20,61,0],[14,23,61,0,"isSpeaking"],[14,33,61,0],[15,2,63,1],[15,6,63,1,"_reactNativeWebDistExportsPlatform"],[15,40,63,1],[15,43,63,1,"require"],[15,50,63,1],[15,51,63,1,"_dependencyMap"],[15,65,63,1],[16,2,63,1],[16,6,63,1,"Platform"],[16,14,63,1],[16,17,63,1,"_interopDefault"],[16,32,63,1],[16,33,63,1,"_reactNativeWebDistExportsPlatform"],[16,67,63,1],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[24,2,9,0],[24,6,9,4,"_isSpeaking"],[24,17,9,15],[24,20,9,18],[24,25,9,23],[25,2,10,0],[25,6,10,4,"_onComplete"],[25,17,10,36],[25,20,10,39],[25,24,10,43],[26,2,11,0],[26,6,11,4,"_onStart"],[26,14,11,33],[26,17,11,36],[26,21,11,40],[28,2,13,0],[29,0,14,0],[30,0,15,0],[31,2,16,7],[31,17,16,22,"speak"],[31,22,16,27,"speak"],[31,23,17,2,"text"],[31,27,17,14],[31,29,18,2,"options"],[31,36,23,3],[31,38,24,17],[32,4,25,2],[33,4,26,2],[33,10,26,8,"stop"],[33,14,26,12],[33,15,26,13],[33,16,26,14],[34,4,28,2,"_onComplete"],[34,15,28,13],[34,18,28,16,"options"],[34,25,28,23],[34,27,28,25,"onComplete"],[34,37,28,35],[34,41,28,39],[34,45,28,43],[35,4,29,2,"_onStart"],[35,12,29,10],[35,15,29,13,"options"],[35,22,29,20],[35,24,29,22,"onStart"],[35,31,29,29],[35,35,29,33],[35,39,29,37],[36,4,31,2],[36,8,31,6,"Platform"],[36,16,31,14],[36,17,31,14,"default"],[36,24,31,14],[36,25,31,15,"OS"],[36,27,31,17],[36,32,31,22],[36,37,31,27],[36,39,31,29],[37,6,32,4,"_speakWeb"],[37,15,32,13],[37,16,32,14,"text"],[37,20,32,18],[37,22,32,20,"options"],[37,29,32,27],[37,30,32,28],[38,4,33,2],[38,5,33,3],[38,11,33,9],[39,6,34,4,"_speakNative"],[39,18,34,16],[39,19,34,17,"text"],[39,23,34,21],[39,25,34,23,"options"],[39,32,34,30],[39,33,34,31],[40,4,35,2],[41,2,36,0],[43,2,38,0],[44,0,39,0],[45,0,40,0],[46,2,41,7],[46,17,41,22,"stop"],[46,21,41,26,"stop"],[46,22,41,26],[46,24,41,44],[47,4,42,2,"_isSpeaking"],[47,15,42,13],[47,18,42,16],[47,23,42,21],[48,4,44,2],[48,8,44,6,"Platform"],[48,16,44,14],[48,17,44,14,"default"],[48,24,44,14],[48,25,44,15,"OS"],[48,27,44,17],[48,32,44,22],[48,37,44,27],[48,39,44,29],[49,6,45,4],[49,10,45,8],[49,17,45,15,"window"],[49,23,45,21],[49,28,45,26],[49,39,45,37],[49,43,45,41,"window"],[49,49,45,47],[49,50,45,48,"speechSynthesis"],[49,65,45,63],[49,67,45,65],[50,8,46,6,"window"],[50,14,46,12],[50,15,46,13,"speechSynthesis"],[50,30,46,28],[50,31,46,29,"cancel"],[50,37,46,35],[50,38,46,36],[50,39,46,37],[51,6,47,4],[52,4,48,2],[52,5,48,3],[52,11,48,9],[53,6,49,4],[53,10,49,8],[54,8,50,6],[54,14,50,12,"Speech"],[54,20,50,18],[54,23,50,21,"require"],[54,30,50,28],[54,31,50,28,"_dependencyMap"],[54,45,50,28],[54,63,50,42],[54,64,50,43],[55,8,51,6],[55,14,51,12,"Speech"],[55,20,51,18],[55,21,51,19,"stop"],[55,25,51,23],[55,26,51,24],[55,27,51,25],[56,6,52,4],[56,7,52,5],[56,8,52,6],[56,15,52,13,"e"],[56,16,52,14],[56,18,52,16],[57,8,53,6],[58,6,53,6],[59,4,55,2],[60,2,56,0],[62,2,58,0],[63,0,59,0],[64,0,60,0],[65,2,61,7],[65,11,61,16,"isSpeaking"],[65,21,61,26,"isSpeaking"],[65,22,61,26],[65,24,61,38],[66,4,62,2],[66,11,62,9,"_isSpeaking"],[66,22,62,20],[67,2,63,0],[69,2,65,0],[70,2,66,0],[70,11,66,9,"_speakWeb"],[70,20,66,18,"_speakWeb"],[70,21,67,2,"text"],[70,25,67,14],[70,27,68,2,"options"],[70,34,68,92],[70,36,69,8],[71,4,70,2],[71,8,70,6],[71,15,70,13,"window"],[71,21,70,19],[71,26,70,24],[71,37,70,35],[71,41,70,39],[71,42,70,40,"window"],[71,48,70,46],[71,49,70,47,"speechSynthesis"],[71,64,70,62],[71,66,70,64],[72,6,71,4,"console"],[72,13,71,11],[72,14,71,12,"warn"],[72,18,71,16],[72,19,71,17],[72,55,71,53],[72,56,71,54],[73,6,72,4,"options"],[73,13,72,11],[73,15,72,13,"onComplete"],[73,25,72,23],[73,28,72,26],[73,29,72,27],[74,6,73,4],[75,4,74,2],[76,4,76,2],[76,10,76,8,"utterance"],[76,19,76,17],[76,22,76,20],[76,26,76,24,"SpeechSynthesisUtterance"],[76,50,76,48],[76,51,76,49,"text"],[76,55,76,53],[76,56,76,54],[77,4,77,2,"utterance"],[77,13,77,11],[77,14,77,12,"rate"],[77,18,77,16],[77,21,77,19,"options"],[77,28,77,26],[77,30,77,28,"rate"],[77,34,77,32],[77,38,77,36],[77,41,77,39],[78,4,78,2,"utterance"],[78,13,78,11],[78,14,78,12,"pitch"],[78,19,78,17],[78,22,78,20,"options"],[78,29,78,27],[78,31,78,29,"pitch"],[78,36,78,34],[78,40,78,38],[78,43,78,41],[79,4,79,2,"utterance"],[79,13,79,11],[79,14,79,12,"lang"],[79,18,79,16],[79,21,79,19],[79,28,79,26],[80,4,81,2,"utterance"],[80,13,81,11],[80,14,81,12,"onstart"],[80,21,81,19],[80,24,81,22],[80,30,81,28],[81,6,82,4,"_isSpeaking"],[81,17,82,15],[81,20,82,18],[81,24,82,22],[82,6,83,4,"options"],[82,13,83,11],[82,15,83,13,"onStart"],[82,22,83,20],[82,25,83,23],[82,26,83,24],[83,4,84,2],[83,5,84,3],[84,4,86,2,"utterance"],[84,13,86,11],[84,14,86,12,"onend"],[84,19,86,17],[84,22,86,20],[84,28,86,26],[85,6,87,4,"_isSpeaking"],[85,17,87,15],[85,20,87,18],[85,25,87,23],[86,6,88,4,"options"],[86,13,88,11],[86,15,88,13,"onComplete"],[86,25,88,23],[86,28,88,26],[86,29,88,27],[87,4,89,2],[87,5,89,3],[88,4,91,2,"utterance"],[88,13,91,11],[88,14,91,12,"onerror"],[88,21,91,19],[88,24,91,22],[88,30,91,28],[89,6,92,4,"_isSpeaking"],[89,17,92,15],[89,20,92,18],[89,25,92,23],[90,6,93,4,"options"],[90,13,93,11],[90,15,93,13,"onComplete"],[90,25,93,23],[90,28,93,26],[90,29,93,27],[91,4,94,2],[91,5,94,3],[92,4,96,2,"window"],[92,10,96,8],[92,11,96,9,"speechSynthesis"],[92,26,96,24],[92,27,96,25,"speak"],[92,32,96,30],[92,33,96,31,"utterance"],[92,42,96,40],[92,43,96,41],[93,2,97,0],[95,2,99,0],[96,2,100,0],[96,11,100,9,"_speakNative"],[96,23,100,21,"_speakNative"],[96,24,101,2,"text"],[96,28,101,14],[96,30,102,2,"options"],[96,37,102,92],[96,39,103,8],[97,4,104,2],[97,8,104,6],[98,6,105,4],[98,12,105,10,"Speech"],[98,18,105,16],[98,21,105,19,"require"],[98,28,105,26],[98,29,105,26,"_dependencyMap"],[98,43,105,26],[98,61,105,40],[98,62,105,41],[99,6,106,4,"_isSpeaking"],[99,17,106,15],[99,20,106,18],[99,24,106,22],[100,6,107,4,"options"],[100,13,107,11],[100,15,107,13,"onStart"],[100,22,107,20],[100,25,107,23],[100,26,107,24],[101,6,109,4,"Speech"],[101,12,109,10],[101,13,109,11,"speak"],[101,18,109,16],[101,19,109,17,"text"],[101,23,109,21],[101,25,109,23],[102,8,110,6,"rate"],[102,12,110,10],[102,14,110,12,"options"],[102,21,110,19],[102,23,110,21,"rate"],[102,27,110,25],[102,31,110,29],[102,34,110,32],[103,8,111,6,"pitch"],[103,13,111,11],[103,15,111,13,"options"],[103,22,111,20],[103,24,111,22,"pitch"],[103,29,111,27],[103,33,111,31],[103,36,111,34],[104,8,112,6,"language"],[104,16,112,14],[104,18,112,16],[104,25,112,23],[105,8,113,6,"onDone"],[105,14,113,12],[105,16,113,14,"onDone"],[105,17,113,14],[105,22,113,20],[106,10,114,8,"_isSpeaking"],[106,21,114,19],[106,24,114,22],[106,29,114,27],[107,10,115,8,"options"],[107,17,115,15],[107,19,115,17,"onComplete"],[107,29,115,27],[107,32,115,30],[107,33,115,31],[108,8,116,6],[108,9,116,7],[109,8,117,6,"onError"],[109,15,117,13],[109,17,117,15,"onError"],[109,18,117,15],[109,23,117,21],[110,10,118,8,"_isSpeaking"],[110,21,118,19],[110,24,118,22],[110,29,118,27],[111,10,119,8,"options"],[111,17,119,15],[111,19,119,17,"onComplete"],[111,29,119,27],[111,32,119,30],[111,33,119,31],[112,8,120,6],[113,6,121,4],[113,7,121,5],[113,8,121,6],[114,4,122,2],[114,5,122,3],[114,6,122,4],[114,13,122,11,"e"],[114,14,122,12],[114,16,122,14],[115,6,123,4,"console"],[115,13,123,11],[115,14,123,12,"error"],[115,19,123,17],[115,20,123,18],[115,49,123,47],[115,51,123,49,"e"],[115,52,123,50],[115,53,123,51],[116,6,124,4,"_isSpeaking"],[116,17,124,15],[116,20,124,18],[116,25,124,23],[117,6,125,4,"options"],[117,13,125,11],[117,15,125,13,"onComplete"],[117,25,125,23],[117,28,125,26],[117,29,125,27],[118,4,126,2],[119,2,127,0],[120,0,127,1],[120,3]],"functionMap":{"names":["<global>","speak","stop","isSpeaking","_speakWeb","utterance.onstart","utterance.onend","utterance.onerror","_speakNative","Speech.speak$argument_1.onDone","Speech.speak$argument_1.onError"],"mappings":"AAA;OCe;CDoB;OEK;CFe;OGK;CHE;AIG;sBCe;GDG;oBEE;GFG;sBGE;GHG;CJG;AQG;cCa;ODG;eEC;OFG;CRO"},"hasCjsExports":false},"type":"js/module"}]}