{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Animated","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dNPzxVfn0yBoRxvhD+vE+lN7k4Q=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":125},"end":{"line":3,"column":40,"index":165}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/ws/client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":44,"index":210}}],"key":"LC8z9nOmkAswUVWJLdIVEWr+j/M=","exportNames":["*"],"imports":1}},{"name":"../src/state/session-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":211},"end":{"line":5,"column":61,"index":272}}],"key":"uqPSHNpN+u3DmRH9fVQrfGU8SOY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/loading.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return LoadingScreen;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[2], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsAnimated = require(_dependencyMap[3], \"react-native-web/dist/exports/Animated\");\n  var Animated = _interopDefault(_reactNativeWebDistExportsAnimated);\n  var _expoRouter = require(_dependencyMap[4], \"expo-router\");\n  var _srcWsClient = require(_dependencyMap[5], \"../src/ws/client\");\n  var _srcStateSessionStore = require(_dependencyMap[6], \"../src/state/session-store\");\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  const STATUS_MESSAGES = ['Securing your workspace\\u2026', 'Preparing your assistant\\u2026', 'Almost ready\\u2026'];\n\n  /**\n   * Loading / Activation — masks all backend complexity.\n   * Validates SSO, connects WS, starts heartbeat.\n   * Human-only status text.\n   */\n  function LoadingScreen() {\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      setConnectionStatus,\n      setSessionId,\n      setPresenceOk\n    } = (0, _srcStateSessionStore.useSessionStore)();\n    const [statusIdx, setStatusIdx] = (0, _react.useState)(0);\n    const fadeAnim = (0, _react.useRef)(new Animated.default.Value(1)).current;\n    (0, _react.useEffect)(() => {\n      // Rotate status text\n      const interval = setInterval(() => {\n        Animated.default.timing(fadeAnim, {\n          toValue: 0,\n          duration: 200,\n          useNativeDriver: true\n        }).start(() => {\n          setStatusIdx(i => (i + 1) % STATUS_MESSAGES.length);\n          Animated.default.timing(fadeAnim, {\n            toValue: 1,\n            duration: 200,\n            useNativeDriver: true\n          }).start();\n        });\n      }, 2000);\n      activate();\n      return () => clearInterval(interval);\n    }, []);\n    async function activate() {\n      try {\n        setConnectionStatus('connecting');\n        await _srcWsClient.wsClient.connect();\n        setConnectionStatus('authenticated');\n        setSessionId(_srcWsClient.wsClient.currentSessionId);\n        setPresenceOk(true);\n        router.replace('/talk');\n      } catch (err) {\n        // Check if subscription issue\n        if (err?.message?.includes('SUSPENDED')) {\n          router.replace('/softblock');\n        } else {\n          // Token invalid or network issue → back to login\n          router.replace('/login');\n        }\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n        style: styles.spinnerBox,\n        children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n          style: styles.spinner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Animated.default.Text, {\n          style: [styles.status, {\n            opacity: fadeAnim\n          }],\n          children: STATUS_MESSAGES[statusIdx]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#0A0A0F',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    spinnerBox: {\n      alignItems: 'center',\n      gap: 24\n    },\n    spinner: {\n      width: 40,\n      height: 40,\n      borderRadius: 20,\n      borderWidth: 3,\n      borderColor: '#6C5CE733',\n      borderTopColor: '#6C5CE7'\n    },\n    status: {\n      fontSize: 16,\n      color: '#8B8B9E'\n    }\n  });\n});","lineCount":138,"map":[[13,2,18,15,"Object"],[13,8,18,15],[13,9,18,15,"defineProperty"],[13,23,18,15],[13,24,18,15,"exports"],[13,31,18,15],[14,4,18,15,"enumerable"],[14,14,18,15],[15,4,18,15,"get"],[15,7,18,15],[15,18,18,15,"get"],[15,19,18,15],[16,6,18,15],[16,13,18,15,"LoadingScreen"],[16,26,18,15],[17,4,18,15],[18,2,18,15],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,59],[20,6,1,59,"_reactNativeWebDistExportsView"],[20,36,1,59],[20,39,1,59,"require"],[20,46,1,59],[20,47,1,59,"_dependencyMap"],[20,61,1,59],[21,2,1,59],[21,6,1,59,"View"],[21,10,1,59],[21,13,1,59,"_interopDefault"],[21,28,1,59],[21,29,1,59,"_reactNativeWebDistExportsView"],[21,59,1,59],[22,2,1,59],[22,6,1,59,"_reactNativeWebDistExportsStyleSheet"],[22,42,1,59],[22,45,1,59,"require"],[22,52,1,59],[22,53,1,59,"_dependencyMap"],[22,67,1,59],[23,2,1,59],[23,6,1,59,"StyleSheet"],[23,16,1,59],[23,19,1,59,"_interopDefault"],[23,34,1,59],[23,35,1,59,"_reactNativeWebDistExportsStyleSheet"],[23,71,1,59],[24,2,1,59],[24,6,1,59,"_reactNativeWebDistExportsAnimated"],[24,40,1,59],[24,43,1,59,"require"],[24,50,1,59],[24,51,1,59,"_dependencyMap"],[24,65,1,59],[25,2,1,59],[25,6,1,59,"Animated"],[25,14,1,59],[25,17,1,59,"_interopDefault"],[25,32,1,59],[25,33,1,59,"_reactNativeWebDistExportsAnimated"],[25,67,1,59],[26,2,3,0],[26,6,3,0,"_expoRouter"],[26,17,3,0],[26,20,3,0,"require"],[26,27,3,0],[26,28,3,0,"_dependencyMap"],[26,42,3,0],[27,2,4,0],[27,6,4,0,"_srcWsClient"],[27,18,4,0],[27,21,4,0,"require"],[27,28,4,0],[27,29,4,0,"_dependencyMap"],[27,43,4,0],[28,2,5,0],[28,6,5,0,"_srcStateSessionStore"],[28,27,5,0],[28,30,5,0,"require"],[28,37,5,0],[28,38,5,0,"_dependencyMap"],[28,52,5,0],[29,2,5,61],[29,6,5,61,"_reactJsxDevRuntime"],[29,25,5,61],[29,28,5,61,"require"],[29,35,5,61],[29,36,5,61,"_dependencyMap"],[29,50,5,61],[30,2,7,0],[30,8,7,6,"STATUS_MESSAGES"],[30,23,7,21],[30,26,7,24],[30,27,8,2],[30,58,8,33],[30,60,9,2],[30,92,9,34],[30,94,10,2],[30,114,10,22],[30,115,11,1],[32,2,13,0],[33,0,14,0],[34,0,15,0],[35,0,16,0],[36,0,17,0],[37,2,18,15],[37,11,18,24,"LoadingScreen"],[37,24,18,37,"LoadingScreen"],[37,25,18,37],[37,27,18,40],[38,4,19,2],[38,10,19,8,"router"],[38,16,19,14],[38,19,19,17],[38,23,19,17,"useRouter"],[38,34,19,26],[38,35,19,26,"useRouter"],[38,44,19,26],[38,46,19,27],[38,47,19,28],[39,4,20,2],[39,10,20,8],[40,6,20,10,"setConnectionStatus"],[40,25,20,29],[41,6,20,31,"setSessionId"],[41,18,20,43],[42,6,20,45,"setPresenceOk"],[43,4,20,59],[43,5,20,60],[43,8,20,63],[43,12,20,63,"useSessionStore"],[43,33,20,78],[43,34,20,78,"useSessionStore"],[43,49,20,78],[43,51,20,79],[43,52,20,80],[44,4,21,2],[44,10,21,8],[44,11,21,9,"statusIdx"],[44,20,21,18],[44,22,21,20,"setStatusIdx"],[44,34,21,32],[44,35,21,33],[44,38,21,36],[44,42,21,36,"useState"],[44,48,21,44],[44,49,21,44,"useState"],[44,57,21,44],[44,59,21,45],[44,60,21,46],[44,61,21,47],[45,4,22,2],[45,10,22,8,"fadeAnim"],[45,18,22,16],[45,21,22,19],[45,25,22,19,"useRef"],[45,31,22,25],[45,32,22,25,"useRef"],[45,38,22,25],[45,40,22,26],[45,44,22,30,"Animated"],[45,52,22,38],[45,53,22,38,"default"],[45,60,22,38],[45,61,22,39,"Value"],[45,66,22,44],[45,67,22,45],[45,68,22,46],[45,69,22,47],[45,70,22,48],[45,71,22,49,"current"],[45,78,22,56],[46,4,24,2],[46,8,24,2,"useEffect"],[46,14,24,11],[46,15,24,11,"useEffect"],[46,24,24,11],[46,26,24,12],[46,32,24,18],[47,6,25,4],[48,6,26,4],[48,12,26,10,"interval"],[48,20,26,18],[48,23,26,21,"setInterval"],[48,34,26,32],[48,35,26,33],[48,41,26,39],[49,8,27,6,"Animated"],[49,16,27,14],[49,17,27,14,"default"],[49,24,27,14],[49,25,27,15,"timing"],[49,31,27,21],[49,32,27,22,"fadeAnim"],[49,40,27,30],[49,42,27,32],[50,10,27,34,"toValue"],[50,17,27,41],[50,19,27,43],[50,20,27,44],[51,10,27,46,"duration"],[51,18,27,54],[51,20,27,56],[51,23,27,59],[52,10,27,61,"useNativeDriver"],[52,25,27,76],[52,27,27,78],[53,8,27,83],[53,9,27,84],[53,10,27,85],[53,11,27,86,"start"],[53,16,27,91],[53,17,27,92],[53,23,27,98],[54,10,28,8,"setStatusIdx"],[54,22,28,20],[54,23,28,22,"i"],[54,24,28,23],[54,28,28,28],[54,29,28,29,"i"],[54,30,28,30],[54,33,28,33],[54,34,28,34],[54,38,28,38,"STATUS_MESSAGES"],[54,53,28,53],[54,54,28,54,"length"],[54,60,28,60],[54,61,28,61],[55,10,29,8,"Animated"],[55,18,29,16],[55,19,29,16,"default"],[55,26,29,16],[55,27,29,17,"timing"],[55,33,29,23],[55,34,29,24,"fadeAnim"],[55,42,29,32],[55,44,29,34],[56,12,29,36,"toValue"],[56,19,29,43],[56,21,29,45],[56,22,29,46],[57,12,29,48,"duration"],[57,20,29,56],[57,22,29,58],[57,25,29,61],[58,12,29,63,"useNativeDriver"],[58,27,29,78],[58,29,29,80],[59,10,29,85],[59,11,29,86],[59,12,29,87],[59,13,29,88,"start"],[59,18,29,93],[59,19,29,94],[59,20,29,95],[60,8,30,6],[60,9,30,7],[60,10,30,8],[61,6,31,4],[61,7,31,5],[61,9,31,7],[61,13,31,11],[61,14,31,12],[62,6,33,4,"activate"],[62,14,33,12],[62,15,33,13],[62,16,33,14],[63,6,34,4],[63,13,34,11],[63,19,34,17,"clearInterval"],[63,32,34,30],[63,33,34,31,"interval"],[63,41,34,39],[63,42,34,40],[64,4,35,2],[64,5,35,3],[64,7,35,5],[64,9,35,7],[64,10,35,8],[65,4,37,2],[65,19,37,17,"activate"],[65,27,37,25,"activate"],[65,28,37,25],[65,30,37,28],[66,6,38,4],[66,10,38,8],[67,8,39,6,"setConnectionStatus"],[67,27,39,25],[67,28,39,26],[67,40,39,38],[67,41,39,39],[68,8,40,6],[68,14,40,12,"wsClient"],[68,26,40,20],[68,27,40,20,"wsClient"],[68,35,40,20],[68,36,40,21,"connect"],[68,43,40,28],[68,44,40,29],[68,45,40,30],[69,8,41,6,"setConnectionStatus"],[69,27,41,25],[69,28,41,26],[69,43,41,41],[69,44,41,42],[70,8,42,6,"setSessionId"],[70,20,42,18],[70,21,42,19,"wsClient"],[70,33,42,27],[70,34,42,27,"wsClient"],[70,42,42,27],[70,43,42,28,"currentSessionId"],[70,59,42,44],[70,60,42,45],[71,8,43,6,"setPresenceOk"],[71,21,43,19],[71,22,43,20],[71,26,43,24],[71,27,43,25],[72,8,44,6,"router"],[72,14,44,12],[72,15,44,13,"replace"],[72,22,44,20],[72,23,44,21],[72,30,44,28],[72,31,44,29],[73,6,45,4],[73,7,45,5],[73,8,45,6],[73,15,45,13,"err"],[73,18,45,21],[73,20,45,23],[74,8,46,6],[75,8,47,6],[75,12,47,10,"err"],[75,15,47,13],[75,17,47,15,"message"],[75,24,47,22],[75,26,47,24,"includes"],[75,34,47,32],[75,35,47,33],[75,46,47,44],[75,47,47,45],[75,49,47,47],[76,10,48,8,"router"],[76,16,48,14],[76,17,48,15,"replace"],[76,24,48,22],[76,25,48,23],[76,37,48,35],[76,38,48,36],[77,8,49,6],[77,9,49,7],[77,15,49,13],[78,10,50,8],[79,10,51,8,"router"],[79,16,51,14],[79,17,51,15,"replace"],[79,24,51,22],[79,25,51,23],[79,33,51,31],[79,34,51,32],[80,8,52,6],[81,6,53,4],[82,4,54,2],[83,4,56,2],[83,24,57,4],[83,28,57,4,"_reactJsxDevRuntime"],[83,47,57,4],[83,48,57,4,"jsxDEV"],[83,54,57,4],[83,56,57,5,"View"],[83,60,57,9],[83,61,57,9,"default"],[83,68,57,9],[84,6,57,10,"style"],[84,11,57,15],[84,13,57,17,"styles"],[84,19,57,23],[84,20,57,24,"container"],[84,29,57,34],[85,6,57,34,"children"],[85,14,57,34],[85,29,58,6],[85,33,58,6,"_reactJsxDevRuntime"],[85,52,58,6],[85,53,58,6,"jsxDEV"],[85,59,58,6],[85,61,58,7,"View"],[85,65,58,11],[85,66,58,11,"default"],[85,73,58,11],[86,8,58,12,"style"],[86,13,58,17],[86,15,58,19,"styles"],[86,21,58,25],[86,22,58,26,"spinnerBox"],[86,32,58,37],[87,8,58,37,"children"],[87,16,58,37],[87,32,59,8],[87,36,59,8,"_reactJsxDevRuntime"],[87,55,59,8],[87,56,59,8,"jsxDEV"],[87,62,59,8],[87,64,59,9,"View"],[87,68,59,13],[87,69,59,13,"default"],[87,76,59,13],[88,10,59,14,"style"],[88,15,59,19],[88,17,59,21,"styles"],[88,23,59,27],[88,24,59,28,"spinner"],[89,8,59,36],[90,10,59,36,"fileName"],[90,18,59,36],[90,20,59,36,"_jsxFileName"],[90,32,59,36],[91,10,59,36,"lineNumber"],[91,20,59,36],[92,10,59,36,"columnNumber"],[92,22,59,36],[93,8,59,36],[93,15,59,38],[93,16,59,39],[93,31,60,8],[93,35,60,8,"_reactJsxDevRuntime"],[93,54,60,8],[93,55,60,8,"jsxDEV"],[93,61,60,8],[93,63,60,9,"Animated"],[93,71,60,17],[93,72,60,17,"default"],[93,79,60,17],[93,80,60,18,"Text"],[93,84,60,22],[94,10,60,23,"style"],[94,15,60,28],[94,17,60,30],[94,18,60,31,"styles"],[94,24,60,37],[94,25,60,38,"status"],[94,31,60,44],[94,33,60,46],[95,12,60,48,"opacity"],[95,19,60,55],[95,21,60,57,"fadeAnim"],[96,10,60,66],[96,11,60,67],[96,12,60,69],[97,10,60,69,"children"],[97,18,60,69],[97,20,61,11,"STATUS_MESSAGES"],[97,35,61,26],[97,36,61,27,"statusIdx"],[97,45,61,36],[98,8,61,37],[99,10,61,37,"fileName"],[99,18,61,37],[99,20,61,37,"_jsxFileName"],[99,32,61,37],[100,10,61,37,"lineNumber"],[100,20,61,37],[101,10,61,37,"columnNumber"],[101,22,61,37],[102,8,61,37],[102,15,62,23],[102,16,62,24],[103,6,62,24],[104,8,62,24,"fileName"],[104,16,62,24],[104,18,62,24,"_jsxFileName"],[104,30,62,24],[105,8,62,24,"lineNumber"],[105,18,62,24],[106,8,62,24,"columnNumber"],[106,20,62,24],[107,6,62,24],[107,13,63,12],[108,4,63,13],[109,6,63,13,"fileName"],[109,14,63,13],[109,16,63,13,"_jsxFileName"],[109,28,63,13],[110,6,63,13,"lineNumber"],[110,16,63,13],[111,6,63,13,"columnNumber"],[111,18,63,13],[112,4,63,13],[112,11,64,10],[112,12,64,11],[113,2,66,0],[114,2,68,0],[114,8,68,6,"styles"],[114,14,68,12],[114,17,68,15,"StyleSheet"],[114,27,68,25],[114,28,68,25,"default"],[114,35,68,25],[114,36,68,26,"create"],[114,42,68,32],[114,43,68,33],[115,4,69,2,"container"],[115,13,69,11],[115,15,69,13],[116,6,70,4,"flex"],[116,10,70,8],[116,12,70,10],[116,13,70,11],[117,6,71,4,"backgroundColor"],[117,21,71,19],[117,23,71,21],[117,32,71,30],[118,6,72,4,"alignItems"],[118,16,72,14],[118,18,72,16],[118,26,72,24],[119,6,73,4,"justifyContent"],[119,20,73,18],[119,22,73,20],[120,4,74,2],[120,5,74,3],[121,4,75,2,"spinnerBox"],[121,14,75,12],[121,16,75,14],[122,6,76,4,"alignItems"],[122,16,76,14],[122,18,76,16],[122,26,76,24],[123,6,77,4,"gap"],[123,9,77,7],[123,11,77,9],[124,4,78,2],[124,5,78,3],[125,4,79,2,"spinner"],[125,11,79,9],[125,13,79,11],[126,6,80,4,"width"],[126,11,80,9],[126,13,80,11],[126,15,80,13],[127,6,81,4,"height"],[127,12,81,10],[127,14,81,12],[127,16,81,14],[128,6,82,4,"borderRadius"],[128,18,82,16],[128,20,82,18],[128,22,82,20],[129,6,83,4,"borderWidth"],[129,17,83,15],[129,19,83,17],[129,20,83,18],[130,6,84,4,"borderColor"],[130,17,84,15],[130,19,84,17],[130,30,84,28],[131,6,85,4,"borderTopColor"],[131,20,85,18],[131,22,85,20],[132,4,86,2],[132,5,86,3],[133,4,87,2,"status"],[133,10,87,8],[133,12,87,10],[134,6,88,4,"fontSize"],[134,14,88,12],[134,16,88,14],[134,18,88,16],[135,6,89,4,"color"],[135,11,89,9],[135,13,89,11],[136,4,90,2],[137,2,91,0],[137,3,91,1],[137,4,91,2],[138,0,91,3],[138,3]],"functionMap":{"names":["<global>","LoadingScreen","useEffect$argument_0","setInterval$argument_0","Animated.timing.start$argument_0","setStatusIdx$argument_0","<anonymous>","activate"],"mappings":"AAA;eCiB;YCM;iCCE;4FCC;qBCC,uCD;ODE;KDC;WIG,6BJ;GDC;EME;GNiB;CDY"},"hasCjsExports":false},"type":"js/module"}]}