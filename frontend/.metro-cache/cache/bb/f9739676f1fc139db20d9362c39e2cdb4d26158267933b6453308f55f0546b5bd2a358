{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../config/env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":264},"end":{"line":11,"column":36,"index":300}}],"key":"RGB4LNLgNgEtjcVNHbEAgFn5Y3M=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":61,"index":362}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"MyndLensWSClient\", {\n    enumerable: true,\n    get: function () {\n      return MyndLensWSClient;\n    }\n  });\n  Object.defineProperty(exports, \"wsClient\", {\n    enumerable: true,\n    get: function () {\n      return wsClient;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _configEnv = require(_dependencyMap[3], \"../config/env\");\n  var _auth = require(_dependencyMap[4], \"./auth\");\n  /**\n   * WebSocket client — connects to MyndLens BE with auth.\n   *\n   * Protocol:\n   * 1. Connect to WS endpoint\n   * 2. Send AUTH message with token + device_id\n   * 3. Receive AUTH_OK with session_id\n   * 4. Start heartbeat loop\n   * 5. Route incoming messages to handlers\n   */\n  var MyndLensWSClient = /*#__PURE__*/function () {\n    function MyndLensWSClient() {\n      (0, _classCallCheck.default)(this, MyndLensWSClient);\n      this.ws = null;\n      this.sessionId = null;\n      this.handlers = new Map();\n      this.heartbeatTimer = null;\n      this.heartbeatSeq = 0;\n      this.reconnectAttempts = 0;\n      this.maxReconnectAttempts = 5;\n      this.reconnectDelay = 2000;\n      this._isConnected = false;\n      this._isAuthenticated = false;\n      this._userId = null;\n    }\n    return (0, _createClass.default)(MyndLensWSClient, [{\n      key: \"isConnected\",\n      get: function () {\n        return this._isConnected;\n      }\n    }, {\n      key: \"isAuthenticated\",\n      get: function () {\n        return this._isAuthenticated;\n      }\n    }, {\n      key: \"currentSessionId\",\n      get: function () {\n        return this.sessionId;\n      }\n    }, {\n      key: \"userId\",\n      get: function () {\n        return this._userId;\n      }\n\n      /**\n       * Register a handler for a specific message type.\n       */\n    }, {\n      key: \"on\",\n      value: function on(type, handler) {\n        var existing = this.handlers.get(type) || [];\n        existing.push(handler);\n        this.handlers.set(type, existing);\n        // Return unsubscribe function\n        return () => {\n          var handlers = this.handlers.get(type) || [];\n          var idx = handlers.indexOf(handler);\n          if (idx >= 0) handlers.splice(idx, 1);\n        };\n      }\n\n      /**\n       * Connect to the WebSocket server.\n       */\n    }, {\n      key: \"connect\",\n      value: (function () {\n        var _connect = (0, _asyncToGenerator.default)(function* () {\n          var _this = this;\n          if (this.ws) {\n            this.disconnect();\n          }\n          return new Promise(/*#__PURE__*/function () {\n            var _ref = (0, _asyncToGenerator.default)(function* (resolve, reject) {\n              try {\n                var token = yield (0, _auth.getStoredToken)();\n                if (!token) {\n                  reject(new Error('No auth token available. Pair device first.'));\n                  return;\n                }\n                var deviceId = yield (0, _auth.getOrCreateDeviceId)();\n                var wsUrl = _configEnv.ENV.WS_URL;\n                console.log('[WS] Connecting to', wsUrl);\n                _this.ws = new WebSocket(wsUrl);\n                _this.ws.onopen = () => {\n                  console.log('[WS] Connected, sending AUTH');\n                  _this._isConnected = true;\n                  _this.reconnectAttempts = 0;\n\n                  // Send AUTH message\n                  _this.send('auth', {\n                    token,\n                    device_id: deviceId,\n                    client_version: '1.0.0'\n                  });\n                };\n                _this.ws.onmessage = event => {\n                  try {\n                    var _envelope = JSON.parse(event.data);\n                    _this._routeMessage(_envelope, resolve, reject);\n                  } catch (err) {\n                    console.error('[WS] Failed to parse message:', err);\n                  }\n                };\n                _this.ws.onclose = event => {\n                  console.log('[WS] Closed:', event.code, event.reason);\n                  _this._cleanup();\n                  _this._dispatch('session_terminated', {\n                    type: 'session_terminated',\n                    id: '',\n                    timestamp: new Date().toISOString(),\n                    payload: {\n                      code: event.code,\n                      reason: event.reason\n                    }\n                  });\n\n                  // Auto-reconnect if not intentional close\n                  if (event.code !== 1000 && _this.reconnectAttempts < _this.maxReconnectAttempts) {\n                    _this.reconnectAttempts++;\n                    var delay = _this.reconnectDelay * _this.reconnectAttempts;\n                    console.log(`[WS] Reconnecting in ${delay}ms (attempt ${_this.reconnectAttempts})`);\n                    setTimeout(() => _this.connect().catch(console.error), delay);\n                  }\n                };\n                _this.ws.onerror = error => {\n                  console.error('[WS] Error:', error);\n                  reject(error);\n                };\n              } catch (err) {\n                reject(err);\n              }\n            });\n            return function (_x, _x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        });\n        function connect() {\n          return _connect.apply(this, arguments);\n        }\n        return connect;\n      }()\n      /**\n       * Send a typed message to the server.\n       */\n      )\n    }, {\n      key: \"send\",\n      value: function send(type) {\n        var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\n          console.warn('[WS] Cannot send, not connected');\n          return;\n        }\n        var envelope = {\n          type,\n          id: Math.random().toString(36).substring(2),\n          timestamp: new Date().toISOString(),\n          payload\n        };\n        this.ws.send(JSON.stringify(envelope));\n      }\n\n      /**\n       * Send an execute request (with presence gate on server).\n       */\n    }, {\n      key: \"sendExecuteRequest\",\n      value: function sendExecuteRequest(draftId, touchToken) {\n        this.send('execute_request', {\n          session_id: this.sessionId,\n          draft_id: draftId,\n          touch_token: touchToken || null\n        });\n      }\n\n      /**\n       * Disconnect and cleanup.\n       */\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.maxReconnectAttempts = 0; // Prevent auto-reconnect\n        if (this.ws) {\n          this.ws.close(1000, 'Client disconnect');\n        }\n        this._cleanup();\n      }\n\n      // ---- Private ----\n    }, {\n      key: \"_routeMessage\",\n      value: function _routeMessage(envelope, resolve, reject) {\n        var type = envelope.type;\n        switch (type) {\n          case 'auth_ok':\n            this.sessionId = envelope.payload.session_id;\n            this._userId = envelope.payload.user_id;\n            this._isAuthenticated = true;\n            this._startHeartbeat(envelope.payload.heartbeat_interval_ms || _configEnv.ENV.HEARTBEAT_INTERVAL_MS);\n            console.log('[WS] Authenticated, session:', this.sessionId);\n            resolve?.();\n            break;\n          case 'auth_fail':\n            console.error('[WS] Auth failed:', envelope.payload.reason);\n            this._isAuthenticated = false;\n            reject?.(new Error(envelope.payload.reason));\n            break;\n          case 'heartbeat_ack':\n            // Heartbeat acknowledged — no action needed\n            break;\n          default:\n            break;\n        }\n\n        // Dispatch to registered handlers\n        this._dispatch(type, envelope);\n      }\n    }, {\n      key: \"_dispatch\",\n      value: function _dispatch(type, envelope) {\n        var handlers = this.handlers.get(type) || [];\n        for (var handler of handlers) {\n          try {\n            handler(envelope);\n          } catch (err) {\n            console.error(`[WS] Handler error for ${type}:`, err);\n          }\n        }\n      }\n    }, {\n      key: \"_startHeartbeat\",\n      value: function _startHeartbeat(intervalMs) {\n        this._stopHeartbeat();\n        this.heartbeatSeq = 0;\n        this.heartbeatTimer = setInterval(() => {\n          if (this.ws && this.ws.readyState === WebSocket.OPEN && this.sessionId) {\n            this.heartbeatSeq++;\n            this.send('heartbeat', {\n              session_id: this.sessionId,\n              seq: this.heartbeatSeq,\n              client_ts: new Date().toISOString()\n            });\n          }\n        }, intervalMs);\n        console.log(`[WS] Heartbeat started: ${intervalMs}ms interval`);\n      }\n    }, {\n      key: \"_stopHeartbeat\",\n      value: function _stopHeartbeat() {\n        if (this.heartbeatTimer) {\n          clearInterval(this.heartbeatTimer);\n          this.heartbeatTimer = null;\n        }\n      }\n    }, {\n      key: \"_cleanup\",\n      value: function _cleanup() {\n        this._stopHeartbeat();\n        this._isConnected = false;\n        this._isAuthenticated = false;\n        this.sessionId = null;\n        this.ws = null;\n      }\n    }]);\n  }(); // Singleton instance\n  var wsClient = new MyndLensWSClient();\n});","lineCount":302,"map":[[12,2,31,0,"Object"],[12,8,31,0],[12,9,31,0,"defineProperty"],[12,23,31,0],[12,24,31,0,"exports"],[12,31,31,0],[13,4,31,0,"enumerable"],[13,14,31,0],[14,4,31,0,"get"],[14,7,31,0],[14,18,31,0,"get"],[14,19,31,0],[15,6,31,0],[15,13,31,0,"MyndLensWSClient"],[15,29,31,0],[16,4,31,0],[17,2,31,0],[18,2,258,0,"Object"],[18,8,258,0],[18,9,258,0,"defineProperty"],[18,23,258,0],[18,24,258,0,"exports"],[18,31,258,0],[19,4,258,0,"enumerable"],[19,14,258,0],[20,4,258,0,"get"],[20,7,258,0],[20,18,258,0,"get"],[20,19,258,0],[21,6,258,0],[21,13,258,0,"wsClient"],[21,21,258,0],[22,4,258,0],[23,2,258,0],[24,2,258,47],[24,6,258,47,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,258,47],[24,45,258,47,"require"],[24,52,258,47],[24,53,258,47,"_dependencyMap"],[24,67,258,47],[25,2,258,47],[25,6,258,47,"_asyncToGenerator"],[25,23,258,47],[25,26,258,47,"_interopDefault"],[25,41,258,47],[25,42,258,47,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,258,47],[26,2,258,47],[26,6,258,47,"_babelRuntimeHelpersClassCallCheck"],[26,40,258,47],[26,43,258,47,"require"],[26,50,258,47],[26,51,258,47,"_dependencyMap"],[26,65,258,47],[27,2,258,47],[27,6,258,47,"_classCallCheck"],[27,21,258,47],[27,24,258,47,"_interopDefault"],[27,39,258,47],[27,40,258,47,"_babelRuntimeHelpersClassCallCheck"],[27,74,258,47],[28,2,258,47],[28,6,258,47,"_babelRuntimeHelpersCreateClass"],[28,37,258,47],[28,40,258,47,"require"],[28,47,258,47],[28,48,258,47,"_dependencyMap"],[28,62,258,47],[29,2,258,47],[29,6,258,47,"_createClass"],[29,18,258,47],[29,21,258,47,"_interopDefault"],[29,36,258,47],[29,37,258,47,"_babelRuntimeHelpersCreateClass"],[29,68,258,47],[30,2,11,0],[30,6,11,0,"_configEnv"],[30,16,11,0],[30,19,11,0,"require"],[30,26,11,0],[30,27,11,0,"_dependencyMap"],[30,41,11,0],[31,2,12,0],[31,6,12,0,"_auth"],[31,11,12,0],[31,14,12,0,"require"],[31,21,12,0],[31,22,12,0,"_dependencyMap"],[31,36,12,0],[32,2,1,0],[33,0,2,0],[34,0,3,0],[35,0,4,0],[36,0,5,0],[37,0,6,0],[38,0,7,0],[39,0,8,0],[40,0,9,0],[41,0,10,0],[42,2,1,0],[42,6,31,13,"MyndLensWSClient"],[42,22,31,29],[43,4,31,29],[43,13,31,29,"MyndLensWSClient"],[43,30,31,29],[44,6,31,29],[44,10,31,29,"_classCallCheck"],[44,25,31,29],[44,26,31,29,"default"],[44,33,31,29],[44,41,31,29,"MyndLensWSClient"],[44,57,31,29],[45,6,31,29],[45,11,32,10,"ws"],[45,13,32,12],[45,16,32,33],[45,20,32,37],[46,6,32,37],[46,11,33,10,"sessionId"],[46,20,33,19],[46,23,33,37],[46,27,33,41],[47,6,33,41],[47,11,34,10,"handlers"],[47,19,34,18],[47,22,34,61],[47,26,34,65,"Map"],[47,29,34,68],[47,30,34,69],[47,31,34,70],[48,6,34,70],[48,11,35,10,"heartbeatTimer"],[48,25,35,24],[48,28,35,66],[48,32,35,70],[49,6,35,70],[49,11,36,10,"heartbeatSeq"],[49,23,36,22],[49,26,36,33],[49,27,36,34],[50,6,36,34],[50,11,37,10,"reconnectAttempts"],[50,28,37,27],[50,31,37,38],[50,32,37,39],[51,6,37,39],[51,11,38,10,"maxReconnectAttempts"],[51,31,38,30],[51,34,38,41],[51,35,38,42],[52,6,38,42],[52,11,39,10,"reconnectDelay"],[52,25,39,24],[52,28,39,35],[52,32,39,39],[53,6,39,39],[53,11,40,10,"_isConnected"],[53,23,40,22],[53,26,40,34],[53,31,40,39],[54,6,40,39],[54,11,41,10,"_isAuthenticated"],[54,27,41,26],[54,30,41,38],[54,35,41,43],[55,6,41,43],[55,11,42,10,"_userId"],[55,18,42,17],[55,21,42,35],[55,25,42,39],[56,4,42,39],[57,4,42,39],[57,15,42,39,"_createClass"],[57,27,42,39],[57,28,42,39,"default"],[57,35,42,39],[57,37,42,39,"MyndLensWSClient"],[57,53,42,39],[58,6,42,39,"key"],[58,9,42,39],[59,6,42,39,"get"],[59,9,42,39],[59,11,44,2],[59,20,44,2,"get"],[59,21,44,2],[59,23,44,29],[60,8,44,31],[60,15,44,38],[60,19,44,42],[60,20,44,43,"_isConnected"],[60,32,44,55],[61,6,44,57],[62,4,44,58],[63,6,44,58,"key"],[63,9,44,58],[64,6,44,58,"get"],[64,9,44,58],[64,11,45,2],[64,20,45,2,"get"],[64,21,45,2],[64,23,45,33],[65,8,45,35],[65,15,45,42],[65,19,45,46],[65,20,45,47,"_isAuthenticated"],[65,36,45,63],[66,6,45,65],[67,4,45,66],[68,6,45,66,"key"],[68,9,45,66],[69,6,45,66,"get"],[69,9,45,66],[69,11,46,2],[69,20,46,2,"get"],[69,21,46,2],[69,23,46,40],[70,8,46,42],[70,15,46,49],[70,19,46,53],[70,20,46,54,"sessionId"],[70,29,46,63],[71,6,46,65],[72,4,46,66],[73,6,46,66,"key"],[73,9,46,66],[74,6,46,66,"get"],[74,9,46,66],[74,11,47,2],[74,20,47,2,"get"],[74,21,47,2],[74,23,47,30],[75,8,47,32],[75,15,47,39],[75,19,47,43],[75,20,47,44,"_userId"],[75,27,47,51],[76,6,47,53],[78,6,49,2],[79,0,50,0],[80,0,51,0],[81,4,49,2],[82,6,49,2,"key"],[82,9,49,2],[83,6,49,2,"value"],[83,11,49,2],[83,13,52,2],[83,22,52,2,"on"],[83,24,52,4,"on"],[83,25,52,5,"type"],[83,29,52,24],[83,31,52,26,"handler"],[83,38,52,51],[83,40,52,65],[84,8,53,4],[84,12,53,10,"existing"],[84,20,53,18],[84,23,53,21],[84,27,53,25],[84,28,53,26,"handlers"],[84,36,53,34],[84,37,53,35,"get"],[84,40,53,38],[84,41,53,39,"type"],[84,45,53,43],[84,46,53,44],[84,50,53,48],[84,52,53,50],[85,8,54,4,"existing"],[85,16,54,12],[85,17,54,13,"push"],[85,21,54,17],[85,22,54,18,"handler"],[85,29,54,25],[85,30,54,26],[86,8,55,4],[86,12,55,8],[86,13,55,9,"handlers"],[86,21,55,17],[86,22,55,18,"set"],[86,25,55,21],[86,26,55,22,"type"],[86,30,55,26],[86,32,55,28,"existing"],[86,40,55,36],[86,41,55,37],[87,8,56,4],[88,8,57,4],[88,15,57,11],[88,21,57,17],[89,10,58,6],[89,14,58,12,"handlers"],[89,22,58,20],[89,25,58,23],[89,29,58,27],[89,30,58,28,"handlers"],[89,38,58,36],[89,39,58,37,"get"],[89,42,58,40],[89,43,58,41,"type"],[89,47,58,45],[89,48,58,46],[89,52,58,50],[89,54,58,52],[90,10,59,6],[90,14,59,12,"idx"],[90,17,59,15],[90,20,59,18,"handlers"],[90,28,59,26],[90,29,59,27,"indexOf"],[90,36,59,34],[90,37,59,35,"handler"],[90,44,59,42],[90,45,59,43],[91,10,60,6],[91,14,60,10,"idx"],[91,17,60,13],[91,21,60,17],[91,22,60,18],[91,24,60,20,"handlers"],[91,32,60,28],[91,33,60,29,"splice"],[91,39,60,35],[91,40,60,36,"idx"],[91,43,60,39],[91,45,60,41],[91,46,60,42],[91,47,60,43],[92,8,61,4],[92,9,61,5],[93,6,62,2],[95,6,64,2],[96,0,65,0],[97,0,66,0],[98,4,64,2],[99,6,64,2,"key"],[99,9,64,2],[100,6,64,2,"value"],[100,11,64,2],[101,8,64,2],[101,12,64,2,"_connect"],[101,20,64,2],[101,27,64,2,"_asyncToGenerator"],[101,44,64,2],[101,45,64,2,"default"],[101,52,64,2],[101,54,67,2],[101,67,67,33],[102,10,67,33],[102,14,67,33,"_this"],[102,19,67,33],[103,10,68,4],[103,14,68,8],[103,18,68,12],[103,19,68,13,"ws"],[103,21,68,15],[103,23,68,17],[104,12,69,6],[104,16,69,10],[104,17,69,11,"disconnect"],[104,27,69,21],[104,28,69,22],[104,29,69,23],[105,10,70,4],[106,10,72,4],[106,17,72,11],[106,21,72,15,"Promise"],[106,28,72,22],[107,12,72,22],[107,16,72,22,"_ref"],[107,20,72,22],[107,27,72,22,"_asyncToGenerator"],[107,44,72,22],[107,45,72,22,"default"],[107,52,72,22],[107,54,72,23],[107,65,72,30,"resolve"],[107,72,72,37],[107,74,72,39,"reject"],[107,80,72,45],[107,82,72,50],[108,14,73,6],[108,18,73,10],[109,16,74,8],[109,20,74,14,"token"],[109,25,74,19],[109,34,74,28],[109,38,74,28,"getStoredToken"],[109,43,74,42],[109,44,74,42,"getStoredToken"],[109,58,74,42],[109,60,74,43],[109,61,74,44],[110,16,75,8],[110,20,75,12],[110,21,75,13,"token"],[110,26,75,18],[110,28,75,20],[111,18,76,10,"reject"],[111,24,76,16],[111,25,76,17],[111,29,76,21,"Error"],[111,34,76,26],[111,35,76,27],[111,80,76,72],[111,81,76,73],[111,82,76,74],[112,18,77,10],[113,16,78,8],[114,16,80,8],[114,20,80,14,"deviceId"],[114,28,80,22],[114,37,80,31],[114,41,80,31,"getOrCreateDeviceId"],[114,46,80,50],[114,47,80,50,"getOrCreateDeviceId"],[114,66,80,50],[114,68,80,51],[114,69,80,52],[115,16,81,8],[115,20,81,14,"wsUrl"],[115,25,81,19],[115,28,81,22,"ENV"],[115,38,81,25],[115,39,81,25,"ENV"],[115,42,81,25],[115,43,81,26,"WS_URL"],[115,49,81,32],[116,16,83,8,"console"],[116,23,83,15],[116,24,83,16,"log"],[116,27,83,19],[116,28,83,20],[116,48,83,40],[116,50,83,42,"wsUrl"],[116,55,83,47],[116,56,83,48],[117,16,84,8,"_this"],[117,21,84,12],[117,22,84,13,"ws"],[117,24,84,15],[117,27,84,18],[117,31,84,22,"WebSocket"],[117,40,84,31],[117,41,84,32,"wsUrl"],[117,46,84,37],[117,47,84,38],[118,16,86,8,"_this"],[118,21,86,12],[118,22,86,13,"ws"],[118,24,86,15],[118,25,86,16,"onopen"],[118,31,86,22],[118,34,86,25],[118,40,86,31],[119,18,87,10,"console"],[119,25,87,17],[119,26,87,18,"log"],[119,29,87,21],[119,30,87,22],[119,60,87,52],[119,61,87,53],[120,18,88,10,"_this"],[120,23,88,14],[120,24,88,15,"_isConnected"],[120,36,88,27],[120,39,88,30],[120,43,88,34],[121,18,89,10,"_this"],[121,23,89,14],[121,24,89,15,"reconnectAttempts"],[121,41,89,32],[121,44,89,35],[121,45,89,36],[123,18,91,10],[124,18,92,10,"_this"],[124,23,92,14],[124,24,92,15,"send"],[124,28,92,19],[124,29,92,20],[124,35,92,26],[124,37,92,28],[125,20,93,12,"token"],[125,25,93,17],[126,20,94,12,"device_id"],[126,29,94,21],[126,31,94,23,"deviceId"],[126,39,94,31],[127,20,95,12,"client_version"],[127,34,95,26],[127,36,95,28],[128,18,96,10],[128,19,96,11],[128,20,96,12],[129,16,97,8],[129,17,97,9],[130,16,99,8,"_this"],[130,21,99,12],[130,22,99,13,"ws"],[130,24,99,15],[130,25,99,16,"onmessage"],[130,34,99,25],[130,37,99,29,"event"],[130,42,99,34],[130,46,99,39],[131,18,100,10],[131,22,100,14],[132,20,101,12],[132,24,101,18,"envelope"],[132,33,101,38],[132,36,101,41,"JSON"],[132,40,101,45],[132,41,101,46,"parse"],[132,46,101,51],[132,47,101,52,"event"],[132,52,101,57],[132,53,101,58,"data"],[132,57,101,62],[132,58,101,63],[133,20,102,12,"_this"],[133,25,102,16],[133,26,102,17,"_routeMessage"],[133,39,102,30],[133,40,102,31,"envelope"],[133,49,102,39],[133,51,102,41,"resolve"],[133,58,102,48],[133,60,102,50,"reject"],[133,66,102,56],[133,67,102,57],[134,18,103,10],[134,19,103,11],[134,20,103,12],[134,27,103,19,"err"],[134,30,103,22],[134,32,103,24],[135,20,104,12,"console"],[135,27,104,19],[135,28,104,20,"error"],[135,33,104,25],[135,34,104,26],[135,65,104,57],[135,67,104,59,"err"],[135,70,104,62],[135,71,104,63],[136,18,105,10],[137,16,106,8],[137,17,106,9],[138,16,108,8,"_this"],[138,21,108,12],[138,22,108,13,"ws"],[138,24,108,15],[138,25,108,16,"onclose"],[138,32,108,23],[138,35,108,27,"event"],[138,40,108,32],[138,44,108,37],[139,18,109,10,"console"],[139,25,109,17],[139,26,109,18,"log"],[139,29,109,21],[139,30,109,22],[139,44,109,36],[139,46,109,38,"event"],[139,51,109,43],[139,52,109,44,"code"],[139,56,109,48],[139,58,109,50,"event"],[139,63,109,55],[139,64,109,56,"reason"],[139,70,109,62],[139,71,109,63],[140,18,110,10,"_this"],[140,23,110,14],[140,24,110,15,"_cleanup"],[140,32,110,23],[140,33,110,24],[140,34,110,25],[141,18,111,10,"_this"],[141,23,111,14],[141,24,111,15,"_dispatch"],[141,33,111,24],[141,34,111,25],[141,54,111,45],[141,56,111,47],[142,20,112,12,"type"],[142,24,112,16],[142,26,112,18],[142,46,112,38],[143,20,113,12,"id"],[143,22,113,14],[143,24,113,16],[143,26,113,18],[144,20,114,12,"timestamp"],[144,29,114,21],[144,31,114,23],[144,35,114,27,"Date"],[144,39,114,31],[144,40,114,32],[144,41,114,33],[144,42,114,34,"toISOString"],[144,53,114,45],[144,54,114,46],[144,55,114,47],[145,20,115,12,"payload"],[145,27,115,19],[145,29,115,21],[146,22,115,23,"code"],[146,26,115,27],[146,28,115,29,"event"],[146,33,115,34],[146,34,115,35,"code"],[146,38,115,39],[147,22,115,41,"reason"],[147,28,115,47],[147,30,115,49,"event"],[147,35,115,54],[147,36,115,55,"reason"],[148,20,115,62],[149,18,116,10],[149,19,116,11],[149,20,116,12],[151,18,118,10],[152,18,119,10],[152,22,119,14,"event"],[152,27,119,19],[152,28,119,20,"code"],[152,32,119,24],[152,37,119,29],[152,41,119,33],[152,45,119,37,"_this"],[152,50,119,41],[152,51,119,42,"reconnectAttempts"],[152,68,119,59],[152,71,119,62,"_this"],[152,76,119,66],[152,77,119,67,"maxReconnectAttempts"],[152,97,119,87],[152,99,119,89],[153,20,120,12,"_this"],[153,25,120,16],[153,26,120,17,"reconnectAttempts"],[153,43,120,34],[153,45,120,36],[154,20,121,12],[154,24,121,18,"delay"],[154,29,121,23],[154,32,121,26,"_this"],[154,37,121,30],[154,38,121,31,"reconnectDelay"],[154,52,121,45],[154,55,121,48,"_this"],[154,60,121,52],[154,61,121,53,"reconnectAttempts"],[154,78,121,70],[155,20,122,12,"console"],[155,27,122,19],[155,28,122,20,"log"],[155,31,122,23],[155,32,122,24],[155,56,122,48,"delay"],[155,61,122,53],[155,76,122,68,"_this"],[155,81,122,72],[155,82,122,73,"reconnectAttempts"],[155,99,122,90],[155,102,122,93],[155,103,122,94],[156,20,123,12,"setTimeout"],[156,30,123,22],[156,31,123,23],[156,37,123,29,"_this"],[156,42,123,33],[156,43,123,34,"connect"],[156,50,123,41],[156,51,123,42],[156,52,123,43],[156,53,123,44,"catch"],[156,58,123,49],[156,59,123,50,"console"],[156,66,123,57],[156,67,123,58,"error"],[156,72,123,63],[156,73,123,64],[156,75,123,66,"delay"],[156,80,123,71],[156,81,123,72],[157,18,124,10],[158,16,125,8],[158,17,125,9],[159,16,127,8,"_this"],[159,21,127,12],[159,22,127,13,"ws"],[159,24,127,15],[159,25,127,16,"onerror"],[159,32,127,23],[159,35,127,27,"error"],[159,40,127,32],[159,44,127,37],[160,18,128,10,"console"],[160,25,128,17],[160,26,128,18,"error"],[160,31,128,23],[160,32,128,24],[160,45,128,37],[160,47,128,39,"error"],[160,52,128,44],[160,53,128,45],[161,18,129,10,"reject"],[161,24,129,16],[161,25,129,17,"error"],[161,30,129,22],[161,31,129,23],[162,16,130,8],[162,17,130,9],[163,14,132,6],[163,15,132,7],[163,16,132,8],[163,23,132,15,"err"],[163,26,132,18],[163,28,132,20],[164,16,133,8,"reject"],[164,22,133,14],[164,23,133,15,"err"],[164,26,133,18],[164,27,133,19],[165,14,134,6],[166,12,135,4],[166,13,135,5],[167,12,135,5],[167,29,135,5,"_x"],[167,31,135,5],[167,33,135,5,"_x2"],[167,36,135,5],[168,14,135,5],[168,21,135,5,"_ref"],[168,25,135,5],[168,26,135,5,"apply"],[168,31,135,5],[168,38,135,5,"arguments"],[168,47,135,5],[169,12,135,5],[170,10,135,5],[170,14,135,6],[171,8,136,2],[171,9,136,3],[172,8,136,3],[172,17,67,8,"connect"],[172,24,67,15,"connect"],[172,25,67,15],[173,10,67,15],[173,17,67,15,"_connect"],[173,25,67,15],[173,26,67,15,"apply"],[173,31,67,15],[173,38,67,15,"arguments"],[173,47,67,15],[174,8,67,15],[175,8,67,15],[175,15,67,8,"connect"],[175,22,67,15],[176,6,67,15],[177,6,138,2],[178,0,139,0],[179,0,140,0],[180,6,138,2],[181,4,138,2],[182,6,138,2,"key"],[182,9,138,2],[183,6,138,2,"value"],[183,11,138,2],[183,13,141,2],[183,22,141,2,"send"],[183,26,141,6,"send"],[183,27,141,7,"type"],[183,31,141,26],[183,33,141,69],[184,8,141,69],[184,12,141,28,"payload"],[184,19,141,56],[184,22,141,56,"arguments"],[184,31,141,56],[184,32,141,56,"length"],[184,38,141,56],[184,46,141,56,"arguments"],[184,55,141,56],[184,63,141,56,"undefined"],[184,72,141,56],[184,75,141,56,"arguments"],[184,84,141,56],[184,90,141,59],[184,91,141,60],[184,92,141,61],[185,8,142,4],[185,12,142,8],[185,13,142,9],[185,17,142,13],[185,18,142,14,"ws"],[185,20,142,16],[185,24,142,20],[185,28,142,24],[185,29,142,25,"ws"],[185,31,142,27],[185,32,142,28,"readyState"],[185,42,142,38],[185,47,142,43,"WebSocket"],[185,56,142,52],[185,57,142,53,"OPEN"],[185,61,142,57],[185,63,142,59],[186,10,143,6,"console"],[186,17,143,13],[186,18,143,14,"warn"],[186,22,143,18],[186,23,143,19],[186,56,143,52],[186,57,143,53],[187,10,144,6],[188,8,145,4],[189,8,147,4],[189,12,147,10,"envelope"],[189,20,147,30],[189,23,147,33],[190,10,148,6,"type"],[190,14,148,10],[191,10,149,6,"id"],[191,12,149,8],[191,14,149,10,"Math"],[191,18,149,14],[191,19,149,15,"random"],[191,25,149,21],[191,26,149,22],[191,27,149,23],[191,28,149,24,"toString"],[191,36,149,32],[191,37,149,33],[191,39,149,35],[191,40,149,36],[191,41,149,37,"substring"],[191,50,149,46],[191,51,149,47],[191,52,149,48],[191,53,149,49],[192,10,150,6,"timestamp"],[192,19,150,15],[192,21,150,17],[192,25,150,21,"Date"],[192,29,150,25],[192,30,150,26],[192,31,150,27],[192,32,150,28,"toISOString"],[192,43,150,39],[192,44,150,40],[192,45,150,41],[193,10,151,6,"payload"],[194,8,152,4],[194,9,152,5],[195,8,154,4],[195,12,154,8],[195,13,154,9,"ws"],[195,15,154,11],[195,16,154,12,"send"],[195,20,154,16],[195,21,154,17,"JSON"],[195,25,154,21],[195,26,154,22,"stringify"],[195,35,154,31],[195,36,154,32,"envelope"],[195,44,154,40],[195,45,154,41],[195,46,154,42],[196,6,155,2],[198,6,157,2],[199,0,158,0],[200,0,159,0],[201,4,157,2],[202,6,157,2,"key"],[202,9,157,2],[203,6,157,2,"value"],[203,11,157,2],[203,13,160,2],[203,22,160,2,"sendExecuteRequest"],[203,40,160,20,"sendExecuteRequest"],[203,41,160,21,"draftId"],[203,48,160,36],[203,50,160,38,"touchToken"],[203,60,160,57],[203,62,160,65],[204,8,161,4],[204,12,161,8],[204,13,161,9,"send"],[204,17,161,13],[204,18,161,14],[204,35,161,31],[204,37,161,33],[205,10,162,6,"session_id"],[205,20,162,16],[205,22,162,18],[205,26,162,22],[205,27,162,23,"sessionId"],[205,36,162,32],[206,10,163,6,"draft_id"],[206,18,163,14],[206,20,163,16,"draftId"],[206,27,163,23],[207,10,164,6,"touch_token"],[207,21,164,17],[207,23,164,19,"touchToken"],[207,33,164,29],[207,37,164,33],[208,8,165,4],[208,9,165,5],[208,10,165,6],[209,6,166,2],[211,6,168,2],[212,0,169,0],[213,0,170,0],[214,4,168,2],[215,6,168,2,"key"],[215,9,168,2],[216,6,168,2,"value"],[216,11,168,2],[216,13,171,2],[216,22,171,2,"disconnect"],[216,32,171,12,"disconnect"],[216,33,171,12],[216,35,171,21],[217,8,172,4],[217,12,172,8],[217,13,172,9,"maxReconnectAttempts"],[217,33,172,29],[217,36,172,32],[217,37,172,33],[217,38,172,34],[217,39,172,35],[218,8,173,4],[218,12,173,8],[218,16,173,12],[218,17,173,13,"ws"],[218,19,173,15],[218,21,173,17],[219,10,174,6],[219,14,174,10],[219,15,174,11,"ws"],[219,17,174,13],[219,18,174,14,"close"],[219,23,174,19],[219,24,174,20],[219,28,174,24],[219,30,174,26],[219,49,174,45],[219,50,174,46],[220,8,175,4],[221,8,176,4],[221,12,176,8],[221,13,176,9,"_cleanup"],[221,21,176,17],[221,22,176,18],[221,23,176,19],[222,6,177,2],[224,6,179,2],[225,4,179,2],[226,6,179,2,"key"],[226,9,179,2],[227,6,179,2,"value"],[227,11,179,2],[227,13,181,2],[227,22,181,10,"_routeMessage"],[227,35,181,23,"_routeMessage"],[227,36,181,24,"envelope"],[227,44,181,44],[227,46,181,46,"resolve"],[227,53,181,64],[227,55,181,66,"reject"],[227,61,181,83],[227,63,181,91],[228,8,182,4],[228,12,182,12,"type"],[228,16,182,16],[228,19,182,21,"envelope"],[228,27,182,29],[228,28,182,12,"type"],[228,32,182,16],[229,8,184,4],[229,16,184,12,"type"],[229,20,184,16],[230,10,185,6],[230,15,185,11],[230,24,185,20],[231,12,186,8],[231,16,186,12],[231,17,186,13,"sessionId"],[231,26,186,22],[231,29,186,25,"envelope"],[231,37,186,33],[231,38,186,34,"payload"],[231,45,186,41],[231,46,186,42,"session_id"],[231,56,186,52],[232,12,187,8],[232,16,187,12],[232,17,187,13,"_userId"],[232,24,187,20],[232,27,187,23,"envelope"],[232,35,187,31],[232,36,187,32,"payload"],[232,43,187,39],[232,44,187,40,"user_id"],[232,51,187,47],[233,12,188,8],[233,16,188,12],[233,17,188,13,"_isAuthenticated"],[233,33,188,29],[233,36,188,32],[233,40,188,36],[234,12,189,8],[234,16,189,12],[234,17,189,13,"_startHeartbeat"],[234,32,189,28],[234,33,189,29,"envelope"],[234,41,189,37],[234,42,189,38,"payload"],[234,49,189,45],[234,50,189,46,"heartbeat_interval_ms"],[234,71,189,67],[234,75,189,71,"ENV"],[234,85,189,74],[234,86,189,74,"ENV"],[234,89,189,74],[234,90,189,75,"HEARTBEAT_INTERVAL_MS"],[234,111,189,96],[234,112,189,97],[235,12,190,8,"console"],[235,19,190,15],[235,20,190,16,"log"],[235,23,190,19],[235,24,190,20],[235,54,190,50],[235,56,190,52],[235,60,190,56],[235,61,190,57,"sessionId"],[235,70,190,66],[235,71,190,67],[236,12,191,8,"resolve"],[236,19,191,15],[236,22,191,18],[236,23,191,19],[237,12,192,8],[238,10,194,6],[238,15,194,11],[238,26,194,22],[239,12,195,8,"console"],[239,19,195,15],[239,20,195,16,"error"],[239,25,195,21],[239,26,195,22],[239,45,195,41],[239,47,195,43,"envelope"],[239,55,195,51],[239,56,195,52,"payload"],[239,63,195,59],[239,64,195,60,"reason"],[239,70,195,66],[239,71,195,67],[240,12,196,8],[240,16,196,12],[240,17,196,13,"_isAuthenticated"],[240,33,196,29],[240,36,196,32],[240,41,196,37],[241,12,197,8,"reject"],[241,18,197,14],[241,21,197,17],[241,25,197,21,"Error"],[241,30,197,26],[241,31,197,27,"envelope"],[241,39,197,35],[241,40,197,36,"payload"],[241,47,197,43],[241,48,197,44,"reason"],[241,54,197,50],[241,55,197,51],[241,56,197,52],[242,12,198,8],[243,10,200,6],[243,15,200,11],[243,30,200,26],[244,12,201,8],[245,12,202,8],[246,10,204,6],[247,12,205,8],[248,8,206,4],[250,8,208,4],[251,8,209,4],[251,12,209,8],[251,13,209,9,"_dispatch"],[251,22,209,18],[251,23,209,19,"type"],[251,27,209,23],[251,29,209,25,"envelope"],[251,37,209,33],[251,38,209,34],[252,6,210,2],[253,4,210,3],[254,6,210,3,"key"],[254,9,210,3],[255,6,210,3,"value"],[255,11,210,3],[255,13,212,2],[255,22,212,10,"_dispatch"],[255,31,212,19,"_dispatch"],[255,32,212,20,"type"],[255,36,212,39],[255,38,212,41,"envelope"],[255,46,212,61],[255,48,212,69],[256,8,213,4],[256,12,213,10,"handlers"],[256,20,213,18],[256,23,213,21],[256,27,213,25],[256,28,213,26,"handlers"],[256,36,213,34],[256,37,213,35,"get"],[256,40,213,38],[256,41,213,39,"type"],[256,45,213,43],[256,46,213,44],[256,50,213,48],[256,52,213,50],[257,8,214,4],[257,13,214,9],[257,17,214,15,"handler"],[257,24,214,22],[257,28,214,26,"handlers"],[257,36,214,34],[257,38,214,36],[258,10,215,6],[258,14,215,10],[259,12,216,8,"handler"],[259,19,216,15],[259,20,216,16,"envelope"],[259,28,216,24],[259,29,216,25],[260,10,217,6],[260,11,217,7],[260,12,217,8],[260,19,217,15,"err"],[260,22,217,18],[260,24,217,20],[261,12,218,8,"console"],[261,19,218,15],[261,20,218,16,"error"],[261,25,218,21],[261,26,218,22],[261,52,218,48,"type"],[261,56,218,52],[261,59,218,55],[261,61,218,57,"err"],[261,64,218,60],[261,65,218,61],[262,10,219,6],[263,8,220,4],[264,6,221,2],[265,4,221,3],[266,6,221,3,"key"],[266,9,221,3],[267,6,221,3,"value"],[267,11,221,3],[267,13,223,2],[267,22,223,10,"_startHeartbeat"],[267,37,223,25,"_startHeartbeat"],[267,38,223,26,"intervalMs"],[267,48,223,44],[267,50,223,52],[268,8,224,4],[268,12,224,8],[268,13,224,9,"_stopHeartbeat"],[268,27,224,23],[268,28,224,24],[268,29,224,25],[269,8,225,4],[269,12,225,8],[269,13,225,9,"heartbeatSeq"],[269,25,225,21],[269,28,225,24],[269,29,225,25],[270,8,227,4],[270,12,227,8],[270,13,227,9,"heartbeatTimer"],[270,27,227,23],[270,30,227,26,"setInterval"],[270,41,227,37],[270,42,227,38],[270,48,227,44],[271,10,228,6],[271,14,228,10],[271,18,228,14],[271,19,228,15,"ws"],[271,21,228,17],[271,25,228,21],[271,29,228,25],[271,30,228,26,"ws"],[271,32,228,28],[271,33,228,29,"readyState"],[271,43,228,39],[271,48,228,44,"WebSocket"],[271,57,228,53],[271,58,228,54,"OPEN"],[271,62,228,58],[271,66,228,62],[271,70,228,66],[271,71,228,67,"sessionId"],[271,80,228,76],[271,82,228,78],[272,12,229,8],[272,16,229,12],[272,17,229,13,"heartbeatSeq"],[272,29,229,25],[272,31,229,27],[273,12,230,8],[273,16,230,12],[273,17,230,13,"send"],[273,21,230,17],[273,22,230,18],[273,33,230,29],[273,35,230,31],[274,14,231,10,"session_id"],[274,24,231,20],[274,26,231,22],[274,30,231,26],[274,31,231,27,"sessionId"],[274,40,231,36],[275,14,232,10,"seq"],[275,17,232,13],[275,19,232,15],[275,23,232,19],[275,24,232,20,"heartbeatSeq"],[275,36,232,32],[276,14,233,10,"client_ts"],[276,23,233,19],[276,25,233,21],[276,29,233,25,"Date"],[276,33,233,29],[276,34,233,30],[276,35,233,31],[276,36,233,32,"toISOString"],[276,47,233,43],[276,48,233,44],[277,12,234,8],[277,13,234,9],[277,14,234,10],[278,10,235,6],[279,8,236,4],[279,9,236,5],[279,11,236,7,"intervalMs"],[279,21,236,17],[279,22,236,18],[280,8,238,4,"console"],[280,15,238,11],[280,16,238,12,"log"],[280,19,238,15],[280,20,238,16],[280,47,238,43,"intervalMs"],[280,57,238,53],[280,70,238,66],[280,71,238,67],[281,6,239,2],[282,4,239,3],[283,6,239,3,"key"],[283,9,239,3],[284,6,239,3,"value"],[284,11,239,3],[284,13,241,2],[284,22,241,10,"_stopHeartbeat"],[284,36,241,24,"_stopHeartbeat"],[284,37,241,24],[284,39,241,33],[285,8,242,4],[285,12,242,8],[285,16,242,12],[285,17,242,13,"heartbeatTimer"],[285,31,242,27],[285,33,242,29],[286,10,243,6,"clearInterval"],[286,23,243,19],[286,24,243,20],[286,28,243,24],[286,29,243,25,"heartbeatTimer"],[286,43,243,39],[286,44,243,40],[287,10,244,6],[287,14,244,10],[287,15,244,11,"heartbeatTimer"],[287,29,244,25],[287,32,244,28],[287,36,244,32],[288,8,245,4],[289,6,246,2],[290,4,246,3],[291,6,246,3,"key"],[291,9,246,3],[292,6,246,3,"value"],[292,11,246,3],[292,13,248,2],[292,22,248,10,"_cleanup"],[292,30,248,18,"_cleanup"],[292,31,248,18],[292,33,248,27],[293,8,249,4],[293,12,249,8],[293,13,249,9,"_stopHeartbeat"],[293,27,249,23],[293,28,249,24],[293,29,249,25],[294,8,250,4],[294,12,250,8],[294,13,250,9,"_isConnected"],[294,25,250,21],[294,28,250,24],[294,33,250,29],[295,8,251,4],[295,12,251,8],[295,13,251,9,"_isAuthenticated"],[295,29,251,25],[295,32,251,28],[295,37,251,33],[296,8,252,4],[296,12,252,8],[296,13,252,9,"sessionId"],[296,22,252,18],[296,25,252,21],[296,29,252,25],[297,8,253,4],[297,12,253,8],[297,13,253,9,"ws"],[297,15,253,11],[297,18,253,14],[297,22,253,18],[298,6,254,2],[299,4,254,3],[300,2,254,3],[300,7,257,0],[301,2,258,7],[301,6,258,13,"wsClient"],[301,14,258,21],[301,17,258,24],[301,21,258,28,"MyndLensWSClient"],[301,37,258,44],[301,38,258,45],[301,39,258,46],[302,0,258,47],[302,3]],"functionMap":{"names":["<global>","MyndLensWSClient","MyndLensWSClient#get__isConnected","MyndLensWSClient#get__isAuthenticated","MyndLensWSClient#get__currentSessionId","MyndLensWSClient#get__userId","MyndLensWSClient#on","<anonymous>","MyndLensWSClient#connect","Promise$argument_0","ws.onopen","ws.onmessage","ws.onclose","setTimeout$argument_0","ws.onerror","MyndLensWSClient#send","MyndLensWSClient#sendExecuteRequest","MyndLensWSClient#disconnect","MyndLensWSClient#_routeMessage","MyndLensWSClient#_dispatch","MyndLensWSClient#_startHeartbeat","setInterval$argument_0","MyndLensWSClient#_stopHeartbeat","MyndLensWSClient#_cleanup"],"mappings":"AAA;OC8B;ECa,wDD;EEC,gEF;EGC,gEH;EIC,oDJ;EKK;WCK;KDI;GLC;EOK;uBCK;yBCc;SDW;4BEE;SFO;0BGE;uBCe,yCD;SHE;0BKE;SLG;KDK;GPC;EcK;Gdc;EeK;GfM;EgBK;GhBM;EiBI;GjB6B;EkBE;GlBS;EmBE;sCCI;KDS;GnBG;EqBE;GrBK;EsBE;GtBM;CDC"},"hasCjsExports":false},"type":"js/module"}]}