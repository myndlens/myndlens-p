{"dependencies":[{"name":"../config/env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":264},"end":{"line":11,"column":36,"index":300}}],"key":"RGB4LNLgNgEtjcVNHbEAgFn5Y3M=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":61,"index":362}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MyndLensWSClient\", {\n    enumerable: true,\n    get: function () {\n      return MyndLensWSClient;\n    }\n  });\n  Object.defineProperty(exports, \"wsClient\", {\n    enumerable: true,\n    get: function () {\n      return wsClient;\n    }\n  });\n  var _configEnv = require(_dependencyMap[0], \"../config/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  /**\n   * WebSocket client — connects to MyndLens BE with auth.\n   *\n   * Protocol:\n   * 1. Connect to WS endpoint\n   * 2. Send AUTH message with token + device_id\n   * 3. Receive AUTH_OK with session_id\n   * 4. Start heartbeat loop\n   * 5. Route incoming messages to handlers\n   */\n\n  class MyndLensWSClient {\n    ws = null;\n    sessionId = null;\n    handlers = new Map();\n    heartbeatTimer = null;\n    heartbeatSeq = 0;\n    _isConnected = false;\n    _isAuthenticated = false;\n    _userId = null;\n    get isConnected() {\n      return this._isConnected;\n    }\n    get isAuthenticated() {\n      return this._isAuthenticated;\n    }\n    get currentSessionId() {\n      return this.sessionId;\n    }\n    get userId() {\n      return this._userId;\n    }\n\n    /**\n     * Register a handler for a specific message type.\n     */\n    on(type, handler) {\n      const existing = this.handlers.get(type) || [];\n      existing.push(handler);\n      this.handlers.set(type, existing);\n      // Return unsubscribe function\n      return () => {\n        const handlers = this.handlers.get(type) || [];\n        const idx = handlers.indexOf(handler);\n        if (idx >= 0) handlers.splice(idx, 1);\n      };\n    }\n\n    /**\n     * Connect to the WebSocket server.\n     */\n    async connect() {\n      if (this.ws) {\n        this.disconnect();\n      }\n      return new Promise(async (resolve, reject) => {\n        try {\n          const token = await (0, _auth.getStoredToken)();\n          if (!token) {\n            reject(new Error('No auth token available. Pair device first.'));\n            return;\n          }\n          const deviceId = await (0, _auth.getOrCreateDeviceId)();\n          const wsUrl = _configEnv.ENV.WS_URL;\n          console.log('[WS] Connecting to', wsUrl);\n          this.ws = new WebSocket(wsUrl);\n          this.ws.onopen = () => {\n            console.log('[WS] Connected, sending AUTH');\n            this._isConnected = true;\n\n            // Send AUTH message\n            this.send('auth', {\n              token,\n              device_id: deviceId,\n              client_version: '1.0.0'\n            });\n          };\n          this.ws.onmessage = event => {\n            try {\n              const envelope = JSON.parse(event.data);\n              this._routeMessage(envelope, resolve, reject);\n            } catch (err) {\n              console.error('[WS] Failed to parse message:', err);\n            }\n          };\n          this.ws.onclose = event => {\n            console.log('[WS] Closed:', event.code, event.reason);\n            this._cleanup();\n            this._dispatch('session_terminated', {\n              type: 'session_terminated',\n              id: '',\n              timestamp: new Date().toISOString(),\n              payload: {\n                code: event.code,\n                reason: event.reason\n              }\n            });\n            // Auto-reconnect is intentionally NOT here.\n            // loading.tsx is the single authority for reconnection.\n            // Dual reconnect (here + loading.tsx) causes race conditions and stuck states.\n          };\n          this.ws.onerror = error => {\n            console.warn('[WS] Connection error (non-fatal):', error?.type || 'unknown');\n            // Don't reject - let onclose handle reconnection\n          };\n        } catch (err) {\n          reject(err);\n        }\n      });\n    }\n\n    /**\n     * Send a typed message to the server.\n     */\n    send(type, payload = {}) {\n      if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\n        console.warn('[WS] Cannot send, not connected');\n        return;\n      }\n      const envelope = {\n        type,\n        id: Math.random().toString(36).substring(2),\n        timestamp: new Date().toISOString(),\n        payload\n      };\n      this.ws.send(JSON.stringify(envelope));\n    }\n\n    /**\n     * Send an execute request (with presence gate on server).\n     */\n    sendExecuteRequest(draftId, touchToken) {\n      this.send('execute_request', {\n        session_id: this.sessionId,\n        draft_id: draftId,\n        touch_token: touchToken || null\n      });\n    }\n\n    /**\n     * Disconnect and cleanup.\n     */\n    disconnect() {\n      if (this.ws) {\n        this.ws.close(1000, 'Client disconnect');\n      }\n      this._cleanup();\n    }\n\n    // ---- Private ----\n\n    _routeMessage(envelope, resolve, reject) {\n      const {\n        type\n      } = envelope;\n      switch (type) {\n        case 'auth_ok':\n          this.sessionId = envelope.payload.session_id;\n          this._userId = envelope.payload.user_id;\n          this._isAuthenticated = true;\n          this._startHeartbeat(envelope.payload.heartbeat_interval_ms || _configEnv.ENV.HEARTBEAT_INTERVAL_MS);\n          console.log('[WS] Authenticated, session:', this.sessionId);\n          resolve?.();\n          break;\n        case 'auth_fail':\n          console.error('[WS] Auth failed:', envelope.payload.reason);\n          this._isAuthenticated = false;\n          reject?.(new Error(envelope.payload.reason));\n          break;\n        case 'heartbeat_ack':\n          // Heartbeat acknowledged — no action needed\n          break;\n        default:\n          break;\n      }\n\n      // Dispatch to registered handlers\n      this._dispatch(type, envelope);\n    }\n    _dispatch(type, envelope) {\n      const handlers = this.handlers.get(type) || [];\n      for (const handler of handlers) {\n        try {\n          handler(envelope);\n        } catch (err) {\n          console.error(`[WS] Handler error for ${type}:`, err);\n        }\n      }\n    }\n    _startHeartbeat(intervalMs) {\n      this._stopHeartbeat();\n      this.heartbeatSeq = 0;\n      this.heartbeatTimer = setInterval(() => {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN && this.sessionId) {\n          this.heartbeatSeq++;\n          this.send('heartbeat', {\n            session_id: this.sessionId,\n            seq: this.heartbeatSeq,\n            client_ts: new Date().toISOString()\n          });\n        }\n      }, intervalMs);\n      console.log(`[WS] Heartbeat started: ${intervalMs}ms interval`);\n    }\n    _stopHeartbeat() {\n      if (this.heartbeatTimer) {\n        clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = null;\n      }\n    }\n    _cleanup() {\n      this._stopHeartbeat();\n      this._isConnected = false;\n      this._isAuthenticated = false;\n      this.sessionId = null;\n      this.ws = null;\n    }\n  }\n\n  // Singleton instance\n  const wsClient = new MyndLensWSClient();\n});","lineCount":242,"map":[[7,2,31,0,"Object"],[7,8,31,0],[7,9,31,0,"defineProperty"],[7,23,31,0],[7,24,31,0,"exports"],[7,31,31,0],[8,4,31,0,"enumerable"],[8,14,31,0],[9,4,31,0,"get"],[9,7,31,0],[9,18,31,0,"get"],[9,19,31,0],[10,6,31,0],[10,13,31,0,"MyndLensWSClient"],[10,29,31,0],[11,4,31,0],[12,2,31,0],[13,2,248,0,"Object"],[13,8,248,0],[13,9,248,0,"defineProperty"],[13,23,248,0],[13,24,248,0,"exports"],[13,31,248,0],[14,4,248,0,"enumerable"],[14,14,248,0],[15,4,248,0,"get"],[15,7,248,0],[15,18,248,0,"get"],[15,19,248,0],[16,6,248,0],[16,13,248,0,"wsClient"],[16,21,248,0],[17,4,248,0],[18,2,248,0],[19,2,11,0],[19,6,11,0,"_configEnv"],[19,16,11,0],[19,19,11,0,"require"],[19,26,11,0],[19,27,11,0,"_dependencyMap"],[19,41,11,0],[20,2,12,0],[20,6,12,0,"_auth"],[20,11,12,0],[20,14,12,0,"require"],[20,21,12,0],[20,22,12,0,"_dependencyMap"],[20,36,12,0],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[32,2,31,7],[32,8,31,13,"MyndLensWSClient"],[32,24,31,29],[32,25,31,30],[33,4,32,10,"ws"],[33,6,32,12],[33,9,32,33],[33,13,32,37],[34,4,33,10,"sessionId"],[34,13,33,19],[34,16,33,37],[34,20,33,41],[35,4,34,10,"handlers"],[35,12,34,18],[35,15,34,61],[35,19,34,65,"Map"],[35,22,34,68],[35,23,34,69],[35,24,34,70],[36,4,35,10,"heartbeatTimer"],[36,18,35,24],[36,21,35,66],[36,25,35,70],[37,4,36,10,"heartbeatSeq"],[37,16,36,22],[37,19,36,33],[37,20,36,34],[38,4,37,10,"_isConnected"],[38,16,37,22],[38,19,37,34],[38,24,37,39],[39,4,38,10,"_isAuthenticated"],[39,20,38,26],[39,23,38,38],[39,28,38,43],[40,4,39,10,"_userId"],[40,11,39,17],[40,14,39,35],[40,18,39,39],[41,4,41,2],[41,8,41,6,"isConnected"],[41,19,41,17,"isConnected"],[41,20,41,17],[41,22,41,29],[42,6,41,31],[42,13,41,38],[42,17,41,42],[42,18,41,43,"_isConnected"],[42,30,41,55],[43,4,41,57],[44,4,42,2],[44,8,42,6,"isAuthenticated"],[44,23,42,21,"isAuthenticated"],[44,24,42,21],[44,26,42,33],[45,6,42,35],[45,13,42,42],[45,17,42,46],[45,18,42,47,"_isAuthenticated"],[45,34,42,63],[46,4,42,65],[47,4,43,2],[47,8,43,6,"currentSessionId"],[47,24,43,22,"currentSessionId"],[47,25,43,22],[47,27,43,40],[48,6,43,42],[48,13,43,49],[48,17,43,53],[48,18,43,54,"sessionId"],[48,27,43,63],[49,4,43,65],[50,4,44,2],[50,8,44,6,"userId"],[50,14,44,12,"userId"],[50,15,44,12],[50,17,44,30],[51,6,44,32],[51,13,44,39],[51,17,44,43],[51,18,44,44,"_userId"],[51,25,44,51],[52,4,44,53],[54,4,46,2],[55,0,47,0],[56,0,48,0],[57,4,49,2,"on"],[57,6,49,4,"on"],[57,7,49,5,"type"],[57,11,49,24],[57,13,49,26,"handler"],[57,20,49,51],[57,22,49,65],[58,6,50,4],[58,12,50,10,"existing"],[58,20,50,18],[58,23,50,21],[58,27,50,25],[58,28,50,26,"handlers"],[58,36,50,34],[58,37,50,35,"get"],[58,40,50,38],[58,41,50,39,"type"],[58,45,50,43],[58,46,50,44],[58,50,50,48],[58,52,50,50],[59,6,51,4,"existing"],[59,14,51,12],[59,15,51,13,"push"],[59,19,51,17],[59,20,51,18,"handler"],[59,27,51,25],[59,28,51,26],[60,6,52,4],[60,10,52,8],[60,11,52,9,"handlers"],[60,19,52,17],[60,20,52,18,"set"],[60,23,52,21],[60,24,52,22,"type"],[60,28,52,26],[60,30,52,28,"existing"],[60,38,52,36],[60,39,52,37],[61,6,53,4],[62,6,54,4],[62,13,54,11],[62,19,54,17],[63,8,55,6],[63,14,55,12,"handlers"],[63,22,55,20],[63,25,55,23],[63,29,55,27],[63,30,55,28,"handlers"],[63,38,55,36],[63,39,55,37,"get"],[63,42,55,40],[63,43,55,41,"type"],[63,47,55,45],[63,48,55,46],[63,52,55,50],[63,54,55,52],[64,8,56,6],[64,14,56,12,"idx"],[64,17,56,15],[64,20,56,18,"handlers"],[64,28,56,26],[64,29,56,27,"indexOf"],[64,36,56,34],[64,37,56,35,"handler"],[64,44,56,42],[64,45,56,43],[65,8,57,6],[65,12,57,10,"idx"],[65,15,57,13],[65,19,57,17],[65,20,57,18],[65,22,57,20,"handlers"],[65,30,57,28],[65,31,57,29,"splice"],[65,37,57,35],[65,38,57,36,"idx"],[65,41,57,39],[65,43,57,41],[65,44,57,42],[65,45,57,43],[66,6,58,4],[66,7,58,5],[67,4,59,2],[69,4,61,2],[70,0,62,0],[71,0,63,0],[72,4,64,2],[72,10,64,8,"connect"],[72,17,64,15,"connect"],[72,18,64,15],[72,20,64,33],[73,6,65,4],[73,10,65,8],[73,14,65,12],[73,15,65,13,"ws"],[73,17,65,15],[73,19,65,17],[74,8,66,6],[74,12,66,10],[74,13,66,11,"disconnect"],[74,23,66,21],[74,24,66,22],[74,25,66,23],[75,6,67,4],[76,6,69,4],[76,13,69,11],[76,17,69,15,"Promise"],[76,24,69,22],[76,25,69,23],[76,32,69,30,"resolve"],[76,39,69,37],[76,41,69,39,"reject"],[76,47,69,45],[76,52,69,50],[77,8,70,6],[77,12,70,10],[78,10,71,8],[78,16,71,14,"token"],[78,21,71,19],[78,24,71,22],[78,30,71,28],[78,34,71,28,"getStoredToken"],[78,39,71,42],[78,40,71,42,"getStoredToken"],[78,54,71,42],[78,56,71,43],[78,57,71,44],[79,10,72,8],[79,14,72,12],[79,15,72,13,"token"],[79,20,72,18],[79,22,72,20],[80,12,73,10,"reject"],[80,18,73,16],[80,19,73,17],[80,23,73,21,"Error"],[80,28,73,26],[80,29,73,27],[80,74,73,72],[80,75,73,73],[80,76,73,74],[81,12,74,10],[82,10,75,8],[83,10,77,8],[83,16,77,14,"deviceId"],[83,24,77,22],[83,27,77,25],[83,33,77,31],[83,37,77,31,"getOrCreateDeviceId"],[83,42,77,50],[83,43,77,50,"getOrCreateDeviceId"],[83,62,77,50],[83,64,77,51],[83,65,77,52],[84,10,78,8],[84,16,78,14,"wsUrl"],[84,21,78,19],[84,24,78,22,"ENV"],[84,34,78,25],[84,35,78,25,"ENV"],[84,38,78,25],[84,39,78,26,"WS_URL"],[84,45,78,32],[85,10,80,8,"console"],[85,17,80,15],[85,18,80,16,"log"],[85,21,80,19],[85,22,80,20],[85,42,80,40],[85,44,80,42,"wsUrl"],[85,49,80,47],[85,50,80,48],[86,10,81,8],[86,14,81,12],[86,15,81,13,"ws"],[86,17,81,15],[86,20,81,18],[86,24,81,22,"WebSocket"],[86,33,81,31],[86,34,81,32,"wsUrl"],[86,39,81,37],[86,40,81,38],[87,10,83,8],[87,14,83,12],[87,15,83,13,"ws"],[87,17,83,15],[87,18,83,16,"onopen"],[87,24,83,22],[87,27,83,25],[87,33,83,31],[88,12,84,10,"console"],[88,19,84,17],[88,20,84,18,"log"],[88,23,84,21],[88,24,84,22],[88,54,84,52],[88,55,84,53],[89,12,85,10],[89,16,85,14],[89,17,85,15,"_isConnected"],[89,29,85,27],[89,32,85,30],[89,36,85,34],[91,12,87,10],[92,12,88,10],[92,16,88,14],[92,17,88,15,"send"],[92,21,88,19],[92,22,88,20],[92,28,88,26],[92,30,88,28],[93,14,89,12,"token"],[93,19,89,17],[94,14,90,12,"device_id"],[94,23,90,21],[94,25,90,23,"deviceId"],[94,33,90,31],[95,14,91,12,"client_version"],[95,28,91,26],[95,30,91,28],[96,12,92,10],[96,13,92,11],[96,14,92,12],[97,10,93,8],[97,11,93,9],[98,10,95,8],[98,14,95,12],[98,15,95,13,"ws"],[98,17,95,15],[98,18,95,16,"onmessage"],[98,27,95,25],[98,30,95,29,"event"],[98,35,95,34],[98,39,95,39],[99,12,96,10],[99,16,96,14],[100,14,97,12],[100,20,97,18,"envelope"],[100,28,97,38],[100,31,97,41,"JSON"],[100,35,97,45],[100,36,97,46,"parse"],[100,41,97,51],[100,42,97,52,"event"],[100,47,97,57],[100,48,97,58,"data"],[100,52,97,62],[100,53,97,63],[101,14,98,12],[101,18,98,16],[101,19,98,17,"_routeMessage"],[101,32,98,30],[101,33,98,31,"envelope"],[101,41,98,39],[101,43,98,41,"resolve"],[101,50,98,48],[101,52,98,50,"reject"],[101,58,98,56],[101,59,98,57],[102,12,99,10],[102,13,99,11],[102,14,99,12],[102,21,99,19,"err"],[102,24,99,22],[102,26,99,24],[103,14,100,12,"console"],[103,21,100,19],[103,22,100,20,"error"],[103,27,100,25],[103,28,100,26],[103,59,100,57],[103,61,100,59,"err"],[103,64,100,62],[103,65,100,63],[104,12,101,10],[105,10,102,8],[105,11,102,9],[106,10,104,8],[106,14,104,12],[106,15,104,13,"ws"],[106,17,104,15],[106,18,104,16,"onclose"],[106,25,104,23],[106,28,104,27,"event"],[106,33,104,32],[106,37,104,37],[107,12,105,10,"console"],[107,19,105,17],[107,20,105,18,"log"],[107,23,105,21],[107,24,105,22],[107,38,105,36],[107,40,105,38,"event"],[107,45,105,43],[107,46,105,44,"code"],[107,50,105,48],[107,52,105,50,"event"],[107,57,105,55],[107,58,105,56,"reason"],[107,64,105,62],[107,65,105,63],[108,12,106,10],[108,16,106,14],[108,17,106,15,"_cleanup"],[108,25,106,23],[108,26,106,24],[108,27,106,25],[109,12,107,10],[109,16,107,14],[109,17,107,15,"_dispatch"],[109,26,107,24],[109,27,107,25],[109,47,107,45],[109,49,107,47],[110,14,108,12,"type"],[110,18,108,16],[110,20,108,18],[110,40,108,38],[111,14,109,12,"id"],[111,16,109,14],[111,18,109,16],[111,20,109,18],[112,14,110,12,"timestamp"],[112,23,110,21],[112,25,110,23],[112,29,110,27,"Date"],[112,33,110,31],[112,34,110,32],[112,35,110,33],[112,36,110,34,"toISOString"],[112,47,110,45],[112,48,110,46],[112,49,110,47],[113,14,111,12,"payload"],[113,21,111,19],[113,23,111,21],[114,16,111,23,"code"],[114,20,111,27],[114,22,111,29,"event"],[114,27,111,34],[114,28,111,35,"code"],[114,32,111,39],[115,16,111,41,"reason"],[115,22,111,47],[115,24,111,49,"event"],[115,29,111,54],[115,30,111,55,"reason"],[116,14,111,62],[117,12,112,10],[117,13,112,11],[117,14,112,12],[118,12,113,10],[119,12,114,10],[120,12,115,10],[121,10,116,8],[121,11,116,9],[122,10,118,8],[122,14,118,12],[122,15,118,13,"ws"],[122,17,118,15],[122,18,118,16,"onerror"],[122,25,118,23],[122,28,118,27,"error"],[122,33,118,32],[122,37,118,37],[123,12,119,10,"console"],[123,19,119,17],[123,20,119,18,"warn"],[123,24,119,22],[123,25,119,23],[123,61,119,59],[123,63,119,61,"error"],[123,68,119,66],[123,70,119,68,"type"],[123,74,119,72],[123,78,119,76],[123,87,119,85],[123,88,119,86],[124,12,120,10],[125,10,121,8],[125,11,121,9],[126,8,123,6],[126,9,123,7],[126,10,123,8],[126,17,123,15,"err"],[126,20,123,18],[126,22,123,20],[127,10,124,8,"reject"],[127,16,124,14],[127,17,124,15,"err"],[127,20,124,18],[127,21,124,19],[128,8,125,6],[129,6,126,4],[129,7,126,5],[129,8,126,6],[130,4,127,2],[132,4,129,2],[133,0,130,0],[134,0,131,0],[135,4,132,2,"send"],[135,8,132,6,"send"],[135,9,132,7,"type"],[135,13,132,26],[135,15,132,28,"payload"],[135,22,132,56],[135,25,132,59],[135,26,132,60],[135,27,132,61],[135,29,132,69],[136,6,133,4],[136,10,133,8],[136,11,133,9],[136,15,133,13],[136,16,133,14,"ws"],[136,18,133,16],[136,22,133,20],[136,26,133,24],[136,27,133,25,"ws"],[136,29,133,27],[136,30,133,28,"readyState"],[136,40,133,38],[136,45,133,43,"WebSocket"],[136,54,133,52],[136,55,133,53,"OPEN"],[136,59,133,57],[136,61,133,59],[137,8,134,6,"console"],[137,15,134,13],[137,16,134,14,"warn"],[137,20,134,18],[137,21,134,19],[137,54,134,52],[137,55,134,53],[138,8,135,6],[139,6,136,4],[140,6,138,4],[140,12,138,10,"envelope"],[140,20,138,30],[140,23,138,33],[141,8,139,6,"type"],[141,12,139,10],[142,8,140,6,"id"],[142,10,140,8],[142,12,140,10,"Math"],[142,16,140,14],[142,17,140,15,"random"],[142,23,140,21],[142,24,140,22],[142,25,140,23],[142,26,140,24,"toString"],[142,34,140,32],[142,35,140,33],[142,37,140,35],[142,38,140,36],[142,39,140,37,"substring"],[142,48,140,46],[142,49,140,47],[142,50,140,48],[142,51,140,49],[143,8,141,6,"timestamp"],[143,17,141,15],[143,19,141,17],[143,23,141,21,"Date"],[143,27,141,25],[143,28,141,26],[143,29,141,27],[143,30,141,28,"toISOString"],[143,41,141,39],[143,42,141,40],[143,43,141,41],[144,8,142,6,"payload"],[145,6,143,4],[145,7,143,5],[146,6,145,4],[146,10,145,8],[146,11,145,9,"ws"],[146,13,145,11],[146,14,145,12,"send"],[146,18,145,16],[146,19,145,17,"JSON"],[146,23,145,21],[146,24,145,22,"stringify"],[146,33,145,31],[146,34,145,32,"envelope"],[146,42,145,40],[146,43,145,41],[146,44,145,42],[147,4,146,2],[149,4,148,2],[150,0,149,0],[151,0,150,0],[152,4,151,2,"sendExecuteRequest"],[152,22,151,20,"sendExecuteRequest"],[152,23,151,21,"draftId"],[152,30,151,36],[152,32,151,38,"touchToken"],[152,42,151,57],[152,44,151,65],[153,6,152,4],[153,10,152,8],[153,11,152,9,"send"],[153,15,152,13],[153,16,152,14],[153,33,152,31],[153,35,152,33],[154,8,153,6,"session_id"],[154,18,153,16],[154,20,153,18],[154,24,153,22],[154,25,153,23,"sessionId"],[154,34,153,32],[155,8,154,6,"draft_id"],[155,16,154,14],[155,18,154,16,"draftId"],[155,25,154,23],[156,8,155,6,"touch_token"],[156,19,155,17],[156,21,155,19,"touchToken"],[156,31,155,29],[156,35,155,33],[157,6,156,4],[157,7,156,5],[157,8,156,6],[158,4,157,2],[160,4,159,2],[161,0,160,0],[162,0,161,0],[163,4,162,2,"disconnect"],[163,14,162,12,"disconnect"],[163,15,162,12],[163,17,162,21],[164,6,163,4],[164,10,163,8],[164,14,163,12],[164,15,163,13,"ws"],[164,17,163,15],[164,19,163,17],[165,8,164,6],[165,12,164,10],[165,13,164,11,"ws"],[165,15,164,13],[165,16,164,14,"close"],[165,21,164,19],[165,22,164,20],[165,26,164,24],[165,28,164,26],[165,47,164,45],[165,48,164,46],[166,6,165,4],[167,6,166,4],[167,10,166,8],[167,11,166,9,"_cleanup"],[167,19,166,17],[167,20,166,18],[167,21,166,19],[168,4,167,2],[170,4,169,2],[172,4,171,10,"_routeMessage"],[172,17,171,23,"_routeMessage"],[172,18,171,24,"envelope"],[172,26,171,44],[172,28,171,46,"resolve"],[172,35,171,64],[172,37,171,66,"reject"],[172,43,171,83],[172,45,171,91],[173,6,172,4],[173,12,172,10],[174,8,172,12,"type"],[175,6,172,17],[175,7,172,18],[175,10,172,21,"envelope"],[175,18,172,29],[176,6,174,4],[176,14,174,12,"type"],[176,18,174,16],[177,8,175,6],[177,13,175,11],[177,22,175,20],[178,10,176,8],[178,14,176,12],[178,15,176,13,"sessionId"],[178,24,176,22],[178,27,176,25,"envelope"],[178,35,176,33],[178,36,176,34,"payload"],[178,43,176,41],[178,44,176,42,"session_id"],[178,54,176,52],[179,10,177,8],[179,14,177,12],[179,15,177,13,"_userId"],[179,22,177,20],[179,25,177,23,"envelope"],[179,33,177,31],[179,34,177,32,"payload"],[179,41,177,39],[179,42,177,40,"user_id"],[179,49,177,47],[180,10,178,8],[180,14,178,12],[180,15,178,13,"_isAuthenticated"],[180,31,178,29],[180,34,178,32],[180,38,178,36],[181,10,179,8],[181,14,179,12],[181,15,179,13,"_startHeartbeat"],[181,30,179,28],[181,31,179,29,"envelope"],[181,39,179,37],[181,40,179,38,"payload"],[181,47,179,45],[181,48,179,46,"heartbeat_interval_ms"],[181,69,179,67],[181,73,179,71,"ENV"],[181,83,179,74],[181,84,179,74,"ENV"],[181,87,179,74],[181,88,179,75,"HEARTBEAT_INTERVAL_MS"],[181,109,179,96],[181,110,179,97],[182,10,180,8,"console"],[182,17,180,15],[182,18,180,16,"log"],[182,21,180,19],[182,22,180,20],[182,52,180,50],[182,54,180,52],[182,58,180,56],[182,59,180,57,"sessionId"],[182,68,180,66],[182,69,180,67],[183,10,181,8,"resolve"],[183,17,181,15],[183,20,181,18],[183,21,181,19],[184,10,182,8],[185,8,184,6],[185,13,184,11],[185,24,184,22],[186,10,185,8,"console"],[186,17,185,15],[186,18,185,16,"error"],[186,23,185,21],[186,24,185,22],[186,43,185,41],[186,45,185,43,"envelope"],[186,53,185,51],[186,54,185,52,"payload"],[186,61,185,59],[186,62,185,60,"reason"],[186,68,185,66],[186,69,185,67],[187,10,186,8],[187,14,186,12],[187,15,186,13,"_isAuthenticated"],[187,31,186,29],[187,34,186,32],[187,39,186,37],[188,10,187,8,"reject"],[188,16,187,14],[188,19,187,17],[188,23,187,21,"Error"],[188,28,187,26],[188,29,187,27,"envelope"],[188,37,187,35],[188,38,187,36,"payload"],[188,45,187,43],[188,46,187,44,"reason"],[188,52,187,50],[188,53,187,51],[188,54,187,52],[189,10,188,8],[190,8,190,6],[190,13,190,11],[190,28,190,26],[191,10,191,8],[192,10,192,8],[193,8,194,6],[194,10,195,8],[195,6,196,4],[197,6,198,4],[198,6,199,4],[198,10,199,8],[198,11,199,9,"_dispatch"],[198,20,199,18],[198,21,199,19,"type"],[198,25,199,23],[198,27,199,25,"envelope"],[198,35,199,33],[198,36,199,34],[199,4,200,2],[200,4,202,10,"_dispatch"],[200,13,202,19,"_dispatch"],[200,14,202,20,"type"],[200,18,202,39],[200,20,202,41,"envelope"],[200,28,202,61],[200,30,202,69],[201,6,203,4],[201,12,203,10,"handlers"],[201,20,203,18],[201,23,203,21],[201,27,203,25],[201,28,203,26,"handlers"],[201,36,203,34],[201,37,203,35,"get"],[201,40,203,38],[201,41,203,39,"type"],[201,45,203,43],[201,46,203,44],[201,50,203,48],[201,52,203,50],[202,6,204,4],[202,11,204,9],[202,17,204,15,"handler"],[202,24,204,22],[202,28,204,26,"handlers"],[202,36,204,34],[202,38,204,36],[203,8,205,6],[203,12,205,10],[204,10,206,8,"handler"],[204,17,206,15],[204,18,206,16,"envelope"],[204,26,206,24],[204,27,206,25],[205,8,207,6],[205,9,207,7],[205,10,207,8],[205,17,207,15,"err"],[205,20,207,18],[205,22,207,20],[206,10,208,8,"console"],[206,17,208,15],[206,18,208,16,"error"],[206,23,208,21],[206,24,208,22],[206,50,208,48,"type"],[206,54,208,52],[206,57,208,55],[206,59,208,57,"err"],[206,62,208,60],[206,63,208,61],[207,8,209,6],[208,6,210,4],[209,4,211,2],[210,4,213,10,"_startHeartbeat"],[210,19,213,25,"_startHeartbeat"],[210,20,213,26,"intervalMs"],[210,30,213,44],[210,32,213,52],[211,6,214,4],[211,10,214,8],[211,11,214,9,"_stopHeartbeat"],[211,25,214,23],[211,26,214,24],[211,27,214,25],[212,6,215,4],[212,10,215,8],[212,11,215,9,"heartbeatSeq"],[212,23,215,21],[212,26,215,24],[212,27,215,25],[213,6,217,4],[213,10,217,8],[213,11,217,9,"heartbeatTimer"],[213,25,217,23],[213,28,217,26,"setInterval"],[213,39,217,37],[213,40,217,38],[213,46,217,44],[214,8,218,6],[214,12,218,10],[214,16,218,14],[214,17,218,15,"ws"],[214,19,218,17],[214,23,218,21],[214,27,218,25],[214,28,218,26,"ws"],[214,30,218,28],[214,31,218,29,"readyState"],[214,41,218,39],[214,46,218,44,"WebSocket"],[214,55,218,53],[214,56,218,54,"OPEN"],[214,60,218,58],[214,64,218,62],[214,68,218,66],[214,69,218,67,"sessionId"],[214,78,218,76],[214,80,218,78],[215,10,219,8],[215,14,219,12],[215,15,219,13,"heartbeatSeq"],[215,27,219,25],[215,29,219,27],[216,10,220,8],[216,14,220,12],[216,15,220,13,"send"],[216,19,220,17],[216,20,220,18],[216,31,220,29],[216,33,220,31],[217,12,221,10,"session_id"],[217,22,221,20],[217,24,221,22],[217,28,221,26],[217,29,221,27,"sessionId"],[217,38,221,36],[218,12,222,10,"seq"],[218,15,222,13],[218,17,222,15],[218,21,222,19],[218,22,222,20,"heartbeatSeq"],[218,34,222,32],[219,12,223,10,"client_ts"],[219,21,223,19],[219,23,223,21],[219,27,223,25,"Date"],[219,31,223,29],[219,32,223,30],[219,33,223,31],[219,34,223,32,"toISOString"],[219,45,223,43],[219,46,223,44],[220,10,224,8],[220,11,224,9],[220,12,224,10],[221,8,225,6],[222,6,226,4],[222,7,226,5],[222,9,226,7,"intervalMs"],[222,19,226,17],[222,20,226,18],[223,6,228,4,"console"],[223,13,228,11],[223,14,228,12,"log"],[223,17,228,15],[223,18,228,16],[223,45,228,43,"intervalMs"],[223,55,228,53],[223,68,228,66],[223,69,228,67],[224,4,229,2],[225,4,231,10,"_stopHeartbeat"],[225,18,231,24,"_stopHeartbeat"],[225,19,231,24],[225,21,231,33],[226,6,232,4],[226,10,232,8],[226,14,232,12],[226,15,232,13,"heartbeatTimer"],[226,29,232,27],[226,31,232,29],[227,8,233,6,"clearInterval"],[227,21,233,19],[227,22,233,20],[227,26,233,24],[227,27,233,25,"heartbeatTimer"],[227,41,233,39],[227,42,233,40],[228,8,234,6],[228,12,234,10],[228,13,234,11,"heartbeatTimer"],[228,27,234,25],[228,30,234,28],[228,34,234,32],[229,6,235,4],[230,4,236,2],[231,4,238,10,"_cleanup"],[231,12,238,18,"_cleanup"],[231,13,238,18],[231,15,238,27],[232,6,239,4],[232,10,239,8],[232,11,239,9,"_stopHeartbeat"],[232,25,239,23],[232,26,239,24],[232,27,239,25],[233,6,240,4],[233,10,240,8],[233,11,240,9,"_isConnected"],[233,23,240,21],[233,26,240,24],[233,31,240,29],[234,6,241,4],[234,10,241,8],[234,11,241,9,"_isAuthenticated"],[234,27,241,25],[234,30,241,28],[234,35,241,33],[235,6,242,4],[235,10,242,8],[235,11,242,9,"sessionId"],[235,20,242,18],[235,23,242,21],[235,27,242,25],[236,6,243,4],[236,10,243,8],[236,11,243,9,"ws"],[236,13,243,11],[236,16,243,14],[236,20,243,18],[237,4,244,2],[238,2,245,0],[240,2,247,0],[241,2,248,7],[241,8,248,13,"wsClient"],[241,16,248,21],[241,19,248,24],[241,23,248,28,"MyndLensWSClient"],[241,39,248,44],[241,40,248,45],[241,41,248,46],[242,0,248,47],[242,3]],"functionMap":{"names":["<global>","MyndLensWSClient","MyndLensWSClient#get__isConnected","MyndLensWSClient#get__isAuthenticated","MyndLensWSClient#get__currentSessionId","MyndLensWSClient#get__userId","MyndLensWSClient#on","<anonymous>","MyndLensWSClient#connect","Promise$argument_0","ws.onopen","ws.onmessage","ws.onclose","ws.onerror","MyndLensWSClient#send","MyndLensWSClient#sendExecuteRequest","MyndLensWSClient#disconnect","MyndLensWSClient#_routeMessage","MyndLensWSClient#_dispatch","MyndLensWSClient#_startHeartbeat","setInterval$argument_0","MyndLensWSClient#_stopHeartbeat","MyndLensWSClient#_cleanup"],"mappings":"AAA;OC8B;ECU,wDD;EEC,gEF;EGC,gEH;EIC,oDJ;EKK;WCK;KDI;GLC;EOK;uBCK;yBCc;SDU;4BEE;SFO;0BGE;SHY;0BIE;SJG;KDK;GPC;EaK;Gbc;EcK;GdM;EeK;GfK;EgBI;GhB6B;EiBE;GjBS;EkBE;sCCI;KDS;GlBG;EoBE;GpBK;EqBE;GrBM;CDC"},"hasCjsExports":false},"type":"js/module"}]}