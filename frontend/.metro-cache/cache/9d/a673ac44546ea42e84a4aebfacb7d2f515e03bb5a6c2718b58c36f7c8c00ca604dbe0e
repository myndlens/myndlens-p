{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":149},"end":{"line":6,"column":33,"index":182}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useAudioStore\", {\n    enumerable: true,\n    get: function () {\n      return useAudioStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  /**\n   * Audio State Machine — controls the voice interaction lifecycle.\n   *\n   * States: IDLE → LISTENING → CAPTURING → THINKING → RESPONDING → IDLE\n   */\n\n  // Valid transitions\n  const VALID_TRANSITIONS = {\n    IDLE: ['LISTENING'],\n    LISTENING: ['CAPTURING', 'IDLE'],\n    CAPTURING: ['THINKING', 'LISTENING', 'IDLE'],\n    THINKING: ['RESPONDING', 'IDLE', 'LISTENING'],\n    RESPONDING: ['LISTENING', 'IDLE', 'CAPTURING']\n  };\n  const useAudioStore = (0, _zustand.create)((set, get) => ({\n    state: 'IDLE',\n    transcript: '',\n    partialTranscript: '',\n    ttsText: '',\n    isSpeaking: false,\n    chunksSent: 0,\n    error: null,\n    transition: to => {\n      const current = get().state;\n      const valid = VALID_TRANSITIONS[current];\n      if (valid.includes(to)) {\n        set({\n          state: to,\n          error: null\n        });\n        return true;\n      }\n      console.warn(`[AudioFSM] Invalid transition: ${current} → ${to}`);\n      return false;\n    },\n    setTranscript: text => set({\n      transcript: text\n    }),\n    setPartialTranscript: text => set({\n      partialTranscript: text\n    }),\n    setTtsText: text => set({\n      ttsText: text\n    }),\n    setIsSpeaking: speaking => set({\n      isSpeaking: speaking\n    }),\n    incrementChunks: () => set(s => ({\n      chunksSent: s.chunksSent + 1\n    })),\n    setError: error => set({\n      error\n    }),\n    reset: () => set({\n      state: 'IDLE',\n      transcript: '',\n      partialTranscript: '',\n      ttsText: '',\n      isSpeaking: false,\n      chunksSent: 0,\n      error: null\n    })\n  }));\n});","lineCount":77,"map":[[7,2,38,0,"Object"],[7,8,38,0],[7,9,38,0,"defineProperty"],[7,23,38,0],[7,24,38,0,"exports"],[7,31,38,0],[8,4,38,0,"enumerable"],[8,14,38,0],[9,4,38,0,"get"],[9,7,38,0],[9,18,38,0,"get"],[9,19,38,0],[10,6,38,0],[10,13,38,0,"useAudioStore"],[10,26,38,0],[11,4,38,0],[12,2,38,0],[13,2,6,0],[13,6,6,0,"_zustand"],[13,14,6,0],[13,17,6,0,"require"],[13,24,6,0],[13,25,6,0,"_dependencyMap"],[13,39,6,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[20,2,10,0],[21,2,11,0],[21,8,11,6,"VALID_TRANSITIONS"],[21,25,11,57],[21,28,11,60],[22,4,12,2,"IDLE"],[22,8,12,6],[22,10,12,14],[22,11,12,15],[22,22,12,26],[22,23,12,27],[23,4,13,2,"LISTENING"],[23,13,13,11],[23,15,13,14],[23,16,13,15],[23,27,13,26],[23,29,13,28],[23,35,13,34],[23,36,13,35],[24,4,14,2,"CAPTURING"],[24,13,14,11],[24,15,14,14],[24,16,14,15],[24,26,14,25],[24,28,14,27],[24,39,14,38],[24,41,14,40],[24,47,14,46],[24,48,14,47],[25,4,15,2,"THINKING"],[25,12,15,10],[25,14,15,14],[25,15,15,15],[25,27,15,27],[25,29,15,29],[25,35,15,35],[25,37,15,37],[25,48,15,48],[25,49,15,49],[26,4,16,2,"RESPONDING"],[26,14,16,12],[26,16,16,14],[26,17,16,15],[26,28,16,26],[26,30,16,28],[26,36,16,34],[26,38,16,36],[26,49,16,47],[27,2,17,0],[27,3,17,1],[28,2,38,7],[28,8,38,13,"useAudioStore"],[28,21,38,26],[28,24,38,29],[28,28,38,29,"create"],[28,36,38,35],[28,37,38,35,"create"],[28,43,38,35],[28,45,38,48],[28,46,38,49,"set"],[28,49,38,52],[28,51,38,54,"get"],[28,54,38,57],[28,60,38,63],[29,4,39,2,"state"],[29,9,39,7],[29,11,39,9],[29,17,39,15],[30,4,40,2,"transcript"],[30,14,40,12],[30,16,40,14],[30,18,40,16],[31,4,41,2,"partialTranscript"],[31,21,41,19],[31,23,41,21],[31,25,41,23],[32,4,42,2,"ttsText"],[32,11,42,9],[32,13,42,11],[32,15,42,13],[33,4,43,2,"isSpeaking"],[33,14,43,12],[33,16,43,14],[33,21,43,19],[34,4,44,2,"chunksSent"],[34,14,44,12],[34,16,44,14],[34,17,44,15],[35,4,45,2,"error"],[35,9,45,7],[35,11,45,9],[35,15,45,13],[36,4,47,2,"transition"],[36,14,47,12],[36,16,47,15,"to"],[36,18,47,29],[36,22,47,34],[37,6,48,4],[37,12,48,10,"current"],[37,19,48,17],[37,22,48,20,"get"],[37,25,48,23],[37,26,48,24],[37,27,48,25],[37,28,48,26,"state"],[37,33,48,31],[38,6,49,4],[38,12,49,10,"valid"],[38,17,49,15],[38,20,49,18,"VALID_TRANSITIONS"],[38,37,49,35],[38,38,49,36,"current"],[38,45,49,43],[38,46,49,44],[39,6,50,4],[39,10,50,8,"valid"],[39,15,50,13],[39,16,50,14,"includes"],[39,24,50,22],[39,25,50,23,"to"],[39,27,50,25],[39,28,50,26],[39,30,50,28],[40,8,51,6,"set"],[40,11,51,9],[40,12,51,10],[41,10,51,12,"state"],[41,15,51,17],[41,17,51,19,"to"],[41,19,51,21],[42,10,51,23,"error"],[42,15,51,28],[42,17,51,30],[43,8,51,35],[43,9,51,36],[43,10,51,37],[44,8,52,6],[44,15,52,13],[44,19,52,17],[45,6,53,4],[46,6,54,4,"console"],[46,13,54,11],[46,14,54,12,"warn"],[46,18,54,16],[46,19,54,17],[46,53,54,51,"current"],[46,60,54,58],[46,66,54,64,"to"],[46,68,54,66],[46,70,54,68],[46,71,54,69],[47,6,55,4],[47,13,55,11],[47,18,55,16],[48,4,56,2],[48,5,56,3],[49,4,58,2,"setTranscript"],[49,17,58,15],[49,19,58,18,"text"],[49,23,58,22],[49,27,58,27,"set"],[49,30,58,30],[49,31,58,31],[50,6,58,33,"transcript"],[50,16,58,43],[50,18,58,45,"text"],[51,4,58,50],[51,5,58,51],[51,6,58,52],[52,4,59,2,"setPartialTranscript"],[52,24,59,22],[52,26,59,25,"text"],[52,30,59,29],[52,34,59,34,"set"],[52,37,59,37],[52,38,59,38],[53,6,59,40,"partialTranscript"],[53,23,59,57],[53,25,59,59,"text"],[54,4,59,64],[54,5,59,65],[54,6,59,66],[55,4,60,2,"setTtsText"],[55,14,60,12],[55,16,60,15,"text"],[55,20,60,19],[55,24,60,24,"set"],[55,27,60,27],[55,28,60,28],[56,6,60,30,"ttsText"],[56,13,60,37],[56,15,60,39,"text"],[57,4,60,44],[57,5,60,45],[57,6,60,46],[58,4,61,2,"setIsSpeaking"],[58,17,61,15],[58,19,61,18,"speaking"],[58,27,61,26],[58,31,61,31,"set"],[58,34,61,34],[58,35,61,35],[59,6,61,37,"isSpeaking"],[59,16,61,47],[59,18,61,49,"speaking"],[60,4,61,58],[60,5,61,59],[60,6,61,60],[61,4,62,2,"incrementChunks"],[61,19,62,17],[61,21,62,19,"incrementChunks"],[61,22,62,19],[61,27,62,25,"set"],[61,30,62,28],[61,31,62,30,"s"],[61,32,62,31],[61,37,62,37],[62,6,62,39,"chunksSent"],[62,16,62,49],[62,18,62,51,"s"],[62,19,62,52],[62,20,62,53,"chunksSent"],[62,30,62,63],[62,33,62,66],[63,4,62,68],[63,5,62,69],[63,6,62,70],[63,7,62,71],[64,4,63,2,"setError"],[64,12,63,10],[64,14,63,13,"error"],[64,19,63,18],[64,23,63,23,"set"],[64,26,63,26],[64,27,63,27],[65,6,63,29,"error"],[66,4,63,35],[66,5,63,36],[66,6,63,37],[67,4,64,2,"reset"],[67,9,64,7],[67,11,64,9,"reset"],[67,12,64,9],[67,17,64,15,"set"],[67,20,64,18],[67,21,64,19],[68,6,65,4,"state"],[68,11,65,9],[68,13,65,11],[68,19,65,17],[69,6,66,4,"transcript"],[69,16,66,14],[69,18,66,16],[69,20,66,18],[70,6,67,4,"partialTranscript"],[70,23,67,21],[70,25,67,23],[70,27,67,25],[71,6,68,4,"ttsText"],[71,13,68,11],[71,15,68,13],[71,17,68,15],[72,6,69,4,"isSpeaking"],[72,16,69,14],[72,18,69,16],[72,23,69,21],[73,6,70,4,"chunksSent"],[73,16,70,14],[73,18,70,16],[73,19,70,17],[74,6,71,4,"error"],[74,11,71,9],[74,13,71,11],[75,4,72,2],[75,5,72,3],[76,2,73,0],[76,3,73,1],[76,4,73,2],[76,5,73,3],[77,0,73,4],[77,3]],"functionMap":{"names":["<global>","create$argument_0","transition","setTranscript","setPartialTranscript","setTtsText","setIsSpeaking","incrementChunks","set$argument_0","setError","reset"],"mappings":"AAA;gDCqC;cCS;GDS;iBEE,mCF;wBGC,0CH;cIC,gCJ;iBKC,2CL;mBMC,UC,yCD,CN;YQC,yBR;SSC;ITQ;EDC"},"hasCjsExports":false},"type":"js/module"}]}