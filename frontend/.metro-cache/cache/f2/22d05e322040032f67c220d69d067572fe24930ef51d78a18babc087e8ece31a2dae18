{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"DEFAULT_VAD_CONFIG\", {\n    enumerable: true,\n    get: function () {\n      return DEFAULT_VAD_CONFIG;\n    }\n  });\n  Object.defineProperty(exports, \"LocalVAD\", {\n    enumerable: true,\n    get: function () {\n      return LocalVAD;\n    }\n  });\n  exports.computeRMSFromBytes = computeRMSFromBytes;\n  Object.defineProperty(exports, \"vad\", {\n    enumerable: true,\n    get: function () {\n      return vad;\n    }\n  });\n  /**\n   * Local Voice Activity Detection — RMS energy only (v1 release).\n   *\n   * Silero/ONNX is deferred (not compatible with RN 0.81 Bridgeless/New Arch in v1).\n   * All VAD runs on metering-based RMS energy from expo-av.\n   *\n   * DSP hardening for ship quality:\n   *   1. Noise floor calibration (first 600ms → dynamic threshold)\n   *   2. Minimum speech duration gate (≥300ms above threshold to confirm speechStart)\n   *   3. End-of-speech hangover (≥1500ms below threshold to confirm speechEnd)\n   *   4. Send gate: frames above threshold must be ≥ MIN_SPEECH_FRAMES to count\n   */\n\n  const DEFAULT_VAD_CONFIG = {\n    energyThreshold: 0.015,\n    noiseDelta: 0.012,\n    silenceDurationMs: 1500,\n    minSpeechDurationMs: 300,\n    calibrationMs: 600\n  };\n  class LocalVAD {\n    // Speech state\n    _isSpeech = false;\n    _speechStartTime = 0;\n    _silenceStartTime = 0;\n    _lastEnergy = 0;\n\n    // Noise floor calibration\n    _calibrating = false;\n    _calibrationStart = 0;\n    _calibrationSamples = [];\n    // Pending speech gate (accumulate energy before confirming speechStart)\n    _pendingSpeechStart = 0; // timestamp when energy first crossed threshold\n\n    constructor(config) {\n      this.config = {\n        ...DEFAULT_VAD_CONFIG,\n        ...config\n      };\n      this._dynamicThreshold = this.config.energyThreshold;\n    }\n    get isSpeech() {\n      return this._isSpeech;\n    }\n    get lastEnergy() {\n      return this._lastEnergy;\n    }\n    get dynamicThreshold() {\n      return this._dynamicThreshold;\n    }\n\n    /**\n     * Start noise-floor calibration.\n     * Call this immediately when recording starts.\n     * VAD will sample ambient energy for `calibrationMs` before becoming active.\n     */\n    startCalibration() {\n      this._calibrating = true;\n      this._calibrationStart = Date.now();\n      this._calibrationSamples = [];\n    }\n\n    /**\n     * Process an RMS energy value from expo-av metering.\n     * Returns VAD event.\n     */\n    processEnergy(rms) {\n      this._lastEnergy = rms;\n      const now = Date.now();\n\n      // ── Calibration phase ──────────────────────────────────────────────────\n      if (this._calibrating) {\n        this._calibrationSamples.push(rms);\n        if (now - this._calibrationStart >= this.config.calibrationMs) {\n          this._finishCalibration();\n        }\n        return 'none'; // no events during calibration\n      }\n      const threshold = this._dynamicThreshold;\n      const isAboveThreshold = rms > threshold;\n      if (isAboveThreshold) {\n        if (!this._isSpeech) {\n          // ── Pending speech gate ─────────────────────────────────────────────\n          if (this._pendingSpeechStart === 0) {\n            this._pendingSpeechStart = now;\n          }\n          // Only confirm speechStart after minSpeechDurationMs above threshold\n          const pendingDuration = now - this._pendingSpeechStart;\n          if (pendingDuration >= this.config.minSpeechDurationMs) {\n            this._isSpeech = true;\n            this._speechStartTime = this._pendingSpeechStart;\n            this._silenceStartTime = 0;\n            this._pendingSpeechStart = 0;\n            return 'speechStart';\n          }\n        } else {\n          // Already in speech — reset silence and pending timers\n          this._silenceStartTime = 0;\n          this._pendingSpeechStart = 0;\n        }\n      } else {\n        // Below threshold\n        this._pendingSpeechStart = 0; // cancel pending speechStart\n\n        if (this._isSpeech) {\n          if (this._silenceStartTime === 0) {\n            this._silenceStartTime = now;\n          }\n          const speechDuration = now - this._speechStartTime;\n          const silenceDuration = now - this._silenceStartTime;\n          if (speechDuration >= this.config.minSpeechDurationMs && silenceDuration >= this.config.silenceDurationMs) {\n            this._isSpeech = false;\n            this._speechStartTime = 0;\n            this._silenceStartTime = 0;\n            return 'speechEnd';\n          }\n        }\n      }\n      return 'none';\n    }\n\n    /**\n     * Process raw PCM bytes (RMS-only, no ML).\n     * Used for post-recording send gate: returns 'none' if audio too quiet to send.\n     */\n    async processChunk(audioBytes) {\n      const rms = computeRMSFromBytes(audioBytes);\n      return this.processEnergy(rms);\n    }\n\n    /**\n     * Returns true if a recorded audio buffer contains enough energy to be worth\n     * sending to STT. Prevents sending silence/noise.\n     * threshold: fraction of frames that must be above speechThreshold (default 10%)\n     */\n    hasSpeechContent(audioBytes, minFrameFraction = 0.10) {\n      const frameSize = 320; // 16kHz, 16-bit, 20ms frame = 320 bytes\n      const frameCount = Math.floor(audioBytes.length / frameSize);\n      if (frameCount === 0) return false;\n      let speechFrames = 0;\n      for (let i = 0; i < frameCount; i++) {\n        const frame = audioBytes.slice(i * frameSize, (i + 1) * frameSize);\n        const rms = computeRMSFromBytes(frame);\n        if (rms > this._dynamicThreshold) speechFrames++;\n      }\n      return speechFrames / frameCount >= minFrameFraction;\n    }\n    reset() {\n      this._isSpeech = false;\n      this._speechStartTime = 0;\n      this._silenceStartTime = 0;\n      this._lastEnergy = 0;\n      this._pendingSpeechStart = 0;\n      this._calibrating = false;\n      this._calibrationSamples = [];\n      this._dynamicThreshold = this.config.energyThreshold;\n    }\n    _finishCalibration() {\n      this._calibrating = false;\n      if (this._calibrationSamples.length > 0) {\n        const sorted = [...this._calibrationSamples].sort((a, b) => a - b);\n        // Use 80th percentile of calibration samples as noise floor\n        const p80 = sorted[Math.floor(sorted.length * 0.8)] ?? sorted[sorted.length - 1] ?? 0;\n        this._dynamicThreshold = Math.max(this.config.energyThreshold, p80 + this.config.noiseDelta);\n        console.log(`[VAD] Calibrated: noiseFloor=${p80.toFixed(4)} threshold=${this._dynamicThreshold.toFixed(4)}`);\n      }\n    }\n  }\n\n  /**\n   * Compute RMS energy from raw PCM bytes (16-bit signed, little-endian).\n   */\n  function computeRMSFromBytes(bytes) {\n    let sumSquares = 0;\n    const sampleCount = Math.floor(bytes.length / 2);\n    if (sampleCount === 0) return 0;\n    for (let i = 0; i < sampleCount; i++) {\n      const lo = bytes[i * 2] ?? 0;\n      const hi = bytes[i * 2 + 1] ?? 0;\n      const s16 = (hi << 8 | lo) << 16 >> 16;\n      const norm = s16 / 32768.0;\n      sumSquares += norm * norm;\n    }\n    return Math.sqrt(sumSquares / sampleCount);\n  }\n\n  // App-wide singleton\n  const vad = new LocalVAD();\n});","lineCount":214,"map":[[7,2,29,0,"Object"],[7,8,29,0],[7,9,29,0,"defineProperty"],[7,23,29,0],[7,24,29,0,"exports"],[7,31,29,0],[8,4,29,0,"enumerable"],[8,14,29,0],[9,4,29,0,"get"],[9,7,29,0],[9,18,29,0,"get"],[9,19,29,0],[10,6,29,0],[10,13,29,0,"DEFAULT_VAD_CONFIG"],[10,31,29,0],[11,4,29,0],[12,2,29,0],[13,2,37,0,"Object"],[13,8,37,0],[13,9,37,0,"defineProperty"],[13,23,37,0],[13,24,37,0,"exports"],[13,31,37,0],[14,4,37,0,"enumerable"],[14,14,37,0],[15,4,37,0,"get"],[15,7,37,0],[15,18,37,0,"get"],[15,19,37,0],[16,6,37,0],[16,13,37,0,"LocalVAD"],[16,21,37,0],[17,4,37,0],[18,2,37,0],[19,2,208,0,"exports"],[19,9,208,0],[19,10,208,0,"computeRMSFromBytes"],[19,29,208,0],[19,32,208,0,"computeRMSFromBytes"],[19,51,208,0],[20,2,223,0,"Object"],[20,8,223,0],[20,9,223,0,"defineProperty"],[20,23,223,0],[20,24,223,0,"exports"],[20,31,223,0],[21,4,223,0,"enumerable"],[21,14,223,0],[22,4,223,0,"get"],[22,7,223,0],[22,18,223,0,"get"],[22,19,223,0],[23,6,223,0],[23,13,223,0,"vad"],[23,16,223,0],[24,4,223,0],[25,2,223,0],[26,2,1,0],[27,0,2,0],[28,0,3,0],[29,0,4,0],[30,0,5,0],[31,0,6,0],[32,0,7,0],[33,0,8,0],[34,0,9,0],[35,0,10,0],[36,0,11,0],[37,0,12,0],[39,2,29,7],[39,8,29,13,"DEFAULT_VAD_CONFIG"],[39,26,29,42],[39,29,29,45],[40,4,30,2,"energyThreshold"],[40,19,30,17],[40,21,30,19],[40,26,30,24],[41,4,31,2,"noiseDelta"],[41,14,31,12],[41,16,31,14],[41,21,31,19],[42,4,32,2,"silenceDurationMs"],[42,21,32,19],[42,23,32,21],[42,27,32,25],[43,4,33,2,"minSpeechDurationMs"],[43,23,33,21],[43,25,33,23],[43,28,33,26],[44,4,34,2,"calibrationMs"],[44,17,34,15],[44,19,34,17],[45,2,35,0],[45,3,35,1],[46,2,37,7],[46,8,37,13,"LocalVAD"],[46,16,37,21],[46,17,37,22],[47,4,40,2],[48,4,41,10,"_isSpeech"],[48,13,41,19],[48,16,41,31],[48,21,41,36],[49,4,42,10,"_speechStartTime"],[49,20,42,26],[49,23,42,37],[49,24,42,38],[50,4,43,10,"_silenceStartTime"],[50,21,43,27],[50,24,43,38],[50,25,43,39],[51,4,44,10,"_lastEnergy"],[51,15,44,21],[51,18,44,32],[51,19,44,33],[53,4,46,2],[54,4,47,10,"_calibrating"],[54,16,47,22],[54,19,47,34],[54,24,47,39],[55,4,48,10,"_calibrationStart"],[55,21,48,27],[55,24,48,38],[55,25,48,39],[56,4,49,10,"_calibrationSamples"],[56,23,49,29],[56,26,49,42],[56,28,49,44],[57,4,52,2],[58,4,53,10,"_pendingSpeechStart"],[58,23,53,29],[58,26,53,40],[58,27,53,41],[58,28,53,42],[58,29,53,44],[60,4,55,2,"constructor"],[60,15,55,13,"constructor"],[60,16,55,14,"config"],[60,22,55,41],[60,24,55,43],[61,6,56,4],[61,10,56,8],[61,11,56,9,"config"],[61,17,56,15],[61,20,56,18],[62,8,56,20],[62,11,56,23,"DEFAULT_VAD_CONFIG"],[62,29,56,41],[63,8,56,43],[63,11,56,46,"config"],[64,6,56,53],[64,7,56,54],[65,6,57,4],[65,10,57,8],[65,11,57,9,"_dynamicThreshold"],[65,28,57,26],[65,31,57,29],[65,35,57,33],[65,36,57,34,"config"],[65,42,57,40],[65,43,57,41,"energyThreshold"],[65,58,57,56],[66,4,58,2],[67,4,60,2],[67,8,60,6,"isSpeech"],[67,16,60,14,"isSpeech"],[67,17,60,14],[67,19,60,26],[68,6,61,4],[68,13,61,11],[68,17,61,15],[68,18,61,16,"_isSpeech"],[68,27,61,25],[69,4,62,2],[70,4,64,2],[70,8,64,6,"lastEnergy"],[70,18,64,16,"lastEnergy"],[70,19,64,16],[70,21,64,27],[71,6,65,4],[71,13,65,11],[71,17,65,15],[71,18,65,16,"_lastEnergy"],[71,29,65,27],[72,4,66,2],[73,4,68,2],[73,8,68,6,"dynamicThreshold"],[73,24,68,22,"dynamicThreshold"],[73,25,68,22],[73,27,68,33],[74,6,69,4],[74,13,69,11],[74,17,69,15],[74,18,69,16,"_dynamicThreshold"],[74,35,69,33],[75,4,70,2],[77,4,72,2],[78,0,73,0],[79,0,74,0],[80,0,75,0],[81,0,76,0],[82,4,77,2,"startCalibration"],[82,20,77,18,"startCalibration"],[82,21,77,18],[82,23,77,27],[83,6,78,4],[83,10,78,8],[83,11,78,9,"_calibrating"],[83,23,78,21],[83,26,78,24],[83,30,78,28],[84,6,79,4],[84,10,79,8],[84,11,79,9,"_calibrationStart"],[84,28,79,26],[84,31,79,29,"Date"],[84,35,79,33],[84,36,79,34,"now"],[84,39,79,37],[84,40,79,38],[84,41,79,39],[85,6,80,4],[85,10,80,8],[85,11,80,9,"_calibrationSamples"],[85,30,80,28],[85,33,80,31],[85,35,80,33],[86,4,81,2],[88,4,83,2],[89,0,84,0],[90,0,85,0],[91,0,86,0],[92,4,87,2,"processEnergy"],[92,17,87,15,"processEnergy"],[92,18,87,16,"rms"],[92,21,87,27],[92,23,87,39],[93,6,88,4],[93,10,88,8],[93,11,88,9,"_lastEnergy"],[93,22,88,20],[93,25,88,23,"rms"],[93,28,88,26],[94,6,89,4],[94,12,89,10,"now"],[94,15,89,13],[94,18,89,16,"Date"],[94,22,89,20],[94,23,89,21,"now"],[94,26,89,24],[94,27,89,25],[94,28,89,26],[96,6,91,4],[97,6,92,4],[97,10,92,8],[97,14,92,12],[97,15,92,13,"_calibrating"],[97,27,92,25],[97,29,92,27],[98,8,93,6],[98,12,93,10],[98,13,93,11,"_calibrationSamples"],[98,32,93,30],[98,33,93,31,"push"],[98,37,93,35],[98,38,93,36,"rms"],[98,41,93,39],[98,42,93,40],[99,8,94,6],[99,12,94,10,"now"],[99,15,94,13],[99,18,94,16],[99,22,94,20],[99,23,94,21,"_calibrationStart"],[99,40,94,38],[99,44,94,42],[99,48,94,46],[99,49,94,47,"config"],[99,55,94,53],[99,56,94,54,"calibrationMs"],[99,69,94,67],[99,71,94,69],[100,10,95,8],[100,14,95,12],[100,15,95,13,"_finishCalibration"],[100,33,95,31],[100,34,95,32],[100,35,95,33],[101,8,96,6],[102,8,97,6],[102,15,97,13],[102,21,97,19],[102,22,97,20],[102,23,97,21],[103,6,98,4],[104,6,100,4],[104,12,100,10,"threshold"],[104,21,100,19],[104,24,100,22],[104,28,100,26],[104,29,100,27,"_dynamicThreshold"],[104,46,100,44],[105,6,101,4],[105,12,101,10,"isAboveThreshold"],[105,28,101,26],[105,31,101,29,"rms"],[105,34,101,32],[105,37,101,35,"threshold"],[105,46,101,44],[106,6,103,4],[106,10,103,8,"isAboveThreshold"],[106,26,103,24],[106,28,103,26],[107,8,104,6],[107,12,104,10],[107,13,104,11],[107,17,104,15],[107,18,104,16,"_isSpeech"],[107,27,104,25],[107,29,104,27],[108,10,105,8],[109,10,106,8],[109,14,106,12],[109,18,106,16],[109,19,106,17,"_pendingSpeechStart"],[109,38,106,36],[109,43,106,41],[109,44,106,42],[109,46,106,44],[110,12,107,10],[110,16,107,14],[110,17,107,15,"_pendingSpeechStart"],[110,36,107,34],[110,39,107,37,"now"],[110,42,107,40],[111,10,108,8],[112,10,109,8],[113,10,110,8],[113,16,110,14,"pendingDuration"],[113,31,110,29],[113,34,110,32,"now"],[113,37,110,35],[113,40,110,38],[113,44,110,42],[113,45,110,43,"_pendingSpeechStart"],[113,64,110,62],[114,10,111,8],[114,14,111,12,"pendingDuration"],[114,29,111,27],[114,33,111,31],[114,37,111,35],[114,38,111,36,"config"],[114,44,111,42],[114,45,111,43,"minSpeechDurationMs"],[114,64,111,62],[114,66,111,64],[115,12,112,10],[115,16,112,14],[115,17,112,15,"_isSpeech"],[115,26,112,24],[115,29,112,27],[115,33,112,31],[116,12,113,10],[116,16,113,14],[116,17,113,15,"_speechStartTime"],[116,33,113,31],[116,36,113,34],[116,40,113,38],[116,41,113,39,"_pendingSpeechStart"],[116,60,113,58],[117,12,114,10],[117,16,114,14],[117,17,114,15,"_silenceStartTime"],[117,34,114,32],[117,37,114,35],[117,38,114,36],[118,12,115,10],[118,16,115,14],[118,17,115,15,"_pendingSpeechStart"],[118,36,115,34],[118,39,115,37],[118,40,115,38],[119,12,116,10],[119,19,116,17],[119,32,116,30],[120,10,117,8],[121,8,118,6],[121,9,118,7],[121,15,118,13],[122,10,119,8],[123,10,120,8],[123,14,120,12],[123,15,120,13,"_silenceStartTime"],[123,32,120,30],[123,35,120,33],[123,36,120,34],[124,10,121,8],[124,14,121,12],[124,15,121,13,"_pendingSpeechStart"],[124,34,121,32],[124,37,121,35],[124,38,121,36],[125,8,122,6],[126,6,123,4],[126,7,123,5],[126,13,123,11],[127,8,124,6],[128,8,125,6],[128,12,125,10],[128,13,125,11,"_pendingSpeechStart"],[128,32,125,30],[128,35,125,33],[128,36,125,34],[128,37,125,35],[128,38,125,36],[130,8,127,6],[130,12,127,10],[130,16,127,14],[130,17,127,15,"_isSpeech"],[130,26,127,24],[130,28,127,26],[131,10,128,8],[131,14,128,12],[131,18,128,16],[131,19,128,17,"_silenceStartTime"],[131,36,128,34],[131,41,128,39],[131,42,128,40],[131,44,128,42],[132,12,129,10],[132,16,129,14],[132,17,129,15,"_silenceStartTime"],[132,34,129,32],[132,37,129,35,"now"],[132,40,129,38],[133,10,130,8],[134,10,132,8],[134,16,132,14,"speechDuration"],[134,30,132,28],[134,33,132,31,"now"],[134,36,132,34],[134,39,132,37],[134,43,132,41],[134,44,132,42,"_speechStartTime"],[134,60,132,58],[135,10,133,8],[135,16,133,14,"silenceDuration"],[135,31,133,29],[135,34,133,32,"now"],[135,37,133,35],[135,40,133,38],[135,44,133,42],[135,45,133,43,"_silenceStartTime"],[135,62,133,60],[136,10,135,8],[136,14,136,10,"speechDuration"],[136,28,136,24],[136,32,136,28],[136,36,136,32],[136,37,136,33,"config"],[136,43,136,39],[136,44,136,40,"minSpeechDurationMs"],[136,63,136,59],[136,67,137,10,"silenceDuration"],[136,82,137,25],[136,86,137,29],[136,90,137,33],[136,91,137,34,"config"],[136,97,137,40],[136,98,137,41,"silenceDurationMs"],[136,115,137,58],[136,117,138,10],[137,12,139,10],[137,16,139,14],[137,17,139,15,"_isSpeech"],[137,26,139,24],[137,29,139,27],[137,34,139,32],[138,12,140,10],[138,16,140,14],[138,17,140,15,"_speechStartTime"],[138,33,140,31],[138,36,140,34],[138,37,140,35],[139,12,141,10],[139,16,141,14],[139,17,141,15,"_silenceStartTime"],[139,34,141,32],[139,37,141,35],[139,38,141,36],[140,12,142,10],[140,19,142,17],[140,30,142,28],[141,10,143,8],[142,8,144,6],[143,6,145,4],[144,6,147,4],[144,13,147,11],[144,19,147,17],[145,4,148,2],[147,4,150,2],[148,0,151,0],[149,0,152,0],[150,0,153,0],[151,4,154,2],[151,10,154,8,"processChunk"],[151,22,154,20,"processChunk"],[151,23,154,21,"audioBytes"],[151,33,154,43],[151,35,154,64],[152,6,155,4],[152,12,155,10,"rms"],[152,15,155,13],[152,18,155,16,"computeRMSFromBytes"],[152,37,155,35],[152,38,155,36,"audioBytes"],[152,48,155,46],[152,49,155,47],[153,6,156,4],[153,13,156,11],[153,17,156,15],[153,18,156,16,"processEnergy"],[153,31,156,29],[153,32,156,30,"rms"],[153,35,156,33],[153,36,156,34],[154,4,157,2],[156,4,159,2],[157,0,160,0],[158,0,161,0],[159,0,162,0],[160,0,163,0],[161,4,164,2,"hasSpeechContent"],[161,20,164,18,"hasSpeechContent"],[161,21,164,19,"audioBytes"],[161,31,164,41],[161,33,164,43,"minFrameFraction"],[161,49,164,59],[161,52,164,62],[161,56,164,66],[161,58,164,77],[162,6,165,4],[162,12,165,10,"frameSize"],[162,21,165,19],[162,24,165,22],[162,27,165,25],[162,28,165,26],[162,29,165,27],[163,6,166,4],[163,12,166,10,"frameCount"],[163,22,166,20],[163,25,166,23,"Math"],[163,29,166,27],[163,30,166,28,"floor"],[163,35,166,33],[163,36,166,34,"audioBytes"],[163,46,166,44],[163,47,166,45,"length"],[163,53,166,51],[163,56,166,54,"frameSize"],[163,65,166,63],[163,66,166,64],[164,6,167,4],[164,10,167,8,"frameCount"],[164,20,167,18],[164,25,167,23],[164,26,167,24],[164,28,167,26],[164,35,167,33],[164,40,167,38],[165,6,169,4],[165,10,169,8,"speechFrames"],[165,22,169,20],[165,25,169,23],[165,26,169,24],[166,6,170,4],[166,11,170,9],[166,15,170,13,"i"],[166,16,170,14],[166,19,170,17],[166,20,170,18],[166,22,170,20,"i"],[166,23,170,21],[166,26,170,24,"frameCount"],[166,36,170,34],[166,38,170,36,"i"],[166,39,170,37],[166,41,170,39],[166,43,170,41],[167,8,171,6],[167,14,171,12,"frame"],[167,19,171,17],[167,22,171,20,"audioBytes"],[167,32,171,30],[167,33,171,31,"slice"],[167,38,171,36],[167,39,171,37,"i"],[167,40,171,38],[167,43,171,41,"frameSize"],[167,52,171,50],[167,54,171,52],[167,55,171,53,"i"],[167,56,171,54],[167,59,171,57],[167,60,171,58],[167,64,171,62,"frameSize"],[167,73,171,71],[167,74,171,72],[168,8,172,6],[168,14,172,12,"rms"],[168,17,172,15],[168,20,172,18,"computeRMSFromBytes"],[168,39,172,37],[168,40,172,38,"frame"],[168,45,172,43],[168,46,172,44],[169,8,173,6],[169,12,173,10,"rms"],[169,15,173,13],[169,18,173,16],[169,22,173,20],[169,23,173,21,"_dynamicThreshold"],[169,40,173,38],[169,42,173,40,"speechFrames"],[169,54,173,52],[169,56,173,54],[170,6,174,4],[171,6,176,4],[171,13,176,12,"speechFrames"],[171,25,176,24],[171,28,176,27,"frameCount"],[171,38,176,37],[171,42,176,42,"minFrameFraction"],[171,58,176,58],[172,4,177,2],[173,4,179,2,"reset"],[173,9,179,7,"reset"],[173,10,179,7],[173,12,179,16],[174,6,180,4],[174,10,180,8],[174,11,180,9,"_isSpeech"],[174,20,180,18],[174,23,180,21],[174,28,180,26],[175,6,181,4],[175,10,181,8],[175,11,181,9,"_speechStartTime"],[175,27,181,25],[175,30,181,28],[175,31,181,29],[176,6,182,4],[176,10,182,8],[176,11,182,9,"_silenceStartTime"],[176,28,182,26],[176,31,182,29],[176,32,182,30],[177,6,183,4],[177,10,183,8],[177,11,183,9,"_lastEnergy"],[177,22,183,20],[177,25,183,23],[177,26,183,24],[178,6,184,4],[178,10,184,8],[178,11,184,9,"_pendingSpeechStart"],[178,30,184,28],[178,33,184,31],[178,34,184,32],[179,6,185,4],[179,10,185,8],[179,11,185,9,"_calibrating"],[179,23,185,21],[179,26,185,24],[179,31,185,29],[180,6,186,4],[180,10,186,8],[180,11,186,9,"_calibrationSamples"],[180,30,186,28],[180,33,186,31],[180,35,186,33],[181,6,187,4],[181,10,187,8],[181,11,187,9,"_dynamicThreshold"],[181,28,187,26],[181,31,187,29],[181,35,187,33],[181,36,187,34,"config"],[181,42,187,40],[181,43,187,41,"energyThreshold"],[181,58,187,56],[182,4,188,2],[183,4,190,10,"_finishCalibration"],[183,22,190,28,"_finishCalibration"],[183,23,190,28],[183,25,190,37],[184,6,191,4],[184,10,191,8],[184,11,191,9,"_calibrating"],[184,23,191,21],[184,26,191,24],[184,31,191,29],[185,6,192,4],[185,10,192,8],[185,14,192,12],[185,15,192,13,"_calibrationSamples"],[185,34,192,32],[185,35,192,33,"length"],[185,41,192,39],[185,44,192,42],[185,45,192,43],[185,47,192,45],[186,8,193,6],[186,14,193,12,"sorted"],[186,20,193,18],[186,23,193,21],[186,24,193,22],[186,27,193,25],[186,31,193,29],[186,32,193,30,"_calibrationSamples"],[186,51,193,49],[186,52,193,50],[186,53,193,51,"sort"],[186,57,193,55],[186,58,193,56],[186,59,193,57,"a"],[186,60,193,58],[186,62,193,60,"b"],[186,63,193,61],[186,68,193,66,"a"],[186,69,193,67],[186,72,193,70,"b"],[186,73,193,71],[186,74,193,72],[187,8,194,6],[188,8,195,6],[188,14,195,12,"p80"],[188,17,195,15],[188,20,195,18,"sorted"],[188,26,195,24],[188,27,195,25,"Math"],[188,31,195,29],[188,32,195,30,"floor"],[188,37,195,35],[188,38,195,36,"sorted"],[188,44,195,42],[188,45,195,43,"length"],[188,51,195,49],[188,54,195,52],[188,57,195,55],[188,58,195,56],[188,59,195,57],[188,63,195,61,"sorted"],[188,69,195,67],[188,70,195,68,"sorted"],[188,76,195,74],[188,77,195,75,"length"],[188,83,195,81],[188,86,195,84],[188,87,195,85],[188,88,195,86],[188,92,195,90],[188,93,195,91],[189,8,196,6],[189,12,196,10],[189,13,196,11,"_dynamicThreshold"],[189,30,196,28],[189,33,196,31,"Math"],[189,37,196,35],[189,38,196,36,"max"],[189,41,196,39],[189,42,197,8],[189,46,197,12],[189,47,197,13,"config"],[189,53,197,19],[189,54,197,20,"energyThreshold"],[189,69,197,35],[189,71,198,8,"p80"],[189,74,198,11],[189,77,198,14],[189,81,198,18],[189,82,198,19,"config"],[189,88,198,25],[189,89,198,26,"noiseDelta"],[189,99,199,6],[189,100,199,7],[190,8,200,6,"console"],[190,15,200,13],[190,16,200,14,"log"],[190,19,200,17],[190,20,200,18],[190,52,200,50,"p80"],[190,55,200,53],[190,56,200,54,"toFixed"],[190,63,200,61],[190,64,200,62],[190,65,200,63],[190,66,200,64],[190,80,200,78],[190,84,200,82],[190,85,200,83,"_dynamicThreshold"],[190,102,200,100],[190,103,200,101,"toFixed"],[190,110,200,108],[190,111,200,109],[190,112,200,110],[190,113,200,111],[190,115,200,113],[190,116,200,114],[191,6,201,4],[192,4,202,2],[193,2,203,0],[195,2,205,0],[196,0,206,0],[197,0,207,0],[198,2,208,7],[198,11,208,16,"computeRMSFromBytes"],[198,30,208,35,"computeRMSFromBytes"],[198,31,208,36,"bytes"],[198,36,208,53],[198,38,208,63],[199,4,209,2],[199,8,209,6,"sumSquares"],[199,18,209,16],[199,21,209,19],[199,22,209,20],[200,4,210,2],[200,10,210,8,"sampleCount"],[200,21,210,19],[200,24,210,22,"Math"],[200,28,210,26],[200,29,210,27,"floor"],[200,34,210,32],[200,35,210,33,"bytes"],[200,40,210,38],[200,41,210,39,"length"],[200,47,210,45],[200,50,210,48],[200,51,210,49],[200,52,210,50],[201,4,211,2],[201,8,211,6,"sampleCount"],[201,19,211,17],[201,24,211,22],[201,25,211,23],[201,27,211,25],[201,34,211,32],[201,35,211,33],[202,4,212,2],[202,9,212,7],[202,13,212,11,"i"],[202,14,212,12],[202,17,212,15],[202,18,212,16],[202,20,212,18,"i"],[202,21,212,19],[202,24,212,22,"sampleCount"],[202,35,212,33],[202,37,212,35,"i"],[202,38,212,36],[202,40,212,38],[202,42,212,40],[203,6,213,4],[203,12,213,10,"lo"],[203,14,213,12],[203,17,213,15,"bytes"],[203,22,213,20],[203,23,213,21,"i"],[203,24,213,22],[203,27,213,25],[203,28,213,26],[203,29,213,27],[203,33,213,31],[203,34,213,32],[204,6,214,4],[204,12,214,10,"hi"],[204,14,214,12],[204,17,214,15,"bytes"],[204,22,214,20],[204,23,214,21,"i"],[204,24,214,22],[204,27,214,25],[204,28,214,26],[204,31,214,29],[204,32,214,30],[204,33,214,31],[204,37,214,35],[204,38,214,36],[205,6,215,4],[205,12,215,10,"s16"],[205,15,215,13],[205,18,215,16],[205,19,215,18,"hi"],[205,21,215,20],[205,25,215,24],[205,26,215,25],[205,29,215,29,"lo"],[205,31,215,31],[205,36,215,36],[205,38,215,38],[205,42,215,42],[205,44,215,44],[206,6,216,4],[206,12,216,10,"norm"],[206,16,216,14],[206,19,216,17,"s16"],[206,22,216,20],[206,25,216,23],[206,32,216,30],[207,6,217,4,"sumSquares"],[207,16,217,14],[207,20,217,18,"norm"],[207,24,217,22],[207,27,217,25,"norm"],[207,31,217,29],[208,4,218,2],[209,4,219,2],[209,11,219,9,"Math"],[209,15,219,13],[209,16,219,14,"sqrt"],[209,20,219,18],[209,21,219,19,"sumSquares"],[209,31,219,29],[209,34,219,32,"sampleCount"],[209,45,219,43],[209,46,219,44],[210,2,220,0],[212,2,222,0],[213,2,223,7],[213,8,223,13,"vad"],[213,11,223,16],[213,14,223,19],[213,18,223,23,"LocalVAD"],[213,26,223,31],[213,27,223,32],[213,28,223,33],[214,0,223,34],[214,3]],"functionMap":{"names":["<global>","LocalVAD","LocalVAD#constructor","LocalVAD#get__isSpeech","LocalVAD#get__lastEnergy","LocalVAD#get__dynamicThreshold","LocalVAD#startCalibration","LocalVAD#processEnergy","LocalVAD#processChunk","LocalVAD#hasSpeechContent","LocalVAD#reset","LocalVAD#_finishCalibration","sort$argument_0","computeRMSFromBytes"],"mappings":"AAA;OCoC;ECkB;GDG;EEE;GFE;EGE;GHE;EIE;GJE;EKO;GLI;EMM;GN6D;EOM;GPG;EQO;GRa;ESE;GTS;EUE;wDCG,eD;GVS;CDC;OaK;CbY"},"hasCjsExports":false},"type":"js/module"}]}