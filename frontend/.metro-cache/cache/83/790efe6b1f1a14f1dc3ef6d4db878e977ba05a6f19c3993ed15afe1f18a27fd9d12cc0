{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./pkg","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":641},"end":{"line":16,"column":50,"index":691}}],"key":"+AXKDS3Rpfle7eEXX3r5kv/MKi0=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":692},"end":{"line":17,"column":52,"index":744}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.nodeToText = nodeToText;\n  exports.syncPKGToBackend = syncPKGToBackend;\n  exports.syncTombstones = syncTombstones;\n  exports.isSyncDue = isSyncDue;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _pkg = require(_dependencyMap[1], \"./pkg\");\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  /**\n   * Digital Self Sync Manager\n   *\n   * Sends PKG node TEXT to the backend for ONNX embedding.\n   * Backend generates the 384-dim vector and stores ONLY the vector — text is discarded.\n   * On subsequent mandates, the backend resolves node_ids and the device provides\n   * the readable text on-demand (ds_resolve / ds_context WS round-trip).\n   *\n   * What travels to the backend:\n   *   SYNC:         { node_id, text }  — text used to generate vector, then discarded\n   *   PER MANDATE:  { node_id, text }  — only for 2-3 matched nodes, ephemeral\n   *   NEVER stored: raw contacts, calendar data, phone numbers\n   */\n\n  const LAST_SYNC_KEY = 'myndlens_ds_last_sync';\n  const SYNC_INTERVAL_MS = 6 * 60 * 60 * 1000; // 6 hours\n\n  // ── Node text builder ──────────────────────────────────────────────────────\n\n  /**\n   * Convert a PKG node to a meaningful text string for ONNX embedding.\n   * The text encodes the node's identity and relationships so that\n   * the backend can semantically match it against a user's spoken transcript.\n   */\n  function nodeToText(node) {\n    const parts = [node.label];\n    switch (node.type) {\n      case 'Person':\n        {\n          if (node.data.relationship) parts.push(node.data.relationship);\n          if (node.data.organization) parts.push(node.data.organization);\n          if (node.data.signal) parts.push(node.data.signal);\n          break;\n        }\n      case 'Place':\n        {\n          if (node.data.category) parts.push(node.data.category);\n          if (node.data.address) parts.push(node.data.address);\n          break;\n        }\n      case 'Trait':\n      case 'Interest':\n        {\n          if (node.data.context) parts.push(node.data.context);\n          break;\n        }\n      case 'Event':\n        {\n          if (node.data.date) parts.push(node.data.date);\n          if (node.data.location) parts.push(node.data.location);\n          if (node.data.attendees) parts.push(`with ${node.data.attendees}`);\n          break;\n        }\n      case 'Task':\n      case 'Project':\n      case 'Document':\n        {\n          if (node.data.description) parts.push(node.data.description);\n          if (node.data.status) parts.push(node.data.status);\n          break;\n        }\n      default:\n        {\n          if (node.data.value) parts.push(String(node.data.value));\n          if (node.data.context) parts.push(String(node.data.context));\n          break;\n        }\n    }\n    return parts.filter(Boolean).join(' — ');\n  }\n\n  // ── Delta detection ────────────────────────────────────────────────────────\n\n  /**\n   * Returns nodes that need syncing: updated_at > synced_at (or never synced).\n   */\n  function getDelta(nodes) {\n    return nodes.filter(n => {\n      if (!n.synced_at) return true;\n      return new Date(n.updated_at) > new Date(n.synced_at);\n    });\n  }\n\n  // ── Sync to backend ────────────────────────────────────────────────────────\n\n  /**\n   * Sync delta PKG nodes to the backend.\n   *\n   * Sends { node_id, text } pairs over HTTPS (TLS encrypted).\n   * Backend embeds the text using ONNX (bge-small-en-v1.5) and stores\n   * ONLY the resulting vector — the text is never persisted on the backend.\n   *\n   * @param userId  - the authenticated user id\n   * @param force   - if true, sync all nodes regardless of synced_at\n   */\n  async function syncPKGToBackend(userId, force = false) {\n    const result = {\n      synced: 0,\n      deleted: 0,\n      skipped: 0\n    };\n    try {\n      const pkg = await (0, _pkg.loadPKG)(userId);\n      const allNodes = Object.values(pkg.nodes);\n      const delta = force ? allNodes : getDelta(allNodes);\n      if (delta.length === 0) {\n        result.skipped = allNodes.length;\n        return result;\n      }\n      const apiUrl = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL ?? '';\n      const token = (await (0, _utilsStorage.getItem)('myndlens_auth_token')) ?? '';\n\n      // Build payload — { node_id, text } only. No raw personal data beyond the label.\n      const payload = {\n        user_id: userId,\n        nodes: delta.map(n => ({\n          node_id: n.id,\n          text: nodeToText(n)\n        }))\n      };\n      const response = await fetch(`${apiUrl}/api/digital-self/sync`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        const err = await response.text();\n        result.error = `HTTP ${response.status}: ${err}`;\n        return result;\n      }\n\n      // Mark synced nodes with current timestamp\n      const now = new Date().toISOString();\n      for (const node of delta) {\n        if (pkg.nodes[node.id]) {\n          pkg.nodes[node.id].synced_at = now;\n        }\n      }\n      await (0, _pkg.savePKG)(pkg);\n      await (0, _utilsStorage.setItem)(LAST_SYNC_KEY, now);\n      result.synced = delta.length;\n      result.skipped = allNodes.length - delta.length;\n      return result;\n    } catch (err) {\n      result.error = err?.message ?? 'Unknown sync error';\n      return result;\n    }\n  }\n\n  /**\n   * Notify backend to remove vectors for deleted PKG nodes.\n   */\n  async function syncTombstones(userId, deletedNodeIds) {\n    if (deletedNodeIds.length === 0) return;\n    try {\n      const apiUrl = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL ?? '';\n      const token = (await (0, _utilsStorage.getItem)('myndlens_auth_token')) ?? '';\n      await fetch(`${apiUrl}/api/digital-self/sync`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          deleted_node_ids: deletedNodeIds\n        })\n      });\n    } catch {\n      // Tombstone sync failure is non-fatal — stale vectors cause no harm, just noise\n    }\n  }\n\n  /**\n   * Returns true if a foreground sync is due (last sync > SYNC_INTERVAL_MS ago).\n   */\n  async function isSyncDue() {\n    const last = await (0, _utilsStorage.getItem)(LAST_SYNC_KEY);\n    if (!last) return true;\n    return Date.now() - new Date(last).getTime() > SYNC_INTERVAL_MS;\n  }\n});","lineCount":198,"map":[[7,2,29,0,"exports"],[7,9,29,0],[7,10,29,0,"nodeToText"],[7,20,29,0],[7,23,29,0,"nodeToText"],[7,33,29,0],[8,2,105,0,"exports"],[8,9,105,0],[8,10,105,0,"syncPKGToBackend"],[8,26,105,0],[8,29,105,0,"syncPKGToBackend"],[8,45,105,0],[9,2,168,0,"exports"],[9,9,168,0],[9,10,168,0,"syncTombstones"],[9,24,168,0],[9,27,168,0,"syncTombstones"],[9,41,168,0],[10,2,194,0,"exports"],[10,9,194,0],[10,10,194,0,"isSyncDue"],[10,19,194,0],[10,22,194,0,"isSyncDue"],[10,31,194,0],[11,2,198,1],[11,6,198,1,"_expoVirtualEnv"],[11,21,198,1],[11,24,198,1,"require"],[11,31,198,1],[11,32,198,1,"_dependencyMap"],[11,46,198,1],[12,2,16,0],[12,6,16,0,"_pkg"],[12,10,16,0],[12,13,16,0,"require"],[12,20,16,0],[12,21,16,0,"_dependencyMap"],[12,35,16,0],[13,2,17,0],[13,6,17,0,"_utilsStorage"],[13,19,17,0],[13,22,17,0,"require"],[13,29,17,0],[13,30,17,0,"_dependencyMap"],[13,44,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[28,2,19,0],[28,8,19,6,"LAST_SYNC_KEY"],[28,21,19,19],[28,24,19,22],[28,47,19,45],[29,2,20,0],[29,8,20,6,"SYNC_INTERVAL_MS"],[29,24,20,22],[29,27,20,25],[29,28,20,26],[29,31,20,29],[29,33,20,31],[29,36,20,34],[29,38,20,36],[29,41,20,39],[29,45,20,43],[29,46,20,44],[29,47,20,45],[31,2,22,0],[33,2,24,0],[34,0,25,0],[35,0,26,0],[36,0,27,0],[37,0,28,0],[38,2,29,7],[38,11,29,16,"nodeToText"],[38,21,29,26,"nodeToText"],[38,22,29,27,"node"],[38,26,29,40],[38,28,29,50],[39,4,30,2],[39,10,30,8,"parts"],[39,15,30,23],[39,18,30,26],[39,19,30,27,"node"],[39,23,30,31],[39,24,30,32,"label"],[39,29,30,37],[39,30,30,38],[40,4,32,2],[40,12,32,10,"node"],[40,16,32,14],[40,17,32,15,"type"],[40,21,32,19],[41,6,33,4],[41,11,33,9],[41,19,33,17],[42,8,33,19],[43,10,34,6],[43,14,34,10,"node"],[43,18,34,14],[43,19,34,15,"data"],[43,23,34,19],[43,24,34,20,"relationship"],[43,36,34,32],[43,38,34,34,"parts"],[43,43,34,39],[43,44,34,40,"push"],[43,48,34,44],[43,49,34,45,"node"],[43,53,34,49],[43,54,34,50,"data"],[43,58,34,54],[43,59,34,55,"relationship"],[43,71,34,67],[43,72,34,68],[44,10,35,6],[44,14,35,10,"node"],[44,18,35,14],[44,19,35,15,"data"],[44,23,35,19],[44,24,35,20,"organization"],[44,36,35,32],[44,38,35,34,"parts"],[44,43,35,39],[44,44,35,40,"push"],[44,48,35,44],[44,49,35,45,"node"],[44,53,35,49],[44,54,35,50,"data"],[44,58,35,54],[44,59,35,55,"organization"],[44,71,35,67],[44,72,35,68],[45,10,36,6],[45,14,36,10,"node"],[45,18,36,14],[45,19,36,15,"data"],[45,23,36,19],[45,24,36,20,"signal"],[45,30,36,26],[45,32,36,28,"parts"],[45,37,36,33],[45,38,36,34,"push"],[45,42,36,38],[45,43,36,39,"node"],[45,47,36,43],[45,48,36,44,"data"],[45,52,36,48],[45,53,36,49,"signal"],[45,59,36,55],[45,60,36,56],[46,10,37,6],[47,8,38,4],[48,6,39,4],[48,11,39,9],[48,18,39,16],[49,8,39,18],[50,10,40,6],[50,14,40,10,"node"],[50,18,40,14],[50,19,40,15,"data"],[50,23,40,19],[50,24,40,20,"category"],[50,32,40,28],[50,34,40,30,"parts"],[50,39,40,35],[50,40,40,36,"push"],[50,44,40,40],[50,45,40,41,"node"],[50,49,40,45],[50,50,40,46,"data"],[50,54,40,50],[50,55,40,51,"category"],[50,63,40,59],[50,64,40,60],[51,10,41,6],[51,14,41,10,"node"],[51,18,41,14],[51,19,41,15,"data"],[51,23,41,19],[51,24,41,20,"address"],[51,31,41,27],[51,33,41,29,"parts"],[51,38,41,34],[51,39,41,35,"push"],[51,43,41,39],[51,44,41,40,"node"],[51,48,41,44],[51,49,41,45,"data"],[51,53,41,49],[51,54,41,50,"address"],[51,61,41,57],[51,62,41,58],[52,10,42,6],[53,8,43,4],[54,6,44,4],[54,11,44,9],[54,18,44,16],[55,6,45,4],[55,11,45,9],[55,21,45,19],[56,8,45,21],[57,10,46,6],[57,14,46,10,"node"],[57,18,46,14],[57,19,46,15,"data"],[57,23,46,19],[57,24,46,20,"context"],[57,31,46,27],[57,33,46,29,"parts"],[57,38,46,34],[57,39,46,35,"push"],[57,43,46,39],[57,44,46,40,"node"],[57,48,46,44],[57,49,46,45,"data"],[57,53,46,49],[57,54,46,50,"context"],[57,61,46,57],[57,62,46,58],[58,10,47,6],[59,8,48,4],[60,6,49,4],[60,11,49,9],[60,18,49,16],[61,8,49,18],[62,10,50,6],[62,14,50,10,"node"],[62,18,50,14],[62,19,50,15,"data"],[62,23,50,19],[62,24,50,20,"date"],[62,28,50,24],[62,30,50,26,"parts"],[62,35,50,31],[62,36,50,32,"push"],[62,40,50,36],[62,41,50,37,"node"],[62,45,50,41],[62,46,50,42,"data"],[62,50,50,46],[62,51,50,47,"date"],[62,55,50,51],[62,56,50,52],[63,10,51,6],[63,14,51,10,"node"],[63,18,51,14],[63,19,51,15,"data"],[63,23,51,19],[63,24,51,20,"location"],[63,32,51,28],[63,34,51,30,"parts"],[63,39,51,35],[63,40,51,36,"push"],[63,44,51,40],[63,45,51,41,"node"],[63,49,51,45],[63,50,51,46,"data"],[63,54,51,50],[63,55,51,51,"location"],[63,63,51,59],[63,64,51,60],[64,10,52,6],[64,14,52,10,"node"],[64,18,52,14],[64,19,52,15,"data"],[64,23,52,19],[64,24,52,20,"attendees"],[64,33,52,29],[64,35,52,31,"parts"],[64,40,52,36],[64,41,52,37,"push"],[64,45,52,41],[64,46,52,42],[64,54,52,50,"node"],[64,58,52,54],[64,59,52,55,"data"],[64,63,52,59],[64,64,52,60,"attendees"],[64,73,52,69],[64,75,52,71],[64,76,52,72],[65,10,53,6],[66,8,54,4],[67,6,55,4],[67,11,55,9],[67,17,55,15],[68,6,56,4],[68,11,56,9],[68,20,56,18],[69,6,57,4],[69,11,57,9],[69,21,57,19],[70,8,57,21],[71,10,58,6],[71,14,58,10,"node"],[71,18,58,14],[71,19,58,15,"data"],[71,23,58,19],[71,24,58,20,"description"],[71,35,58,31],[71,37,58,33,"parts"],[71,42,58,38],[71,43,58,39,"push"],[71,47,58,43],[71,48,58,44,"node"],[71,52,58,48],[71,53,58,49,"data"],[71,57,58,53],[71,58,58,54,"description"],[71,69,58,65],[71,70,58,66],[72,10,59,6],[72,14,59,10,"node"],[72,18,59,14],[72,19,59,15,"data"],[72,23,59,19],[72,24,59,20,"status"],[72,30,59,26],[72,32,59,28,"parts"],[72,37,59,33],[72,38,59,34,"push"],[72,42,59,38],[72,43,59,39,"node"],[72,47,59,43],[72,48,59,44,"data"],[72,52,59,48],[72,53,59,49,"status"],[72,59,59,55],[72,60,59,56],[73,10,60,6],[74,8,61,4],[75,6,62,4],[76,8,62,13],[77,10,63,6],[77,14,63,10,"node"],[77,18,63,14],[77,19,63,15,"data"],[77,23,63,19],[77,24,63,20,"value"],[77,29,63,25],[77,31,63,27,"parts"],[77,36,63,32],[77,37,63,33,"push"],[77,41,63,37],[77,42,63,38,"String"],[77,48,63,44],[77,49,63,45,"node"],[77,53,63,49],[77,54,63,50,"data"],[77,58,63,54],[77,59,63,55,"value"],[77,64,63,60],[77,65,63,61],[77,66,63,62],[78,10,64,6],[78,14,64,10,"node"],[78,18,64,14],[78,19,64,15,"data"],[78,23,64,19],[78,24,64,20,"context"],[78,31,64,27],[78,33,64,29,"parts"],[78,38,64,34],[78,39,64,35,"push"],[78,43,64,39],[78,44,64,40,"String"],[78,50,64,46],[78,51,64,47,"node"],[78,55,64,51],[78,56,64,52,"data"],[78,60,64,56],[78,61,64,57,"context"],[78,68,64,64],[78,69,64,65],[78,70,64,66],[79,10,65,6],[80,8,66,4],[81,4,67,2],[82,4,69,2],[82,11,69,9,"parts"],[82,16,69,14],[82,17,69,15,"filter"],[82,23,69,21],[82,24,69,22,"Boolean"],[82,31,69,29],[82,32,69,30],[82,33,69,31,"join"],[82,37,69,35],[82,38,69,36],[82,43,69,41],[82,44,69,42],[83,2,70,0],[85,2,73,0],[87,2,75,0],[88,0,76,0],[89,0,77,0],[90,2,78,0],[90,11,78,9,"getDelta"],[90,19,78,17,"getDelta"],[90,20,78,18,"nodes"],[90,25,78,34],[90,27,78,47],[91,4,79,2],[91,11,79,9,"nodes"],[91,16,79,14],[91,17,79,15,"filter"],[91,23,79,21],[91,24,79,22,"n"],[91,25,79,23],[91,29,79,27],[92,6,80,4],[92,10,80,8],[92,11,80,9,"n"],[92,12,80,10],[92,13,80,11,"synced_at"],[92,22,80,20],[92,24,80,22],[92,31,80,29],[92,35,80,33],[93,6,81,4],[93,13,81,11],[93,17,81,15,"Date"],[93,21,81,19],[93,22,81,20,"n"],[93,23,81,21],[93,24,81,22,"updated_at"],[93,34,81,32],[93,35,81,33],[93,38,81,36],[93,42,81,40,"Date"],[93,46,81,44],[93,47,81,45,"n"],[93,48,81,46],[93,49,81,47,"synced_at"],[93,58,81,56],[93,59,81,57],[94,4,82,2],[94,5,82,3],[94,6,82,4],[95,2,83,0],[97,2,86,0],[99,2,95,0],[100,0,96,0],[101,0,97,0],[102,0,98,0],[103,0,99,0],[104,0,100,0],[105,0,101,0],[106,0,102,0],[107,0,103,0],[108,0,104,0],[109,2,105,7],[109,17,105,22,"syncPKGToBackend"],[109,33,105,38,"syncPKGToBackend"],[109,34,106,2,"userId"],[109,40,106,16],[109,42,107,2,"force"],[109,47,107,7],[109,50,107,10],[109,55,107,15],[109,57,108,23],[110,4,109,2],[110,10,109,8,"result"],[110,16,109,26],[110,19,109,29],[111,6,109,31,"synced"],[111,12,109,37],[111,14,109,39],[111,15,109,40],[112,6,109,42,"deleted"],[112,13,109,49],[112,15,109,51],[112,16,109,52],[113,6,109,54,"skipped"],[113,13,109,61],[113,15,109,63],[114,4,109,65],[114,5,109,66],[115,4,111,2],[115,8,111,6],[116,6,112,4],[116,12,112,10,"pkg"],[116,15,112,13],[116,18,112,16],[116,24,112,22],[116,28,112,22,"loadPKG"],[116,32,112,29],[116,33,112,29,"loadPKG"],[116,40,112,29],[116,42,112,30,"userId"],[116,48,112,36],[116,49,112,37],[117,6,113,4],[117,12,113,10,"allNodes"],[117,20,113,18],[117,23,113,21,"Object"],[117,29,113,27],[117,30,113,28,"values"],[117,36,113,34],[117,37,113,35,"pkg"],[117,40,113,38],[117,41,113,39,"nodes"],[117,46,113,44],[117,47,113,45],[118,6,114,4],[118,12,114,10,"delta"],[118,17,114,15],[118,20,114,18,"force"],[118,25,114,23],[118,28,114,26,"allNodes"],[118,36,114,34],[118,39,114,37,"getDelta"],[118,47,114,45],[118,48,114,46,"allNodes"],[118,56,114,54],[118,57,114,55],[119,6,116,4],[119,10,116,8,"delta"],[119,15,116,13],[119,16,116,14,"length"],[119,22,116,20],[119,27,116,25],[119,28,116,26],[119,30,116,28],[120,8,117,6,"result"],[120,14,117,12],[120,15,117,13,"skipped"],[120,22,117,20],[120,25,117,23,"allNodes"],[120,33,117,31],[120,34,117,32,"length"],[120,40,117,38],[121,8,118,6],[121,15,118,13,"result"],[121,21,118,19],[122,6,119,4],[123,6,121,4],[123,12,121,10,"apiUrl"],[123,18,121,16],[123,21,121,19,"_expoVirtualEnv"],[123,36,121,19],[123,37,121,19,"env"],[123,40,121,19],[123,41,121,19,"EXPO_PUBLIC_BACKEND_URL"],[123,64,121,19],[123,68,121,58],[123,70,121,60],[124,6,122,4],[124,12,122,10,"token"],[124,17,122,15],[124,20,122,18],[124,27,122,24],[124,31,122,24,"getItem"],[124,44,122,31],[124,45,122,31,"getItem"],[124,52,122,31],[124,54,122,32],[124,75,122,53],[124,76,122,54],[124,81,122,58],[124,83,122,60],[126,6,124,4],[127,6,125,4],[127,12,125,10,"payload"],[127,19,125,17],[127,22,125,20],[128,8,126,6,"user_id"],[128,15,126,13],[128,17,126,15,"userId"],[128,23,126,21],[129,8,127,6,"nodes"],[129,13,127,11],[129,15,127,13,"delta"],[129,20,127,18],[129,21,127,19,"map"],[129,24,127,22],[129,25,127,23,"n"],[129,26,127,24],[129,31,127,29],[130,10,127,31,"node_id"],[130,17,127,38],[130,19,127,40,"n"],[130,20,127,41],[130,21,127,42,"id"],[130,23,127,44],[131,10,127,46,"text"],[131,14,127,50],[131,16,127,52,"nodeToText"],[131,26,127,62],[131,27,127,63,"n"],[131,28,127,64],[132,8,127,66],[132,9,127,67],[132,10,127,68],[133,6,128,4],[133,7,128,5],[134,6,130,4],[134,12,130,10,"response"],[134,20,130,18],[134,23,130,21],[134,29,130,27,"fetch"],[134,34,130,32],[134,35,130,33],[134,38,130,36,"apiUrl"],[134,44,130,42],[134,68,130,66],[134,70,130,68],[135,8,131,6,"method"],[135,14,131,12],[135,16,131,14],[135,22,131,20],[136,8,132,6,"headers"],[136,15,132,13],[136,17,132,15],[137,10,133,8],[137,24,133,22],[137,26,133,24],[137,44,133,42],[138,10,134,8,"Authorization"],[138,23,134,21],[138,25,134,23],[138,35,134,33,"token"],[138,40,134,38],[139,8,135,6],[139,9,135,7],[140,8,136,6,"body"],[140,12,136,10],[140,14,136,12,"JSON"],[140,18,136,16],[140,19,136,17,"stringify"],[140,28,136,26],[140,29,136,27,"payload"],[140,36,136,34],[141,6,137,4],[141,7,137,5],[141,8,137,6],[142,6,139,4],[142,10,139,8],[142,11,139,9,"response"],[142,19,139,17],[142,20,139,18,"ok"],[142,22,139,20],[142,24,139,22],[143,8,140,6],[143,14,140,12,"err"],[143,17,140,15],[143,20,140,18],[143,26,140,24,"response"],[143,34,140,32],[143,35,140,33,"text"],[143,39,140,37],[143,40,140,38],[143,41,140,39],[144,8,141,6,"result"],[144,14,141,12],[144,15,141,13,"error"],[144,20,141,18],[144,23,141,21],[144,31,141,29,"response"],[144,39,141,37],[144,40,141,38,"status"],[144,46,141,44],[144,51,141,49,"err"],[144,54,141,52],[144,56,141,54],[145,8,142,6],[145,15,142,13,"result"],[145,21,142,19],[146,6,143,4],[148,6,145,4],[149,6,146,4],[149,12,146,10,"now"],[149,15,146,13],[149,18,146,16],[149,22,146,20,"Date"],[149,26,146,24],[149,27,146,25],[149,28,146,26],[149,29,146,27,"toISOString"],[149,40,146,38],[149,41,146,39],[149,42,146,40],[150,6,147,4],[150,11,147,9],[150,17,147,15,"node"],[150,21,147,19],[150,25,147,23,"delta"],[150,30,147,28],[150,32,147,30],[151,8,148,6],[151,12,148,10,"pkg"],[151,15,148,13],[151,16,148,14,"nodes"],[151,21,148,19],[151,22,148,20,"node"],[151,26,148,24],[151,27,148,25,"id"],[151,29,148,27],[151,30,148,28],[151,32,148,30],[152,10,149,8,"pkg"],[152,13,149,11],[152,14,149,12,"nodes"],[152,19,149,17],[152,20,149,18,"node"],[152,24,149,22],[152,25,149,23,"id"],[152,27,149,25],[152,28,149,26],[152,29,149,27,"synced_at"],[152,38,149,36],[152,41,149,39,"now"],[152,44,149,42],[153,8,150,6],[154,6,151,4],[155,6,152,4],[155,12,152,10],[155,16,152,10,"savePKG"],[155,20,152,17],[155,21,152,17,"savePKG"],[155,28,152,17],[155,30,152,18,"pkg"],[155,33,152,21],[155,34,152,22],[156,6,153,4],[156,12,153,10],[156,16,153,10,"setItem"],[156,29,153,17],[156,30,153,17,"setItem"],[156,37,153,17],[156,39,153,18,"LAST_SYNC_KEY"],[156,52,153,31],[156,54,153,33,"now"],[156,57,153,36],[156,58,153,37],[157,6,155,4,"result"],[157,12,155,10],[157,13,155,11,"synced"],[157,19,155,17],[157,22,155,20,"delta"],[157,27,155,25],[157,28,155,26,"length"],[157,34,155,32],[158,6,156,4,"result"],[158,12,156,10],[158,13,156,11,"skipped"],[158,20,156,18],[158,23,156,21,"allNodes"],[158,31,156,29],[158,32,156,30,"length"],[158,38,156,36],[158,41,156,39,"delta"],[158,46,156,44],[158,47,156,45,"length"],[158,53,156,51],[159,6,157,4],[159,13,157,11,"result"],[159,19,157,17],[160,4,158,2],[160,5,158,3],[160,6,158,4],[160,13,158,11,"err"],[160,16,158,19],[160,18,158,21],[161,6,159,4,"result"],[161,12,159,10],[161,13,159,11,"error"],[161,18,159,16],[161,21,159,19,"err"],[161,24,159,22],[161,26,159,24,"message"],[161,33,159,31],[161,37,159,35],[161,57,159,55],[162,6,160,4],[162,13,160,11,"result"],[162,19,160,17],[163,4,161,2],[164,2,162,0],[166,2,165,0],[167,0,166,0],[168,0,167,0],[169,2,168,7],[169,17,168,22,"syncTombstones"],[169,31,168,36,"syncTombstones"],[169,32,169,2,"userId"],[169,38,169,16],[169,40,170,2,"deletedNodeIds"],[169,54,170,26],[169,56,171,17],[170,4,172,2],[170,8,172,6,"deletedNodeIds"],[170,22,172,20],[170,23,172,21,"length"],[170,29,172,27],[170,34,172,32],[170,35,172,33],[170,37,172,35],[171,4,173,2],[171,8,173,6],[172,6,174,4],[172,12,174,10,"apiUrl"],[172,18,174,16],[172,21,174,19,"_expoVirtualEnv"],[172,36,174,19],[172,37,174,19,"env"],[172,40,174,19],[172,41,174,19,"EXPO_PUBLIC_BACKEND_URL"],[172,64,174,19],[172,68,174,58],[172,70,174,60],[173,6,175,4],[173,12,175,10,"token"],[173,17,175,15],[173,20,175,18],[173,27,175,24],[173,31,175,24,"getItem"],[173,44,175,31],[173,45,175,31,"getItem"],[173,52,175,31],[173,54,175,32],[173,75,175,53],[173,76,175,54],[173,81,175,58],[173,83,175,60],[174,6,177,4],[174,12,177,10,"fetch"],[174,17,177,15],[174,18,177,16],[174,21,177,19,"apiUrl"],[174,27,177,25],[174,51,177,49],[174,53,177,51],[175,8,178,6,"method"],[175,14,178,12],[175,16,178,14],[175,24,178,22],[176,8,179,6,"headers"],[176,15,179,13],[176,17,179,15],[177,10,180,8],[177,24,180,22],[177,26,180,24],[177,44,180,42],[178,10,181,8,"Authorization"],[178,23,181,21],[178,25,181,23],[178,35,181,33,"token"],[178,40,181,38],[179,8,182,6],[179,9,182,7],[180,8,183,6,"body"],[180,12,183,10],[180,14,183,12,"JSON"],[180,18,183,16],[180,19,183,17,"stringify"],[180,28,183,26],[180,29,183,27],[181,10,183,29,"user_id"],[181,17,183,36],[181,19,183,38,"userId"],[181,25,183,44],[182,10,183,46,"deleted_node_ids"],[182,26,183,62],[182,28,183,64,"deletedNodeIds"],[183,8,183,79],[183,9,183,80],[184,6,184,4],[184,7,184,5],[184,8,184,6],[185,4,185,2],[185,5,185,3],[185,6,185,4],[185,12,185,10],[186,6,186,4],[187,4,186,4],[188,2,188,0],[190,2,191,0],[191,0,192,0],[192,0,193,0],[193,2,194,7],[193,17,194,22,"isSyncDue"],[193,26,194,31,"isSyncDue"],[193,27,194,31],[193,29,194,52],[194,4,195,2],[194,10,195,8,"last"],[194,14,195,12],[194,17,195,15],[194,23,195,21],[194,27,195,21,"getItem"],[194,40,195,28],[194,41,195,28,"getItem"],[194,48,195,28],[194,50,195,29,"LAST_SYNC_KEY"],[194,63,195,42],[194,64,195,43],[195,4,196,2],[195,8,196,6],[195,9,196,7,"last"],[195,13,196,11],[195,15,196,13],[195,22,196,20],[195,26,196,24],[196,4,197,2],[196,11,197,9,"Date"],[196,15,197,13],[196,16,197,14,"now"],[196,19,197,17],[196,20,197,18],[196,21,197,19],[196,24,197,22],[196,28,197,26,"Date"],[196,32,197,30],[196,33,197,31,"last"],[196,37,197,35],[196,38,197,36],[196,39,197,37,"getTime"],[196,46,197,44],[196,47,197,45],[196,48,197,46],[196,51,197,49,"SYNC_INTERVAL_MS"],[196,67,197,65],[197,2,198,0],[198,0,198,1],[198,3]],"functionMap":{"names":["<global>","nodeToText","getDelta","nodes.filter$argument_0","syncPKGToBackend","delta.map$argument_0","syncTombstones","isSyncDue"],"mappings":"AAA;OC4B;CDyC;AEQ;sBCC;GDG;CFC;OIsB;uBCsB,6CD;CJmC;OMM;CNoB;OOM;CPI"},"hasCjsExports":false},"type":"js/module"}]}