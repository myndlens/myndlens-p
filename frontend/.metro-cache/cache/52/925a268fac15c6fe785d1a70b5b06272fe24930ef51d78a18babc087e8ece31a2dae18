{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"DEFAULT_VAD_CONFIG\", {\n    enumerable: true,\n    get: function () {\n      return DEFAULT_VAD_CONFIG;\n    }\n  });\n  Object.defineProperty(exports, \"LocalVAD\", {\n    enumerable: true,\n    get: function () {\n      return LocalVAD;\n    }\n  });\n  exports.computeRMSFromBytes = computeRMSFromBytes;\n  Object.defineProperty(exports, \"vad\", {\n    enumerable: true,\n    get: function () {\n      return vad;\n    }\n  });\n  /**\n   * Local Voice Activity Detection — RMS energy only (v1 release).\n   *\n   * Silero/ONNX is deferred (not compatible with RN 0.81 Bridgeless/New Arch in v1).\n   * All VAD runs on metering-based RMS energy from expo-av.\n   *\n   * DSP hardening for ship quality:\n   *   1. Noise floor calibration (first 600ms → dynamic threshold)\n   *   2. Minimum speech duration gate (≥300ms above threshold to confirm speechStart)\n   *   3. End-of-speech hangover (≥1500ms below threshold to confirm speechEnd)\n   *   4. Send gate: frames above threshold must be ≥ MIN_SPEECH_FRAMES to count\n   */\n\n  const DEFAULT_VAD_CONFIG = {\n    energyThreshold: 0.015,\n    noiseDelta: 0.012,\n    silenceDurationMs: 1500,\n    minSpeechDurationMs: 300,\n    calibrationMs: 600\n  };\n  class LocalVAD {\n    // Speech state\n    _isSpeech = false;\n    _speechStartTime = 0;\n    _silenceStartTime = 0;\n    _lastEnergy = 0;\n\n    // Noise floor calibration\n    _calibrating = false;\n    _calibrationStart = 0;\n    _calibrationSamples = [];\n    // Pending speech gate (accumulate energy before confirming speechStart)\n    _pendingSpeechStart = 0; // timestamp when energy first crossed threshold\n\n    constructor(config) {\n      this.config = Object.assign({}, DEFAULT_VAD_CONFIG, config);\n      this._dynamicThreshold = this.config.energyThreshold;\n    }\n    get isSpeech() {\n      return this._isSpeech;\n    }\n    get lastEnergy() {\n      return this._lastEnergy;\n    }\n    get dynamicThreshold() {\n      return this._dynamicThreshold;\n    }\n\n    /**\n     * Start noise-floor calibration.\n     * Call this immediately when recording starts.\n     * VAD will sample ambient energy for `calibrationMs` before becoming active.\n     */\n    startCalibration() {\n      this._calibrating = true;\n      this._calibrationStart = Date.now();\n      this._calibrationSamples = [];\n    }\n\n    /**\n     * Process an RMS energy value from expo-av metering.\n     * Returns VAD event.\n     */\n    processEnergy(rms) {\n      this._lastEnergy = rms;\n      const now = Date.now();\n\n      // ── Calibration phase ──────────────────────────────────────────────────\n      if (this._calibrating) {\n        this._calibrationSamples.push(rms);\n        if (now - this._calibrationStart >= this.config.calibrationMs) {\n          this._finishCalibration();\n        }\n        return 'none'; // no events during calibration\n      }\n      const threshold = this._dynamicThreshold;\n      const isAboveThreshold = rms > threshold;\n      if (isAboveThreshold) {\n        if (!this._isSpeech) {\n          // ── Pending speech gate ─────────────────────────────────────────────\n          if (this._pendingSpeechStart === 0) {\n            this._pendingSpeechStart = now;\n          }\n          // Only confirm speechStart after minSpeechDurationMs above threshold\n          const pendingDuration = now - this._pendingSpeechStart;\n          if (pendingDuration >= this.config.minSpeechDurationMs) {\n            this._isSpeech = true;\n            this._speechStartTime = this._pendingSpeechStart;\n            this._silenceStartTime = 0;\n            this._pendingSpeechStart = 0;\n            return 'speechStart';\n          }\n        } else {\n          // Already in speech — reset silence and pending timers\n          this._silenceStartTime = 0;\n          this._pendingSpeechStart = 0;\n        }\n      } else {\n        // Below threshold\n        this._pendingSpeechStart = 0; // cancel pending speechStart\n\n        if (this._isSpeech) {\n          if (this._silenceStartTime === 0) {\n            this._silenceStartTime = now;\n          }\n          const speechDuration = now - this._speechStartTime;\n          const silenceDuration = now - this._silenceStartTime;\n          if (speechDuration >= this.config.minSpeechDurationMs && silenceDuration >= this.config.silenceDurationMs) {\n            this._isSpeech = false;\n            this._speechStartTime = 0;\n            this._silenceStartTime = 0;\n            return 'speechEnd';\n          }\n        }\n      }\n      return 'none';\n    }\n\n    /**\n     * Process raw PCM bytes (RMS-only, no ML).\n     * Used for post-recording send gate: returns 'none' if audio too quiet to send.\n     */\n    async processChunk(audioBytes) {\n      const rms = computeRMSFromBytes(audioBytes);\n      return this.processEnergy(rms);\n    }\n\n    /**\n     * Returns true if a recorded audio buffer contains enough energy to be worth\n     * sending to STT. Prevents sending silence/noise.\n     * threshold: fraction of frames that must be above speechThreshold (default 10%)\n     */\n    hasSpeechContent(audioBytes, minFrameFraction = 0.10) {\n      const frameSize = 320; // 16kHz, 16-bit, 20ms frame = 320 bytes\n      const frameCount = Math.floor(audioBytes.length / frameSize);\n      if (frameCount === 0) return false;\n      let speechFrames = 0;\n      for (let i = 0; i < frameCount; i++) {\n        const frame = audioBytes.slice(i * frameSize, (i + 1) * frameSize);\n        const rms = computeRMSFromBytes(frame);\n        if (rms > this._dynamicThreshold) speechFrames++;\n      }\n      return speechFrames / frameCount >= minFrameFraction;\n    }\n    reset() {\n      this._isSpeech = false;\n      this._speechStartTime = 0;\n      this._silenceStartTime = 0;\n      this._lastEnergy = 0;\n      this._pendingSpeechStart = 0;\n      this._calibrating = false;\n      this._calibrationSamples = [];\n      this._dynamicThreshold = this.config.energyThreshold;\n    }\n    _finishCalibration() {\n      this._calibrating = false;\n      if (this._calibrationSamples.length > 0) {\n        const sorted = [...this._calibrationSamples].sort((a, b) => a - b);\n        // Use 80th percentile of calibration samples as noise floor\n        const p80 = sorted[Math.floor(sorted.length * 0.8)] ?? sorted[sorted.length - 1] ?? 0;\n        this._dynamicThreshold = Math.max(this.config.energyThreshold, p80 + this.config.noiseDelta);\n        console.log(`[VAD] Calibrated: noiseFloor=${p80.toFixed(4)} threshold=${this._dynamicThreshold.toFixed(4)}`);\n      }\n    }\n  }\n\n  /**\n   * Compute RMS energy from raw PCM bytes (16-bit signed, little-endian).\n   */\n  function computeRMSFromBytes(bytes) {\n    let sumSquares = 0;\n    const sampleCount = Math.floor(bytes.length / 2);\n    if (sampleCount === 0) return 0;\n    for (let i = 0; i < sampleCount; i++) {\n      const lo = bytes[i * 2] ?? 0;\n      const hi = bytes[i * 2 + 1] ?? 0;\n      const s16 = (hi << 8 | lo) << 16 >> 16;\n      const norm = s16 / 32768.0;\n      sumSquares += norm * norm;\n    }\n    return Math.sqrt(sumSquares / sampleCount);\n  }\n\n  // App-wide singleton\n  const vad = new LocalVAD();\n});","lineCount":211,"map":[[7,2,29,0,"Object"],[7,8,29,0],[7,9,29,0,"defineProperty"],[7,23,29,0],[7,24,29,0,"exports"],[7,31,29,0],[8,4,29,0,"enumerable"],[8,14,29,0],[9,4,29,0,"get"],[9,7,29,0],[9,18,29,0,"get"],[9,19,29,0],[10,6,29,0],[10,13,29,0,"DEFAULT_VAD_CONFIG"],[10,31,29,0],[11,4,29,0],[12,2,29,0],[13,2,37,0,"Object"],[13,8,37,0],[13,9,37,0,"defineProperty"],[13,23,37,0],[13,24,37,0,"exports"],[13,31,37,0],[14,4,37,0,"enumerable"],[14,14,37,0],[15,4,37,0,"get"],[15,7,37,0],[15,18,37,0,"get"],[15,19,37,0],[16,6,37,0],[16,13,37,0,"LocalVAD"],[16,21,37,0],[17,4,37,0],[18,2,37,0],[19,2,208,0,"exports"],[19,9,208,0],[19,10,208,0,"computeRMSFromBytes"],[19,29,208,0],[19,32,208,0,"computeRMSFromBytes"],[19,51,208,0],[20,2,223,0,"Object"],[20,8,223,0],[20,9,223,0,"defineProperty"],[20,23,223,0],[20,24,223,0,"exports"],[20,31,223,0],[21,4,223,0,"enumerable"],[21,14,223,0],[22,4,223,0,"get"],[22,7,223,0],[22,18,223,0,"get"],[22,19,223,0],[23,6,223,0],[23,13,223,0,"vad"],[23,16,223,0],[24,4,223,0],[25,2,223,0],[26,2,1,0],[27,0,2,0],[28,0,3,0],[29,0,4,0],[30,0,5,0],[31,0,6,0],[32,0,7,0],[33,0,8,0],[34,0,9,0],[35,0,10,0],[36,0,11,0],[37,0,12,0],[39,2,29,7],[39,8,29,13,"DEFAULT_VAD_CONFIG"],[39,26,29,42],[39,29,29,45],[40,4,30,2,"energyThreshold"],[40,19,30,17],[40,21,30,19],[40,26,30,24],[41,4,31,2,"noiseDelta"],[41,14,31,12],[41,16,31,14],[41,21,31,19],[42,4,32,2,"silenceDurationMs"],[42,21,32,19],[42,23,32,21],[42,27,32,25],[43,4,33,2,"minSpeechDurationMs"],[43,23,33,21],[43,25,33,23],[43,28,33,26],[44,4,34,2,"calibrationMs"],[44,17,34,15],[44,19,34,17],[45,2,35,0],[45,3,35,1],[46,2,37,7],[46,8,37,13,"LocalVAD"],[46,16,37,21],[46,17,37,22],[47,4,40,2],[48,4,41,10,"_isSpeech"],[48,13,41,19],[48,16,41,31],[48,21,41,36],[49,4,42,10,"_speechStartTime"],[49,20,42,26],[49,23,42,37],[49,24,42,38],[50,4,43,10,"_silenceStartTime"],[50,21,43,27],[50,24,43,38],[50,25,43,39],[51,4,44,10,"_lastEnergy"],[51,15,44,21],[51,18,44,32],[51,19,44,33],[53,4,46,2],[54,4,47,10,"_calibrating"],[54,16,47,22],[54,19,47,34],[54,24,47,39],[55,4,48,10,"_calibrationStart"],[55,21,48,27],[55,24,48,38],[55,25,48,39],[56,4,49,10,"_calibrationSamples"],[56,23,49,29],[56,26,49,42],[56,28,49,44],[57,4,52,2],[58,4,53,10,"_pendingSpeechStart"],[58,23,53,29],[58,26,53,40],[58,27,53,41],[58,28,53,42],[58,29,53,44],[60,4,55,2,"constructor"],[60,15,55,13,"constructor"],[60,16,55,14,"config"],[60,22,55,41],[60,24,55,43],[61,6,56,4],[61,10,56,8],[61,11,56,9,"config"],[61,17,56,15],[61,20,56,15,"Object"],[61,26,56,15],[61,27,56,15,"assign"],[61,33,56,15],[61,38,56,23,"DEFAULT_VAD_CONFIG"],[61,56,56,41],[61,58,56,46,"config"],[61,64,56,52],[61,65,56,54],[62,6,57,4],[62,10,57,8],[62,11,57,9,"_dynamicThreshold"],[62,28,57,26],[62,31,57,29],[62,35,57,33],[62,36,57,34,"config"],[62,42,57,40],[62,43,57,41,"energyThreshold"],[62,58,57,56],[63,4,58,2],[64,4,60,2],[64,8,60,6,"isSpeech"],[64,16,60,14,"isSpeech"],[64,17,60,14],[64,19,60,26],[65,6,61,4],[65,13,61,11],[65,17,61,15],[65,18,61,16,"_isSpeech"],[65,27,61,25],[66,4,62,2],[67,4,64,2],[67,8,64,6,"lastEnergy"],[67,18,64,16,"lastEnergy"],[67,19,64,16],[67,21,64,27],[68,6,65,4],[68,13,65,11],[68,17,65,15],[68,18,65,16,"_lastEnergy"],[68,29,65,27],[69,4,66,2],[70,4,68,2],[70,8,68,6,"dynamicThreshold"],[70,24,68,22,"dynamicThreshold"],[70,25,68,22],[70,27,68,33],[71,6,69,4],[71,13,69,11],[71,17,69,15],[71,18,69,16,"_dynamicThreshold"],[71,35,69,33],[72,4,70,2],[74,4,72,2],[75,0,73,0],[76,0,74,0],[77,0,75,0],[78,0,76,0],[79,4,77,2,"startCalibration"],[79,20,77,18,"startCalibration"],[79,21,77,18],[79,23,77,27],[80,6,78,4],[80,10,78,8],[80,11,78,9,"_calibrating"],[80,23,78,21],[80,26,78,24],[80,30,78,28],[81,6,79,4],[81,10,79,8],[81,11,79,9,"_calibrationStart"],[81,28,79,26],[81,31,79,29,"Date"],[81,35,79,33],[81,36,79,34,"now"],[81,39,79,37],[81,40,79,38],[81,41,79,39],[82,6,80,4],[82,10,80,8],[82,11,80,9,"_calibrationSamples"],[82,30,80,28],[82,33,80,31],[82,35,80,33],[83,4,81,2],[85,4,83,2],[86,0,84,0],[87,0,85,0],[88,0,86,0],[89,4,87,2,"processEnergy"],[89,17,87,15,"processEnergy"],[89,18,87,16,"rms"],[89,21,87,27],[89,23,87,39],[90,6,88,4],[90,10,88,8],[90,11,88,9,"_lastEnergy"],[90,22,88,20],[90,25,88,23,"rms"],[90,28,88,26],[91,6,89,4],[91,12,89,10,"now"],[91,15,89,13],[91,18,89,16,"Date"],[91,22,89,20],[91,23,89,21,"now"],[91,26,89,24],[91,27,89,25],[91,28,89,26],[93,6,91,4],[94,6,92,4],[94,10,92,8],[94,14,92,12],[94,15,92,13,"_calibrating"],[94,27,92,25],[94,29,92,27],[95,8,93,6],[95,12,93,10],[95,13,93,11,"_calibrationSamples"],[95,32,93,30],[95,33,93,31,"push"],[95,37,93,35],[95,38,93,36,"rms"],[95,41,93,39],[95,42,93,40],[96,8,94,6],[96,12,94,10,"now"],[96,15,94,13],[96,18,94,16],[96,22,94,20],[96,23,94,21,"_calibrationStart"],[96,40,94,38],[96,44,94,42],[96,48,94,46],[96,49,94,47,"config"],[96,55,94,53],[96,56,94,54,"calibrationMs"],[96,69,94,67],[96,71,94,69],[97,10,95,8],[97,14,95,12],[97,15,95,13,"_finishCalibration"],[97,33,95,31],[97,34,95,32],[97,35,95,33],[98,8,96,6],[99,8,97,6],[99,15,97,13],[99,21,97,19],[99,22,97,20],[99,23,97,21],[100,6,98,4],[101,6,100,4],[101,12,100,10,"threshold"],[101,21,100,19],[101,24,100,22],[101,28,100,26],[101,29,100,27,"_dynamicThreshold"],[101,46,100,44],[102,6,101,4],[102,12,101,10,"isAboveThreshold"],[102,28,101,26],[102,31,101,29,"rms"],[102,34,101,32],[102,37,101,35,"threshold"],[102,46,101,44],[103,6,103,4],[103,10,103,8,"isAboveThreshold"],[103,26,103,24],[103,28,103,26],[104,8,104,6],[104,12,104,10],[104,13,104,11],[104,17,104,15],[104,18,104,16,"_isSpeech"],[104,27,104,25],[104,29,104,27],[105,10,105,8],[106,10,106,8],[106,14,106,12],[106,18,106,16],[106,19,106,17,"_pendingSpeechStart"],[106,38,106,36],[106,43,106,41],[106,44,106,42],[106,46,106,44],[107,12,107,10],[107,16,107,14],[107,17,107,15,"_pendingSpeechStart"],[107,36,107,34],[107,39,107,37,"now"],[107,42,107,40],[108,10,108,8],[109,10,109,8],[110,10,110,8],[110,16,110,14,"pendingDuration"],[110,31,110,29],[110,34,110,32,"now"],[110,37,110,35],[110,40,110,38],[110,44,110,42],[110,45,110,43,"_pendingSpeechStart"],[110,64,110,62],[111,10,111,8],[111,14,111,12,"pendingDuration"],[111,29,111,27],[111,33,111,31],[111,37,111,35],[111,38,111,36,"config"],[111,44,111,42],[111,45,111,43,"minSpeechDurationMs"],[111,64,111,62],[111,66,111,64],[112,12,112,10],[112,16,112,14],[112,17,112,15,"_isSpeech"],[112,26,112,24],[112,29,112,27],[112,33,112,31],[113,12,113,10],[113,16,113,14],[113,17,113,15,"_speechStartTime"],[113,33,113,31],[113,36,113,34],[113,40,113,38],[113,41,113,39,"_pendingSpeechStart"],[113,60,113,58],[114,12,114,10],[114,16,114,14],[114,17,114,15,"_silenceStartTime"],[114,34,114,32],[114,37,114,35],[114,38,114,36],[115,12,115,10],[115,16,115,14],[115,17,115,15,"_pendingSpeechStart"],[115,36,115,34],[115,39,115,37],[115,40,115,38],[116,12,116,10],[116,19,116,17],[116,32,116,30],[117,10,117,8],[118,8,118,6],[118,9,118,7],[118,15,118,13],[119,10,119,8],[120,10,120,8],[120,14,120,12],[120,15,120,13,"_silenceStartTime"],[120,32,120,30],[120,35,120,33],[120,36,120,34],[121,10,121,8],[121,14,121,12],[121,15,121,13,"_pendingSpeechStart"],[121,34,121,32],[121,37,121,35],[121,38,121,36],[122,8,122,6],[123,6,123,4],[123,7,123,5],[123,13,123,11],[124,8,124,6],[125,8,125,6],[125,12,125,10],[125,13,125,11,"_pendingSpeechStart"],[125,32,125,30],[125,35,125,33],[125,36,125,34],[125,37,125,35],[125,38,125,36],[127,8,127,6],[127,12,127,10],[127,16,127,14],[127,17,127,15,"_isSpeech"],[127,26,127,24],[127,28,127,26],[128,10,128,8],[128,14,128,12],[128,18,128,16],[128,19,128,17,"_silenceStartTime"],[128,36,128,34],[128,41,128,39],[128,42,128,40],[128,44,128,42],[129,12,129,10],[129,16,129,14],[129,17,129,15,"_silenceStartTime"],[129,34,129,32],[129,37,129,35,"now"],[129,40,129,38],[130,10,130,8],[131,10,132,8],[131,16,132,14,"speechDuration"],[131,30,132,28],[131,33,132,31,"now"],[131,36,132,34],[131,39,132,37],[131,43,132,41],[131,44,132,42,"_speechStartTime"],[131,60,132,58],[132,10,133,8],[132,16,133,14,"silenceDuration"],[132,31,133,29],[132,34,133,32,"now"],[132,37,133,35],[132,40,133,38],[132,44,133,42],[132,45,133,43,"_silenceStartTime"],[132,62,133,60],[133,10,135,8],[133,14,136,10,"speechDuration"],[133,28,136,24],[133,32,136,28],[133,36,136,32],[133,37,136,33,"config"],[133,43,136,39],[133,44,136,40,"minSpeechDurationMs"],[133,63,136,59],[133,67,137,10,"silenceDuration"],[133,82,137,25],[133,86,137,29],[133,90,137,33],[133,91,137,34,"config"],[133,97,137,40],[133,98,137,41,"silenceDurationMs"],[133,115,137,58],[133,117,138,10],[134,12,139,10],[134,16,139,14],[134,17,139,15,"_isSpeech"],[134,26,139,24],[134,29,139,27],[134,34,139,32],[135,12,140,10],[135,16,140,14],[135,17,140,15,"_speechStartTime"],[135,33,140,31],[135,36,140,34],[135,37,140,35],[136,12,141,10],[136,16,141,14],[136,17,141,15,"_silenceStartTime"],[136,34,141,32],[136,37,141,35],[136,38,141,36],[137,12,142,10],[137,19,142,17],[137,30,142,28],[138,10,143,8],[139,8,144,6],[140,6,145,4],[141,6,147,4],[141,13,147,11],[141,19,147,17],[142,4,148,2],[144,4,150,2],[145,0,151,0],[146,0,152,0],[147,0,153,0],[148,4,154,2],[148,10,154,8,"processChunk"],[148,22,154,20,"processChunk"],[148,23,154,21,"audioBytes"],[148,33,154,43],[148,35,154,64],[149,6,155,4],[149,12,155,10,"rms"],[149,15,155,13],[149,18,155,16,"computeRMSFromBytes"],[149,37,155,35],[149,38,155,36,"audioBytes"],[149,48,155,46],[149,49,155,47],[150,6,156,4],[150,13,156,11],[150,17,156,15],[150,18,156,16,"processEnergy"],[150,31,156,29],[150,32,156,30,"rms"],[150,35,156,33],[150,36,156,34],[151,4,157,2],[153,4,159,2],[154,0,160,0],[155,0,161,0],[156,0,162,0],[157,0,163,0],[158,4,164,2,"hasSpeechContent"],[158,20,164,18,"hasSpeechContent"],[158,21,164,19,"audioBytes"],[158,31,164,41],[158,33,164,43,"minFrameFraction"],[158,49,164,59],[158,52,164,62],[158,56,164,66],[158,58,164,77],[159,6,165,4],[159,12,165,10,"frameSize"],[159,21,165,19],[159,24,165,22],[159,27,165,25],[159,28,165,26],[159,29,165,27],[160,6,166,4],[160,12,166,10,"frameCount"],[160,22,166,20],[160,25,166,23,"Math"],[160,29,166,27],[160,30,166,28,"floor"],[160,35,166,33],[160,36,166,34,"audioBytes"],[160,46,166,44],[160,47,166,45,"length"],[160,53,166,51],[160,56,166,54,"frameSize"],[160,65,166,63],[160,66,166,64],[161,6,167,4],[161,10,167,8,"frameCount"],[161,20,167,18],[161,25,167,23],[161,26,167,24],[161,28,167,26],[161,35,167,33],[161,40,167,38],[162,6,169,4],[162,10,169,8,"speechFrames"],[162,22,169,20],[162,25,169,23],[162,26,169,24],[163,6,170,4],[163,11,170,9],[163,15,170,13,"i"],[163,16,170,14],[163,19,170,17],[163,20,170,18],[163,22,170,20,"i"],[163,23,170,21],[163,26,170,24,"frameCount"],[163,36,170,34],[163,38,170,36,"i"],[163,39,170,37],[163,41,170,39],[163,43,170,41],[164,8,171,6],[164,14,171,12,"frame"],[164,19,171,17],[164,22,171,20,"audioBytes"],[164,32,171,30],[164,33,171,31,"slice"],[164,38,171,36],[164,39,171,37,"i"],[164,40,171,38],[164,43,171,41,"frameSize"],[164,52,171,50],[164,54,171,52],[164,55,171,53,"i"],[164,56,171,54],[164,59,171,57],[164,60,171,58],[164,64,171,62,"frameSize"],[164,73,171,71],[164,74,171,72],[165,8,172,6],[165,14,172,12,"rms"],[165,17,172,15],[165,20,172,18,"computeRMSFromBytes"],[165,39,172,37],[165,40,172,38,"frame"],[165,45,172,43],[165,46,172,44],[166,8,173,6],[166,12,173,10,"rms"],[166,15,173,13],[166,18,173,16],[166,22,173,20],[166,23,173,21,"_dynamicThreshold"],[166,40,173,38],[166,42,173,40,"speechFrames"],[166,54,173,52],[166,56,173,54],[167,6,174,4],[168,6,176,4],[168,13,176,12,"speechFrames"],[168,25,176,24],[168,28,176,27,"frameCount"],[168,38,176,37],[168,42,176,42,"minFrameFraction"],[168,58,176,58],[169,4,177,2],[170,4,179,2,"reset"],[170,9,179,7,"reset"],[170,10,179,7],[170,12,179,16],[171,6,180,4],[171,10,180,8],[171,11,180,9,"_isSpeech"],[171,20,180,18],[171,23,180,21],[171,28,180,26],[172,6,181,4],[172,10,181,8],[172,11,181,9,"_speechStartTime"],[172,27,181,25],[172,30,181,28],[172,31,181,29],[173,6,182,4],[173,10,182,8],[173,11,182,9,"_silenceStartTime"],[173,28,182,26],[173,31,182,29],[173,32,182,30],[174,6,183,4],[174,10,183,8],[174,11,183,9,"_lastEnergy"],[174,22,183,20],[174,25,183,23],[174,26,183,24],[175,6,184,4],[175,10,184,8],[175,11,184,9,"_pendingSpeechStart"],[175,30,184,28],[175,33,184,31],[175,34,184,32],[176,6,185,4],[176,10,185,8],[176,11,185,9,"_calibrating"],[176,23,185,21],[176,26,185,24],[176,31,185,29],[177,6,186,4],[177,10,186,8],[177,11,186,9,"_calibrationSamples"],[177,30,186,28],[177,33,186,31],[177,35,186,33],[178,6,187,4],[178,10,187,8],[178,11,187,9,"_dynamicThreshold"],[178,28,187,26],[178,31,187,29],[178,35,187,33],[178,36,187,34,"config"],[178,42,187,40],[178,43,187,41,"energyThreshold"],[178,58,187,56],[179,4,188,2],[180,4,190,10,"_finishCalibration"],[180,22,190,28,"_finishCalibration"],[180,23,190,28],[180,25,190,37],[181,6,191,4],[181,10,191,8],[181,11,191,9,"_calibrating"],[181,23,191,21],[181,26,191,24],[181,31,191,29],[182,6,192,4],[182,10,192,8],[182,14,192,12],[182,15,192,13,"_calibrationSamples"],[182,34,192,32],[182,35,192,33,"length"],[182,41,192,39],[182,44,192,42],[182,45,192,43],[182,47,192,45],[183,8,193,6],[183,14,193,12,"sorted"],[183,20,193,18],[183,23,193,21],[183,24,193,22],[183,27,193,25],[183,31,193,29],[183,32,193,30,"_calibrationSamples"],[183,51,193,49],[183,52,193,50],[183,53,193,51,"sort"],[183,57,193,55],[183,58,193,56],[183,59,193,57,"a"],[183,60,193,58],[183,62,193,60,"b"],[183,63,193,61],[183,68,193,66,"a"],[183,69,193,67],[183,72,193,70,"b"],[183,73,193,71],[183,74,193,72],[184,8,194,6],[185,8,195,6],[185,14,195,12,"p80"],[185,17,195,15],[185,20,195,18,"sorted"],[185,26,195,24],[185,27,195,25,"Math"],[185,31,195,29],[185,32,195,30,"floor"],[185,37,195,35],[185,38,195,36,"sorted"],[185,44,195,42],[185,45,195,43,"length"],[185,51,195,49],[185,54,195,52],[185,57,195,55],[185,58,195,56],[185,59,195,57],[185,63,195,61,"sorted"],[185,69,195,67],[185,70,195,68,"sorted"],[185,76,195,74],[185,77,195,75,"length"],[185,83,195,81],[185,86,195,84],[185,87,195,85],[185,88,195,86],[185,92,195,90],[185,93,195,91],[186,8,196,6],[186,12,196,10],[186,13,196,11,"_dynamicThreshold"],[186,30,196,28],[186,33,196,31,"Math"],[186,37,196,35],[186,38,196,36,"max"],[186,41,196,39],[186,42,197,8],[186,46,197,12],[186,47,197,13,"config"],[186,53,197,19],[186,54,197,20,"energyThreshold"],[186,69,197,35],[186,71,198,8,"p80"],[186,74,198,11],[186,77,198,14],[186,81,198,18],[186,82,198,19,"config"],[186,88,198,25],[186,89,198,26,"noiseDelta"],[186,99,199,6],[186,100,199,7],[187,8,200,6,"console"],[187,15,200,13],[187,16,200,14,"log"],[187,19,200,17],[187,20,200,18],[187,52,200,50,"p80"],[187,55,200,53],[187,56,200,54,"toFixed"],[187,63,200,61],[187,64,200,62],[187,65,200,63],[187,66,200,64],[187,80,200,78],[187,84,200,82],[187,85,200,83,"_dynamicThreshold"],[187,102,200,100],[187,103,200,101,"toFixed"],[187,110,200,108],[187,111,200,109],[187,112,200,110],[187,113,200,111],[187,115,200,113],[187,116,200,114],[188,6,201,4],[189,4,202,2],[190,2,203,0],[192,2,205,0],[193,0,206,0],[194,0,207,0],[195,2,208,7],[195,11,208,16,"computeRMSFromBytes"],[195,30,208,35,"computeRMSFromBytes"],[195,31,208,36,"bytes"],[195,36,208,53],[195,38,208,63],[196,4,209,2],[196,8,209,6,"sumSquares"],[196,18,209,16],[196,21,209,19],[196,22,209,20],[197,4,210,2],[197,10,210,8,"sampleCount"],[197,21,210,19],[197,24,210,22,"Math"],[197,28,210,26],[197,29,210,27,"floor"],[197,34,210,32],[197,35,210,33,"bytes"],[197,40,210,38],[197,41,210,39,"length"],[197,47,210,45],[197,50,210,48],[197,51,210,49],[197,52,210,50],[198,4,211,2],[198,8,211,6,"sampleCount"],[198,19,211,17],[198,24,211,22],[198,25,211,23],[198,27,211,25],[198,34,211,32],[198,35,211,33],[199,4,212,2],[199,9,212,7],[199,13,212,11,"i"],[199,14,212,12],[199,17,212,15],[199,18,212,16],[199,20,212,18,"i"],[199,21,212,19],[199,24,212,22,"sampleCount"],[199,35,212,33],[199,37,212,35,"i"],[199,38,212,36],[199,40,212,38],[199,42,212,40],[200,6,213,4],[200,12,213,10,"lo"],[200,14,213,12],[200,17,213,15,"bytes"],[200,22,213,20],[200,23,213,21,"i"],[200,24,213,22],[200,27,213,25],[200,28,213,26],[200,29,213,27],[200,33,213,31],[200,34,213,32],[201,6,214,4],[201,12,214,10,"hi"],[201,14,214,12],[201,17,214,15,"bytes"],[201,22,214,20],[201,23,214,21,"i"],[201,24,214,22],[201,27,214,25],[201,28,214,26],[201,31,214,29],[201,32,214,30],[201,33,214,31],[201,37,214,35],[201,38,214,36],[202,6,215,4],[202,12,215,10,"s16"],[202,15,215,13],[202,18,215,16],[202,19,215,18,"hi"],[202,21,215,20],[202,25,215,24],[202,26,215,25],[202,29,215,29,"lo"],[202,31,215,31],[202,36,215,36],[202,38,215,38],[202,42,215,42],[202,44,215,44],[203,6,216,4],[203,12,216,10,"norm"],[203,16,216,14],[203,19,216,17,"s16"],[203,22,216,20],[203,25,216,23],[203,32,216,30],[204,6,217,4,"sumSquares"],[204,16,217,14],[204,20,217,18,"norm"],[204,24,217,22],[204,27,217,25,"norm"],[204,31,217,29],[205,4,218,2],[206,4,219,2],[206,11,219,9,"Math"],[206,15,219,13],[206,16,219,14,"sqrt"],[206,20,219,18],[206,21,219,19,"sumSquares"],[206,31,219,29],[206,34,219,32,"sampleCount"],[206,45,219,43],[206,46,219,44],[207,2,220,0],[209,2,222,0],[210,2,223,7],[210,8,223,13,"vad"],[210,11,223,16],[210,14,223,19],[210,18,223,23,"LocalVAD"],[210,26,223,31],[210,27,223,32],[210,28,223,33],[211,0,223,34],[211,3]],"functionMap":{"names":["<global>","LocalVAD","LocalVAD#constructor","LocalVAD#get__isSpeech","LocalVAD#get__lastEnergy","LocalVAD#get__dynamicThreshold","LocalVAD#startCalibration","LocalVAD#processEnergy","LocalVAD#processChunk","LocalVAD#hasSpeechContent","LocalVAD#reset","LocalVAD#_finishCalibration","sort$argument_0","computeRMSFromBytes"],"mappings":"AAA;OCoC;ECkB;GDG;EEE;GFE;EGE;GHE;EIE;GJE;EKO;GLI;EMM;GN6D;EOM;GPG;EQO;GRa;ESE;GTS;EUE;wDCG,eD;GVS;CDC;OaK;CbY"},"hasCjsExports":false},"type":"js/module"}]}