{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.initONNX = initONNX;\n  exports.generatePersonaSummary = generatePersonaSummary;\n  exports.getPKGStats = getPKGStats;\n  /**\n   * On-Device ONNX AI for Digital Self.\n   *\n   * Uses onnxruntime-react-native + BAAI/bge-small-en-v1.5 for semantic embedding.\n   * The ONNX session is prepared for future semantic clustering/search within the PKG.\n   * Current summary generation is template-based (works without ONNX).\n   *\n   * Requires APK rebuild with onnxruntime-react-native installed.\n   * Model is NOT downloaded until initONNX() is explicitly called.\n   */\n\n  const MODEL_URL = 'https://huggingface.co/Xenova/bge-small-en-v1.5/resolve/main/onnx/model_quantized.onnx';\n  const MODEL_CACHE_KEY = 'myndlens_onnx_bge_small_v1';\n  let _initialized = false;\n\n  // ── ONNX Session Management ─────────────────────────────────────────────────\n\n  async function initONNX() {\n    // ORT deferred to post-v1. onnxruntime-react-native is not compatible with\n    // RN 0.81 Bridgeless/New Architecture. Returns false until upstream support lands.\n    return false;\n  }\n\n  // ── Persona Summary ─────────────────────────────────────────────────────────\n\n  async function generatePersonaSummary(pkg) {\n    const nodes = Object.values(pkg.nodes);\n    if (nodes.length === 0) return 'Your Digital Self is empty. Complete onboarding to build your profile.';\n\n    // Template-based summary built from PKG (works without ONNX)\n    const parts = [];\n    const user = nodes.find(n => n.type === 'User');\n    if (user) parts.push(`**${user.label}**`);\n    const people = nodes.filter(n => n.type === 'Person');\n    if (people.length > 0) {\n      const names = people.slice(0, 5).map(p => {\n        const rel = p.data.relationship ? ` (${p.data.relationship})` : '';\n        return `${p.label}${rel}`;\n      });\n      parts.push(`Inner circle: ${names.join(', ')}${people.length > 5 ? ` +${people.length - 5} more` : ''}`);\n    }\n    const places = nodes.filter(n => n.type === 'Place');\n    if (places.length > 0) {\n      parts.push(`Locations: ${places.map(p => p.label).join(', ')}`);\n    }\n    const traits = nodes.filter(n => n.type === 'Trait');\n    if (traits.length > 0) {\n      parts.push(`Traits: ${traits.map(t => t.label).join(', ')}`);\n    }\n    const interests = nodes.filter(n => n.type === 'Interest');\n    if (interests.length > 0) {\n      parts.push(`Interests: ${interests.map(i => i.label).join(', ')}`);\n    }\n    const events = nodes.filter(n => n.type === 'Event');\n    if (events.length > 0) {\n      parts.push(`${events.length} calendar events indexed`);\n    }\n    return parts.join('\\n');\n  }\n\n  // ── PKG Statistics ───────────────────────────────────────────────────────────\n\n  function getPKGStats(pkg) {\n    const nodes = Object.values(pkg.nodes);\n    return {\n      total: nodes.length,\n      people: nodes.filter(n => n.type === 'Person').length,\n      places: nodes.filter(n => n.type === 'Place').length,\n      traits: nodes.filter(n => n.type === 'Trait').length,\n      interests: nodes.filter(n => n.type === 'Interest').length,\n      events: nodes.filter(n => n.type === 'Event').length,\n      edges: Object.keys(pkg.edges).length\n    };\n  }\n});","lineCount":84,"map":[[7,2,21,0,"exports"],[7,9,21,0],[7,10,21,0,"initONNX"],[7,18,21,0],[7,21,21,0,"initONNX"],[7,29,21,0],[8,2,29,0,"exports"],[8,9,29,0],[8,10,29,0,"generatePersonaSummary"],[8,32,29,0],[8,35,29,0,"generatePersonaSummary"],[8,57,29,0],[9,2,73,0,"exports"],[9,9,73,0],[9,10,73,0,"getPKGStats"],[9,21,73,0],[9,24,73,0,"getPKGStats"],[9,35,73,0],[10,2,1,0],[11,0,2,0],[12,0,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,0,9,0],[19,0,10,0],[21,2,14,0],[21,8,14,6,"MODEL_URL"],[21,17,14,15],[21,20,14,18],[21,108,14,106],[22,2,15,0],[22,8,15,6,"MODEL_CACHE_KEY"],[22,23,15,21],[22,26,15,24],[22,54,15,52],[23,2,17,0],[23,6,17,4,"_initialized"],[23,18,17,16],[23,21,17,19],[23,26,17,24],[25,2,19,0],[27,2,21,7],[27,17,21,22,"initONNX"],[27,25,21,30,"initONNX"],[27,26,21,30],[27,28,21,51],[28,4,22,2],[29,4,23,2],[30,4,24,2],[30,11,24,9],[30,16,24,14],[31,2,25,0],[33,2,27,0],[35,2,29,7],[35,17,29,22,"generatePersonaSummary"],[35,39,29,44,"generatePersonaSummary"],[35,40,29,45,"pkg"],[35,43,29,53],[35,45,29,72],[36,4,30,2],[36,10,30,8,"nodes"],[36,15,30,13],[36,18,30,16,"Object"],[36,24,30,22],[36,25,30,23,"values"],[36,31,30,29],[36,32,30,30,"pkg"],[36,35,30,33],[36,36,30,34,"nodes"],[36,41,30,39],[36,42,30,40],[37,4,31,2],[37,8,31,6,"nodes"],[37,13,31,11],[37,14,31,12,"length"],[37,20,31,18],[37,25,31,23],[37,26,31,24],[37,28,31,26],[37,35,31,33],[37,107,31,105],[39,4,33,2],[40,4,34,2],[40,10,34,8,"parts"],[40,15,34,23],[40,18,34,26],[40,20,34,28],[41,4,36,2],[41,10,36,8,"user"],[41,14,36,12],[41,17,36,15,"nodes"],[41,22,36,20],[41,23,36,21,"find"],[41,27,36,25],[41,28,36,26,"n"],[41,29,36,27],[41,33,36,31,"n"],[41,34,36,32],[41,35,36,33,"type"],[41,39,36,37],[41,44,36,42],[41,50,36,48],[41,51,36,49],[42,4,37,2],[42,8,37,6,"user"],[42,12,37,10],[42,14,37,12,"parts"],[42,19,37,17],[42,20,37,18,"push"],[42,24,37,22],[42,25,37,23],[42,30,37,28,"user"],[42,34,37,32],[42,35,37,33,"label"],[42,40,37,38],[42,44,37,42],[42,45,37,43],[43,4,39,2],[43,10,39,8,"people"],[43,16,39,14],[43,19,39,17,"nodes"],[43,24,39,22],[43,25,39,23,"filter"],[43,31,39,29],[43,32,39,30,"n"],[43,33,39,31],[43,37,39,35,"n"],[43,38,39,36],[43,39,39,37,"type"],[43,43,39,41],[43,48,39,46],[43,56,39,54],[43,57,39,55],[44,4,40,2],[44,8,40,6,"people"],[44,14,40,12],[44,15,40,13,"length"],[44,21,40,19],[44,24,40,22],[44,25,40,23],[44,27,40,25],[45,6,41,4],[45,12,41,10,"names"],[45,17,41,15],[45,20,41,18,"people"],[45,26,41,24],[45,27,41,25,"slice"],[45,32,41,30],[45,33,41,31],[45,34,41,32],[45,36,41,34],[45,37,41,35],[45,38,41,36],[45,39,41,37,"map"],[45,42,41,40],[45,43,41,41,"p"],[45,44,41,42],[45,48,41,46],[46,8,42,6],[46,14,42,12,"rel"],[46,17,42,15],[46,20,42,18,"p"],[46,21,42,19],[46,22,42,20,"data"],[46,26,42,24],[46,27,42,25,"relationship"],[46,39,42,37],[46,42,42,40],[46,47,42,45,"p"],[46,48,42,46],[46,49,42,47,"data"],[46,53,42,51],[46,54,42,52,"relationship"],[46,66,42,64],[46,69,42,67],[46,72,42,70],[46,74,42,72],[47,8,43,6],[47,15,43,13],[47,18,43,16,"p"],[47,19,43,17],[47,20,43,18,"label"],[47,25,43,23],[47,28,43,26,"rel"],[47,31,43,29],[47,33,43,31],[48,6,44,4],[48,7,44,5],[48,8,44,6],[49,6,45,4,"parts"],[49,11,45,9],[49,12,45,10,"push"],[49,16,45,14],[49,17,45,15],[49,34,45,32,"names"],[49,39,45,37],[49,40,45,38,"join"],[49,44,45,42],[49,45,45,43],[49,49,45,47],[49,50,45,48],[49,53,45,51,"people"],[49,59,45,57],[49,60,45,58,"length"],[49,66,45,64],[49,69,45,67],[49,70,45,68],[49,73,45,71],[49,78,45,76,"people"],[49,84,45,82],[49,85,45,83,"length"],[49,91,45,89],[49,94,45,92],[49,95,45,93],[49,102,45,100],[49,105,45,103],[49,107,45,105],[49,109,45,107],[49,110,45,108],[50,4,46,2],[51,4,48,2],[51,10,48,8,"places"],[51,16,48,14],[51,19,48,17,"nodes"],[51,24,48,22],[51,25,48,23,"filter"],[51,31,48,29],[51,32,48,30,"n"],[51,33,48,31],[51,37,48,35,"n"],[51,38,48,36],[51,39,48,37,"type"],[51,43,48,41],[51,48,48,46],[51,55,48,53],[51,56,48,54],[52,4,49,2],[52,8,49,6,"places"],[52,14,49,12],[52,15,49,13,"length"],[52,21,49,19],[52,24,49,22],[52,25,49,23],[52,27,49,25],[53,6,50,4,"parts"],[53,11,50,9],[53,12,50,10,"push"],[53,16,50,14],[53,17,50,15],[53,31,50,29,"places"],[53,37,50,35],[53,38,50,36,"map"],[53,41,50,39],[53,42,50,40,"p"],[53,43,50,41],[53,47,50,45,"p"],[53,48,50,46],[53,49,50,47,"label"],[53,54,50,52],[53,55,50,53],[53,56,50,54,"join"],[53,60,50,58],[53,61,50,59],[53,65,50,63],[53,66,50,64],[53,68,50,66],[53,69,50,67],[54,4,51,2],[55,4,53,2],[55,10,53,8,"traits"],[55,16,53,14],[55,19,53,17,"nodes"],[55,24,53,22],[55,25,53,23,"filter"],[55,31,53,29],[55,32,53,30,"n"],[55,33,53,31],[55,37,53,35,"n"],[55,38,53,36],[55,39,53,37,"type"],[55,43,53,41],[55,48,53,46],[55,55,53,53],[55,56,53,54],[56,4,54,2],[56,8,54,6,"traits"],[56,14,54,12],[56,15,54,13,"length"],[56,21,54,19],[56,24,54,22],[56,25,54,23],[56,27,54,25],[57,6,55,4,"parts"],[57,11,55,9],[57,12,55,10,"push"],[57,16,55,14],[57,17,55,15],[57,28,55,26,"traits"],[57,34,55,32],[57,35,55,33,"map"],[57,38,55,36],[57,39,55,37,"t"],[57,40,55,38],[57,44,55,42,"t"],[57,45,55,43],[57,46,55,44,"label"],[57,51,55,49],[57,52,55,50],[57,53,55,51,"join"],[57,57,55,55],[57,58,55,56],[57,62,55,60],[57,63,55,61],[57,65,55,63],[57,66,55,64],[58,4,56,2],[59,4,58,2],[59,10,58,8,"interests"],[59,19,58,17],[59,22,58,20,"nodes"],[59,27,58,25],[59,28,58,26,"filter"],[59,34,58,32],[59,35,58,33,"n"],[59,36,58,34],[59,40,58,38,"n"],[59,41,58,39],[59,42,58,40,"type"],[59,46,58,44],[59,51,58,49],[59,61,58,59],[59,62,58,60],[60,4,59,2],[60,8,59,6,"interests"],[60,17,59,15],[60,18,59,16,"length"],[60,24,59,22],[60,27,59,25],[60,28,59,26],[60,30,59,28],[61,6,60,4,"parts"],[61,11,60,9],[61,12,60,10,"push"],[61,16,60,14],[61,17,60,15],[61,31,60,29,"interests"],[61,40,60,38],[61,41,60,39,"map"],[61,44,60,42],[61,45,60,43,"i"],[61,46,60,44],[61,50,60,48,"i"],[61,51,60,49],[61,52,60,50,"label"],[61,57,60,55],[61,58,60,56],[61,59,60,57,"join"],[61,63,60,61],[61,64,60,62],[61,68,60,66],[61,69,60,67],[61,71,60,69],[61,72,60,70],[62,4,61,2],[63,4,63,2],[63,10,63,8,"events"],[63,16,63,14],[63,19,63,17,"nodes"],[63,24,63,22],[63,25,63,23,"filter"],[63,31,63,29],[63,32,63,30,"n"],[63,33,63,31],[63,37,63,35,"n"],[63,38,63,36],[63,39,63,37,"type"],[63,43,63,41],[63,48,63,46],[63,55,63,53],[63,56,63,54],[64,4,64,2],[64,8,64,6,"events"],[64,14,64,12],[64,15,64,13,"length"],[64,21,64,19],[64,24,64,22],[64,25,64,23],[64,27,64,25],[65,6,65,4,"parts"],[65,11,65,9],[65,12,65,10,"push"],[65,16,65,14],[65,17,65,15],[65,20,65,18,"events"],[65,26,65,24],[65,27,65,25,"length"],[65,33,65,31],[65,59,65,57],[65,60,65,58],[66,4,66,2],[67,4,68,2],[67,11,68,9,"parts"],[67,16,68,14],[67,17,68,15,"join"],[67,21,68,19],[67,22,68,20],[67,26,68,24],[67,27,68,25],[68,2,69,0],[70,2,71,0],[72,2,73,7],[72,11,73,16,"getPKGStats"],[72,22,73,27,"getPKGStats"],[72,23,73,28,"pkg"],[72,26,73,36],[72,28,81,2],[73,4,82,2],[73,10,82,8,"nodes"],[73,15,82,13],[73,18,82,16,"Object"],[73,24,82,22],[73,25,82,23,"values"],[73,31,82,29],[73,32,82,30,"pkg"],[73,35,82,33],[73,36,82,34,"nodes"],[73,41,82,39],[73,42,82,40],[74,4,83,2],[74,11,83,9],[75,6,84,4,"total"],[75,11,84,9],[75,13,84,11,"nodes"],[75,18,84,16],[75,19,84,17,"length"],[75,25,84,23],[76,6,85,4,"people"],[76,12,85,10],[76,14,85,12,"nodes"],[76,19,85,17],[76,20,85,18,"filter"],[76,26,85,24],[76,27,85,25,"n"],[76,28,85,26],[76,32,85,30,"n"],[76,33,85,31],[76,34,85,32,"type"],[76,38,85,36],[76,43,85,41],[76,51,85,49],[76,52,85,50],[76,53,85,51,"length"],[76,59,85,57],[77,6,86,4,"places"],[77,12,86,10],[77,14,86,12,"nodes"],[77,19,86,17],[77,20,86,18,"filter"],[77,26,86,24],[77,27,86,25,"n"],[77,28,86,26],[77,32,86,30,"n"],[77,33,86,31],[77,34,86,32,"type"],[77,38,86,36],[77,43,86,41],[77,50,86,48],[77,51,86,49],[77,52,86,50,"length"],[77,58,86,56],[78,6,87,4,"traits"],[78,12,87,10],[78,14,87,12,"nodes"],[78,19,87,17],[78,20,87,18,"filter"],[78,26,87,24],[78,27,87,25,"n"],[78,28,87,26],[78,32,87,30,"n"],[78,33,87,31],[78,34,87,32,"type"],[78,38,87,36],[78,43,87,41],[78,50,87,48],[78,51,87,49],[78,52,87,50,"length"],[78,58,87,56],[79,6,88,4,"interests"],[79,15,88,13],[79,17,88,15,"nodes"],[79,22,88,20],[79,23,88,21,"filter"],[79,29,88,27],[79,30,88,28,"n"],[79,31,88,29],[79,35,88,33,"n"],[79,36,88,34],[79,37,88,35,"type"],[79,41,88,39],[79,46,88,44],[79,56,88,54],[79,57,88,55],[79,58,88,56,"length"],[79,64,88,62],[80,6,89,4,"events"],[80,12,89,10],[80,14,89,12,"nodes"],[80,19,89,17],[80,20,89,18,"filter"],[80,26,89,24],[80,27,89,25,"n"],[80,28,89,26],[80,32,89,30,"n"],[80,33,89,31],[80,34,89,32,"type"],[80,38,89,36],[80,43,89,41],[80,50,89,48],[80,51,89,49],[80,52,89,50,"length"],[80,58,89,56],[81,6,90,4,"edges"],[81,11,90,9],[81,13,90,11,"Object"],[81,19,90,17],[81,20,90,18,"keys"],[81,24,90,22],[81,25,90,23,"pkg"],[81,28,90,26],[81,29,90,27,"edges"],[81,34,90,32],[81,35,90,33],[81,36,90,34,"length"],[82,4,91,2],[82,5,91,3],[83,2,92,0],[84,0,92,1],[84,3]],"functionMap":{"names":["<global>","initONNX","generatePersonaSummary","nodes.find$argument_0","nodes.filter$argument_0","people.slice.map$argument_0","places.map$argument_0","traits.map$argument_0","interests.map$argument_0","getPKGStats"],"mappings":"AAA;OCoB;CDI;OEI;0BCO,sBD;8BEG,wBF;yCGE;KHG;8BEI,uBF;wCIE,YJ;8BEG,uBF;qCKE,YL;iCEG,0BF;2CME,YN;8BEG,uBF;CFM;OSI;yBLY,wBK;yBLC,uBK;yBLC,uBK;4BLC,0BK;yBLC,uBK;CTG"},"hasCjsExports":false},"type":"js/module"}]}